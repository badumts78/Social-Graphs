issue
simple_cycles attempts to import multiple libraries on every call#TITLE_END#<!-- If you have a general question about NetworkX, please use the discussions tab to create a new discussion -->  <!--- Provide a general summary of the issue in the Title above -->  ### Current Behavior  Calling [nx.simple_cycles](https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.cycles.simple_cycles.html) produces multiple ImportWarnings when pandas/numpy/scipy is not installed: ``` /usr/local/lib/python3.11/site-packages/networkx/convert.py:136: ImportWarning: pandas not found, skipping conversion test.   warnings.warn("pandas not found, skipping conversion test.", ImportWarning) /usr/local/lib/python3.11/site-packages/networkx/convert.py:150: ImportWarning: numpy not found, skipping conversion test.   warnings.warn("numpy not found, skipping conversion test.", ImportWarning) /usr/local/lib/python3.11/site-packages/networkx/convert.py:164: ImportWarning: scipy not found, skipping conversion test.   warnings.warn("scipy not found, skipping conversion test.", ImportWarning) ```  This happens every time `simple_cycles` is called. The warnings come the method `convert.to_networkx_graph`, which appears in DiGraph's constructor when called from [here](https://github.com/networkx/networkx/blob/main/networkx/algorithms/cycles.py#L220)  Problems with this: - **Warnings polluted**: If logs are configured to show warnings, they get very polluted with these warnings. On pytest, for example, warnings are enabled, so they pollute the logs. - **Import attempts on every call**: Every time `simple_cycles` is called, multiple `import` instructions are called, which is slow. Does it make sense to try importing these libs on every `to_networkx_graph` call? Or can that be done just once? See a sample code below with a profile:  The following code reproduces the issue: Calling `simple_cycles` 1000 times with warnings enabled: `graph.py`: ``` import warnings import networkx as nx  warnings.simplefilter('always', Warning)  for _ in range(1000):     edges = [         ("A", "B"),         ("B", "C"),         ("C", "D"),         ("D", "B"),     ]     graph = nx.DiGraph(edges)   # << warnings appear once here     cycles = list(nx.simple_cycles(graph))   # <<< and another time here     print(cycles) ```  `python -m cProfile -s cumulative graph.py` ```          2890844 function calls (2879132 primitive calls) in 1.228 seconds     Ordered by: cumulative time     ncalls  tottime  percall  cumtime  percall filename:lineno(function)         2    0.005    0.002    1.229    0.615 graph.py:1(<module>)     358/1    0.002    0.000    1.228    1.228 {built-in method builtins.exec}      3000    0.007    0.000    0.958    0.000 digraph.py:316(__init__)      2000    0.015    0.000    0.949    0.000 convert.py:34(to_networkx_graph) 6374/6001    0.017    0.000    0.871    0.000 <frozen importlib._bootstrap>:1165(_find_and_load) 6373/6001    0.009    0.000    0.806    0.000 <frozen importlib._bootstrap>:1120(_find_and_load_unlocked)      6369    0.027    0.000    0.706    0.000 <frozen importlib._bootstrap>:1054(_find_spec)      6367    0.004    0.000    0.638    0.000 <frozen importlib._bootstrap_external>:1496(find_spec)      6367    0.046    0.000    0.634    0.000 <frozen importlib._bootstrap_external>:1464(_get_spec)      2000    0.005    0.000    0.626    0.000 cycles.py:104(simple_cycles) ``` From 1000 calls to `simple_cycles` there are 6000 import attempts and it took ~90% of the total execution time.   I would also like to mention that this may not be exclusive to `simple_cycle` method, since the warnings/imports happen on any usage of `nx.DiGraph(incoming_graph_data)` where incoming_graph_data is a list or iterator, but I understand this is expected because it has to guess. However, I wouldn't expect this guessing to happen internally on simple_cycle calls, because unlike with the construction of my nx.DiGraph, I have no way of controlling it. ```     edges = [         ("A", "B"),         ("B", "C"),         ("C", "D"),         ("D", "B"),     ]     nx.DiGraph((u, v) for u, v in edges) ```  <!--- Tell us what happens instead of the expected behavior -->  ### Expected Behavior  Warnings and imports should happen at most one time, both for logging purposes and execution time.   ### Steps to Reproduce  <!--- Provide a minimal example that reproduces the bug --> See graph.py above  ### Environment  <!--- Please provide details about your local environment -->  Python version: 3.11.9 NetworkX version: 3.3  ### Additional context  <!--- Add any other context about the problem here, screenshots, etc. --> 
comment
The main problem (https://github.com/networkx/networkx/issues/7401 ) is that using methods like `simple_cycles` trigger multiple warnings because they internally trigger this "graph input type guessing" that produces lots of warnings. If methods like these are called multiple times, then the warnings logs get too much polluted.  The part of repeated imports or how to identify which type the 'data input' is (or how to do it in the most optimal way), is a separate concern.  What I would do is: - Find out if these warnings are necessary. - If they are: modify methods like `simple_cycles` to construct graphs in a way different than the [recommended way](https://github.com/networkx/networkx/blob/a3f63be2015dfe264a0f0e3cf27ace62ae504cf0/networkx/convert.py#L3)   (example: using add_edges_from and add_nodes or whatever is called) so that the warnings are not triggered - If not: just remove the warnings.  Regarding the other issue of input type guessing/optimizations then we can create a separate issue. For my specific use-case I don't have a need for this optimization.
comment
Thank you @dschult !  > I'm going to close this draft PR and try to refocus the discussion around whether we need the warnings  Is this going to be on https://github.com/networkx/networkx/issues/7401 ? Or where can I 'watch' for updates regarding this?
comment
Is there a reason why the import is done on every call to `to_network_graph` instead of a `try import/except` at module level? Is that intentional? It seems like this is done to accept installing these packages after an interpreter is already open with networkx already imported (but numpy/pandas/.. not installed at that time).  Maybe there are better ways to check if the graph data is a numpy/pandas/scipy object without having to try importing the module.
comment
> So, I will ask a perhaps silly question @albertferras-vrf : Is the problem that the failed imports take too long, or that the warnings pollute the log?  The main reason I created the issue https://github.com/networkx/networkx/issues/7401 was due to all the warnings that appeared in the logs. However, since I saw that the `to_networkx_graph` attempted to import numpy/pandas on each call I also made a benchmark out of curiosity to see how much time is spent on importing and saw that it took ~90% of the total execution time (0.871 of 0.958s for 1000 construction calls). Since that looks odd, I also reported it. So yes, 2 separate issues 
