issue
Fixed issue where edge attributes were being silently overwritten during node contraction#TITLE_END#This PR fixes issue #4150 where remapped edges during node contraction were silently overwriting existing edges. Take the example from the original reported issue:  Given a Graph or DiGraph with the shape `(src1) --> (dest) <-- (src2)`; the node `src2` is contracted into the node `src1` to give the resulting graph `(src1) --> (dest)`. Currently, the "disappearing" edge `(src2, dest)` _overwrites_ the existing edge `(src1, dest)` including all of the edge's attributes.  This PR adds a check for existing edges while remapping edges from the "disappearing" node to the existing one. If we would be overwriting an edge, we instead append the attributes of the "disappearing" edge into a `"contraction"` attribute on the existing edge - this mirrors how the contracting node attributes are handled. In the case outlined in the original issue, we now end up with the following attributes:  ``` {   "value": "src1-value",   "contraction": {     ("src2", "dest"): {       "value": "src2-value"     }   } } ```  Note that this is a break from the existing API (even if it's pretty esoteric) - does this warrant an entry in the release notes?
issue
Inconsistent Attribute Handling During DiGraph Node Contraction#TITLE_END#It looks like edges which are contracted as part of the `contract_nodes` call for a DiGraph do not merge their attributes in the same way that the nodes do. Take the snippet below as an example. Here we contract two nodes (`src1` and `src2`) which each have a directed edge to the same node (`dest`). Because we're not using a multi-graph the contraction of those two nodes also forces the the contraction of their edges to `dest` as well. ```python import networkx as nx  G = nx.DiGraph([("src1", "dest"), ("src2", "dest")]) # Shape: src1 --> dest <-- src2  G.nodes["src1"]["value"] = "src1-value" G.nodes["src2"]["value"] = "src2-value"  G["src1"]["dest"]["value"] = "src1-value" G["src2"]["dest"]["value"] = "src2-value"  G = nx.contracted_nodes(G, "src1", "src2") # New Shape: src1 --> dest  print(G.nodes["src1"])   # {'value': 'src1-value', 'contraction': {'src2': {'value': 'src2-value'}}} print(G.edges[("src1", "dest")]) # {'value': 'src2-value'} ``` For the node attributes we can see that the `src1` attributes correctly take precedence, and the attributes inherited from `src2` are placed into a new `'contraction'` attribute. However, for the edge attributes the `src2-->dest` edge takes precedence which is the opposite of what I would expect; additionally we lose that additional context of the contracted `src1-->dest` edge entirely.  Tested with Python 3.7.3 and networkx 2.4
issue
Fixed issue where edge contraction was unpacking edges incorrectly#TITLE_END#Fixes issue #3139 where edge contraction had the incorrect assumption that edges were always a 2-tuple such as `('u', 'v')`. This was causing failures when contracting multigraph edges which can be referenced explicitly with their index such as `('u', 'v', 0)`.  Updated the edge contraction logic to use at most the first two elements in the tuple
