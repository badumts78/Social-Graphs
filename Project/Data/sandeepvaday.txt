issue
Bug in to_scipy_sparse_matrix()?#TITLE_END#In response to pull request [#969](https://github.com/networkx/networkx/pull/969), here is the exception occurring with the use of network.convert.to_scipy_sparse_matrix() for computing eigenvector centrality.  ``` In [1]: import eigenvector_mod as em  In [2]: import networkx as netx  In [3]: G = netx.read_gml('./testgraph.gml')  In [4]: em.eigenvector_centrality_numpy_sparse(G) --------------------------------------------------------------------------- ValueError                                Traceback (most recent call last) /tmp/test_ev_mod/<ipython-input-4-dcf609763449> in <module>() ----> 1 em.eigenvector_centrality_numpy_sparse(G)  /tmp/test_ev_mod/eigenvector_mod.py in eigenvector_centrality_numpy_sparse(G)     172     A = nx.to_scipy_sparse_matrix(G, format='csc')     173     k = min(6, G.number_of_nodes() - 2) --> 174     eigenvalues,eigenvectors=eigs(A.tocsc(), k=k)     175     # eigenvalue indices in reverse sorted order      176     ind=eigenvalues.argsort()[::-1]  /usr/lib/python2.7/dist-packages/scipy/sparse/linalg/eigen/arpack/arpack.pyc in eigs(A, k, M, sigma, which, v0, ncv, maxiter, tol, return_eigenvectors)     563     matvec = lambda x : A.matvec(x)     564     params = _UnsymmetricArpackParams(n, k, A.dtype.char, matvec, sigma, --> 565                            ncv, v0, maxiter, which, tol)     566      567     if M is not None:  /usr/lib/python2.7/dist-packages/scipy/sparse/linalg/eigen/arpack/arpack.pyc in __init__(self, n, k, tp, matvec, sigma, ncv, v0, maxiter, which, tol)     311      312         _ArpackParams.__init__(self, n, k, tp, matvec, sigma, --> 313                  ncv, v0, maxiter, which, tol)     314      315         if self.ncv > n or self.ncv <= k+1:  /usr/lib/python2.7/dist-packages/scipy/sparse/linalg/eigen/arpack/arpack.pyc in __init__(self, n, k, tp, matvec, sigma, ncv, v0, maxiter, which, tol)     174      175         if tp not in 'fdFD': --> 176             raise ValueError("matrix type must be 'f', 'd', 'F', or 'D'")     177      178         if v0 is not None:  ValueError: matrix type must be 'f', 'd', 'F', or 'D'  In [5]:  ```  The slimmed down implementation I tried earlier is here:  ``` def eigenvector_centrality_numpy_sparse(G):     try:         import numpy as np         from scipy.sparse.linalg import eigs     except ImportError:         raise ImportError('Requires NumPy: http://scipy.org/')      if type(G) == nx.MultiGraph or type(G) == nx.MultiDiGraph:         raise nx.NetworkXException('Not defined for multigraphs.')      if len(G)==0:         raise nx.NetworkXException('Empty graph.')      A = nx.to_scipy_sparse_matrix(G, format='csc')     k = min(6, G.number_of_nodes() - 2)     eigenvalues,eigenvectors=eigs(A.tocsc(), k=k)      # eigenvalue indices in reverse sorted order     ind=eigenvalues.argsort()[::-1]     # eigenvector of largest eigenvalue at ind[0], normalized     largest=np.array(eigenvectors[:,ind[0]]).flatten().real     norm=np.sign(largest.sum())*np.linalg.norm(largest)     centrality=dict(zip(G,map(float,largest/norm)))     return centrality  ``` 
issue
Improve scalability of centrality computation using sparse matrix#TITLE_END#To enable computation of eigenvector centrality scores for all nodes, in a graph with more than just a few thousand nodes, I have used sparse matrix representation here. Please take a look.  A note: - For the choice of 'k', refer to    http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.eigs.html  k=6 is the default 
