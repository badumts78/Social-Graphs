issue
nx.DiGraph.edge_subgraph creates graph with corrupt pred and succ#TITLE_END#The diff below shows the problem in the DiGraph.edge_subgraph function and a potential fix for it: when adding directed edge u,v from the list of edges, it only adds an entry to succ[u] and pred[v], neglecting to add pred[u] and succ[v].  Here's a minimal non-working example (master branch): ```python g = nx.DiGraph([(0,1),(0,2),(2,3)]) g2 = gg.edge_subgraph([(0,1),(0,2),(2,3)]) print nx.info(g2) ```  This results in:  ```python networkx/classes/digraph.pyc in <genexpr>((n, succs))     906      907         if nbunch is None: --> 908             nodes_nbrs=( (n,succs,self.pred[n]) for n,succs in self.succ.items())     909         else:     910             nodes_nbrs=( (n,self.succ[n],self.pred[n]) for n in self.nbunch_iter(nbunch))  KeyError: 0 ```  Here's a quick and dirty fix, though I should note that we probably don't need so many if statements and could add these pred/succ entries at the same time as adding the node entries:  ``` diff --git a/networkx/classes/digraph.py b/networkx/classes/digraph.py index 9e08653..6470a09 100644 --- a/networkx/classes/digraph.py +++ b/networkx/classes/digraph.py @@ -1334,6 +1334,10 @@ class DiGraph(Graph):                  H.succ[u] = H.adjlist_inner_dict_factory()              if v not in H.pred:                  H.pred[v] = H.adjlist_inner_dict_factory() +            if u not in H.pred: +                H.pred[u] = H.adjlist_inner_dict_factory() +            if v not in H.succ: +                H.succ[v] = H.adjlist_inner_dict_factory()              # Copy the edge attributes.              H.edge[u][v] = self.edge[u][v]              H.pred[v][u] = self.pred[v][u] ```
