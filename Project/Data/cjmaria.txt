issue
G.add_nodes_from() Unexpected Behavior#TITLE_END#### Current Behavior <!--- Tell us what happens instead of the expected behavior --> A array of consecutive integers is generated, and then a random sampling occurs to keep only a portion of the integers. The sampled numpy ndarray is then used to populate nodes in an empty graph using `G.add_nodes_from()`. The number of nodes in the resulting graph are not the same as that of the input array. ```python Python 3.9.4 | packaged by conda-forge | (default, May 10 2021, 22:10:52) [Clang 11.1.0 ] on darwin Type "help", "copyright", "credits" or "license" for more information. >>> import networkx as nx >>> import numpy as np >>> N = 100 >>> p = 0.3 >>> nodes = np.random.choice(range(N), size=round((1-p)*N)) >>> len(nodes) # Expecting ~70 70 >>> G = nx.Graph() >>> G.add_nodes_from(nodes) >>> G.number_of_nodes() # Expecting 70 51 ```  The behavior appears to persist when the numpy ndarray is converted to a python array of integers: ```python Python 3.9.4 | packaged by conda-forge | (default, May 10 2021, 22:10:52) [Clang 11.1.0 ] on darwin Type "help", "copyright", "credits" or "license" for more information. >>> import networkx as nx >>> import numpy as np >>> N = 100 >>> p = 0.3 >>> nodes_ndarr = np.random.choice(range(N), size=round((1-p)*N)) >>> type(nodes_ndarr) <class 'numpy.ndarray'> >>> type(nodes_ndarr[0]) <class 'numpy.int64'> >>> nodes_arr = list(map(lambda n: int(n), nodes_ndarr)) >>> type(nodes_arr) <class 'list'> >>> type(nodes_arr[0]) <class 'int'> >>> G = nx.Graph() >>> G.add_nodes_from(nodes_arr) >>> len(nodes_arr) 70 >>> G.number_of_nodes() # Expecting 70 50 ```  ### Expected Behavior The graph contains all nodes in the input array to `G.add_nodes_from()`, even though they are non-consecutive.  ### Environment <!--- Please provide details about your local environment --> Python version: Python 3.9.4 NetworkX version: 2.6.3 ``` $> pip show networkx Name: networkx Version: 2.6.3 Summary: Python package for creating and manipulating graphs and networks Home-page: https://networkx.org/ Author: Aric Hagberg Author-email: hagberg@lanl.gov License: UNKNOWN Location: /Users/cjmaria/miniforge3/envs/3.9/lib/python3.9/site-packages Requires: Required-by: mapclassify ```  ### Additional context <!--- Add any other context about the problem here, screenshots, etc. --> I am using a MacBook Pro with the M1 ARM CPU. Edit: I also tried on an x86_64 Linux system: ```python Python 3.8.12 (default, Oct 12 2021, 13:49:34) [GCC 7.5.0] :: Anaconda, Inc. on linux Type "help", "copyright", "credits" or "license" for more information. >>> import networkx as nx >>> import numpy as np >>> N = 100 >>> p = 0.3 >>> nodes = np.random.choice(range(N), size=round((1-p)*N)) >>> len(nodes) # Expecting 70 +-1 70 >>> G = nx.Graph() >>> G.add_nodes_from(nodes) >>> G.number_of_nodes() # Expecting 70 56 >>> nodes_arr = list(map(lambda n: int(n), nodes)) >>> len(nodes_arr) 70 >>> G2 = nx.Graph() >>> G2.add_nodes_from(nodes_arr) >>> G2.number_of_nodes() 56 ``` 
