issue
GEXF output does not round-trip#TITLE_END#On master (currently 269c5721100797514aa0469d58e637ec3a29e984) and Python 3.7.3, if I run the following script: ```python import io, math import networkx  g = networkx.Graph() g.add_node(1, weight=float('inf'), data='inf') g.add_node(2, weight=float('nan'), data='nan') with io.BytesIO() as f: 	networkx.write_gexf(g, f) 	f.seek(0) 	h = networkx.read_gexf(f, node_type=int) if h.nodes[1]['data'] != 'inf': 	print(f"h.nodes[1]['data'] == {h.nodes[1]['data']!r} != 'inf'") if h.nodes[2]['data'] != 'nan': 	print(f"h.nodes[2]['data'] == {h.nodes[2]['data']!r} != 'nan'") if not isinstance(h.nodes[1]['weight'], float) or not math.isinf(h.nodes[1]['weight']): 	print(f"h.nodes[1]['weight'] == {h.nodes[1]['weight']!r} != float('inf')") if not isinstance(h.nodes[2]['weight'], float) or not math.isnan(h.nodes[2]['weight']): 	print(f"h.nodes[2]['weight'] == {h.nodes[2]['weight']!r} != float('nan')") ``` I get the following output:  ``` h.nodes[1]['data'] == 'INF' != 'inf' h.nodes[2]['data'] == 'NaN' != 'nan' h.nodes[1]['weight'] == 'INF' != float('inf') h.nodes[2]['weight'] == 'NaN' != float('nan') ```  It appears that dc21ca4, which fixed #3573, caused `write_gexf` to write `float('inf')` to XML file as `INF` by transforming text without checking data types first, and that `read_gexf` does not cast `float` or `double` XML types to the `float` Python type.
issue
GEXF output does not conform to GEXF and XML Schema standards#TITLE_END#On master (currently 0d8d93a0e43829d6020e8babf59d411af6259a6c) and Python 3.7.3, if I run the following script:  ```python import io import networkx  g = networkx.Graph() g.add_node(1, weight=float('inf')) g.add_node(2, weight=float('nan')) with io.BytesIO() as f: 	networkx.write_gexf(g, f) 	print(f.getvalue().decode()) ``` I get the following output: ```xml <?xml version='1.0' encoding='utf-8'?> <gexf version="1.2" xmlns="http://www.gexf.net/1.2draft" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance">   <graph defaultedgetype="undirected" mode="static" name="">     <attributes class="node" mode="static">       <attribute id="0" title="weight" type="double" />     </attributes>     <meta>       <creator>NetworkX 2.4rc1.dev_20190906193120</creator>       <lastmodified>06/09/2019</lastmodified>     </meta>     <nodes>       <node id="1" label="1">         <attvalues>           <attvalue for="0" value="inf" />         </attvalues>       </node>       <node id="2" label="2">         <attvalues>           <attvalue for="0" value="nan" />         </attvalues>       </node>     </nodes>     <edges />   </graph> </gexf> ``` This contains three errors in conformance with the GEXF specification. Below is a diff showing what the output should have been. ```diff --- is.gexf	2019-09-06 14:34:24.000000000 -0500 +++ should_be.gexf	2019-09-06 14:50:28.000000000 -0500 @@ -1,22 +1,21 @@  <?xml version='1.0' encoding='utf-8'?> -<gexf version="1.2" xmlns="http://www.gexf.net/1.2draft" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance"> +<gexf version="1.2" xmlns="http://www.gexf.net/1.2draft" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"> +  <meta lastmodifieddate="2019-09-06"> +    <creator>NetworkX 2.4rc1.dev_20190906193120</creator> +  </meta>    <graph defaultedgetype="undirected" mode="static" name="">      <attributes class="node" mode="static">        <attribute id="0" title="weight" type="double" />      </attributes> -    <meta> -      <creator>NetworkX 2.4rc1.dev_20190906193120</creator> -      <lastmodified>06/09/2019</lastmodified> -    </meta>      <nodes>        <node id="1" label="1">          <attvalues> -          <attvalue for="0" value="inf" /> +          <attvalue for="0" value="INF" />          </attvalues>        </node>        <node id="2" label="2">          <attvalues> -          <attvalue for="0" value="nan" /> +          <attvalue for="0" value="NaN" />          </attvalues>        </node>      </nodes> ``` For the error in the schema location (see section 2.2 of the [GEXF primer](https://gephi.org/gexf/1.2draft/gexf-12draft-primer.pdf)), the line to blame is https://github.com/networkx/networkx/blob/0d8d93a0e43829d6020e8babf59d411af6259a6c/networkx/readwrite/gexf.py#L246  I'm not sure where floats are converted to text, but I'm guessing that the current code relies on Python to do it. However, the [XML Schema spec](https://www.w3.org/TR/xmlschema-2/#double-lexical-representation), which the GEXF spec relies on for data type definitions, says that not-a-numbers should be spelled as `NaN`,  infinity as `INF`, and negative infinity as `-INF`.  For what it's worth, fixing the schema location issue made Gephi 0.9.2 start displaying my graphs correctly.  The GEXF primer says the `meta` tag must be declared before the `graph` tag, and that `lastmodifieddate` is an attribute, not a tag, and should contain the date in ISO (yyyy-mm-dd) format.
issue
Add barycenter algorithm#TITLE_END#Adds a `barycenter` function which returns a subgraph induced by vertices minimizing the sum of distances to all other vertices.  I had written this for another project, so there will be some stylistic things you'll want to clean up. Also I've never used nosetest so instead of putting my tests in with the other tests for `distance_measures`, I just copied and pasted my Python `unittest`-based module.  Thanks for any feedback, though I'd especially love it if someone else could take care of converting to nosetest.
issue
Deprecation warnings in import, DiGraph.reverse#TITLE_END#```python (venv) $ python -Wa Python 3.7.0 (default, Jun 29 2018, 20:13:13)  [Clang 9.1.0 (clang-902.0.39.2)] on darwin Type "help", "copyright", "credits" or "license" for more information. >>> import networkx as nx .../venv/lib/python3.7/site-packages/networkx/classes/graph.py:23: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working   from collections import Mapping .../venv/lib/python3.7/site-packages/networkx/classes/reportviews.py:95: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working   from collections import Mapping, Set, Iterable .../venv/lib/python3.7/site-packages/networkx/classes/reportviews.py:95: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working   from collections import Mapping, Set, Iterable .../Python.framework/Versions/3.7/lib/python3.7/importlib/_bootstrap.py:219: ImportWarning: can't resolve package from __spec__ or __package__, falling back on __name__ and __path__   return f(*args, **kwds) .../Python.framework/Versions/3.7/lib/python3.7/importlib/_bootstrap.py:219: ImportWarning: can't resolve package from __spec__ or __package__, falling back on __name__ and __path__   return f(*args, **kwds) .../Python.framework/Versions/3.7/lib/python3.7/importlib/_bootstrap.py:219: ImportWarning: can't resolve package from __spec__ or __package__, falling back on __name__ and __path__   return f(*args, **kwds) >>> nx.__version__ '2.2' >>> g = nx.DiGraph() >>> nx.reverse(g) .../venv/lib/python3.7/site-packages/networkx/classes/digraph.py:1180: DeprecationWarning: G.fresh_copy is deprecated. Use G.__class__ instead   H = self.fresh_copy() <networkx.classes.digraph.DiGraph object at 0x112f52c88> ```  These deprecated lines of code are still in master as of the time I'm writing this:  https://github.com/networkx/networkx/blob/636afa0777b1c11922beb4b1cc91c2f217421066/networkx/classes/graph.py#L23  https://github.com/networkx/networkx/blob/636afa0777b1c11922beb4b1cc91c2f217421066/networkx/classes/reportviews.py#L95  https://github.com/networkx/networkx/blob/636afa0777b1c11922beb4b1cc91c2f217421066/networkx/classes/digraph.py#L1195
issue
Show max iterations in non-convergence error for Katz centrality#TITLE_END#The old error code ended up with a couple extra quote marks, so it never actually showed the intended error message. This patch fixes that problem, and tests that fix. 
comment
From tip of master as of right now: ``` $ git describe networkx-2.2-33-g61419bf1 $ git grep -n "from collections import.*Mapping" networkx/algorithms/approximation/kcomponents.py:8:from collections import defaultdict, Mapping networkx/algorithms/lowest_common_ancestors.py:13:from collections import defaultdict, Mapping, Set networkx/classes/coreviews.py:13:from collections import Mapping networkx/classes/graph.py:23:from collections import Mapping networkx/classes/reportviews.py:95:from collections import Mapping, Set, Iterable ```
