issue
NetworkX handles data inconsistently for pandas>=2#TITLE_END#There seems to be some inconsistency with how NetworkX handles data with pandas>=2.  The main issue here, as described below: > why would NetworkX inconsistently make the edge `u` a Python int but make the edge `v` a `np.int64`?  ### Current vs Expected Behavior  For example, if we run this snippet with Networkx v3.4 and (*old*) pandas v1.5.3:  ```python import networkx as nx import pandas as pd  # nodes come saved as a path in a pandas series nodes = pd.Series([333, 555])  # add the nodes and the edge G = nx.MultiDiGraph() G.add_nodes_from(nodes) G.add_edge(nodes[0], nodes[1])  print(G.nodes)  # [333, 555] print(G.edges)  # [(333, 555, 0)] ``` ...the resulting graph nodes are of type int, and the edge is a tuple of ints, as expected. All good.  However, if we run that snippet again, but this time with Networkx v3.4.2 and (*current*) pandas v2.2.3:  ```python import networkx as nx import pandas as pd  # nodes come saved as a path in a pandas series nodes = pd.Series([333, 555])  # add the nodes and the edge G = nx.MultiDiGraph() G.add_nodes_from(nodes) G.add_edge(nodes[0], nodes[1])  print(G.nodes)  # [333, 555] print(G.edges)  # [(333, np.int64(555), 0)] ``` ...the resulting graph nodes are still of type int, and the edge's `u` is an int, but the edge's `v` is type `np.int64`. Recent versions of pandas use these numpy types, but why would NetworkX inconsistently make the edge `u` a Python int but make the edge `v` a `np.int64`?  ### Environment  Platform: ubuntu 24.10 Python version: 3.11 NetworkX version: 3.4 and 3.4.2 (it appears I cannot install NetworkX>3.4 with pandas>=2)  ### Additional context  @LBasara brought this issue to my attention because it's affecting the OSMnx package downstream (crossref https://github.com/gboeing/osmnx/issues/1241). They also provided this screenshot:   ![image](https://github.com/user-attachments/assets/6c65af01-dac0-4f32-978c-f7ab934a4993)
issue
update the OSMnx example#TITLE_END#Hi. I'm the developer of OSMnx. I have updated your `plot_osmnx.py` example to address a couple deprecations and modernize the example. Thanks!
issue
add OSMnx usage example#TITLE_END#@jarrodmillman I've added a simple OSMnx usage example for your review.  Cross-reference #4366 #4298.
issue
write_graphml with a MultiDiGraph is incompatible with Gephi#TITLE_END#I'm not sure if this is an issue with NetworkX or with Gephi. If I save a MultiDiGraph as GraphML with NetworkX, I cannot open it in Gephi due to different handling of the edge `id` attribute between the two software packages.  ```python import networkx as nx G = nx.MultiDiGraph(((0, 1, 0), (0, 1, 1), (1, 2, 0), (2, 0, 0))) nx.write_graphml(G, './test.graphml') ```  Now if I open `test.graphml` in Gephi, it gives me multiple errors of: "Edge already exists id=0". It appears that NetworkX uses the edge `id` attribute to represent the Multi(Di)Graph `key` value, but Gephi expects it to be a unique identifier. Thus, only the first edge with `id` (ie, `key`) of 0 gets imported, and the rest are ignored as non-unique.  Versions: Python 3.8, NetworkX 2.5, Gephi 0.9.2
issue
weakly_connected_component_subgraphs deprecation and slow runtime#TITLE_END#OSMnx uses networkx's `weakly_connected_component_subgraphs` function to extract the largest connected component of a street network: https://github.com/gboeing/osmnx/blob/52b7cc473192461ba36d21440f7ea51ad03b5171/osmnx/utils.py#L251  On a large graph (e.g., 1.2 million nodes, 2.3 million edges), with nx 2.0 and osmnx 0.6 the following line runs in ~10 minutes:  ```python G = max(nx.weakly_connected_component_subgraphs(G), key=len) ``` But with nx 2.1 (and all else equal), that line is still running 24 hours later. Why has this run time increased so drastically (2+ orders of magnitude) with nx 2.1?  Separately, it appears weakly_connected_component_subgraphs is being [deprecated](https://github.com/networkx/networkx/blob/7e63811866e86e87e244790b5310098737c22ec4/networkx/algorithms/components/weakly_connected.py#L116). Even if I [replace that function](https://github.com/gboeing/osmnx/commit/ef95dcb4f1b85fc439f776c39e3e5509e13b5c4b) with the snippet suggested in the deprecation message, the code still hasn't finished running 24 hours later.
issue
get all edges between two nodes in nx 2#TITLE_END#I have a MultiDiGraph. I want to retrieve all the edges (possibly multiple/parallel edges) between two nodes. In networkx 1.x I could do:  ```python import networkx as nx G = nx.MultiDiGraph() G.add_edges_from([(0,1),(1,2),(1,2)]) G.edge[1][2] ```  Returns: `{0: {}, 1: {}}`  In networkx 2.x I update my syntax to:  ```python import networkx as nx G = nx.MultiDiGraph() G.add_edges_from([(0,1),(1,2),(1,2)]) G.edges[1,2] ```  Returns: `ValueError: not enough values to unpack (expected 3, got 2)`  nx 2 seems to require that I provide a key -- how do I retrieve *all* the edges between u and v? I'm using networkx 2.0b1.
comment
FYI @jarrodmillman (and others), following up on our email convo, I've been wrapping up semester teaching and grading, and should finally have some time this week to open a draft PR with an OSMnx example.
comment
@FBenita as a follow-up, I'm also pushing some commits today to update the OSMnx stats module to convert MultiDiGraphs to DiGraphs before running betweenness_centrality.
