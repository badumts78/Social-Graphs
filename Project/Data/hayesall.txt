issue
Anaconda version of pygraphviz is broken#TITLE_END#**Update for conda users: Please make sure pygraphviz from the conda forge channel: `conda -c conda-forge`**  ---  ### Current Behavior  <!--- Tell us what happens instead of the expected behavior -->  [`networkx.drawing.nx_agraph.from_agraph`](https://networkx.org/documentation/stable//reference/generated/networkx.drawing.nx_agraph.from_agraph.html) seems to fail with older versions of `pygraphviz`  The example from the documentation:  ```python import networkx as nx K5 = nx.complete_graph(5) A = nx.nx_agraph.to_agraph(K5) G = nx.nx_agraph.from_agraph(A) ```  ... currently raises a `StopIteration` `RuntimeError` in `pygraphviz==1.3`, but succeeds with `pygraphviz==1.6`  <details> <summary>Full Traceback raised with pygraphviz 1.3 installed</summary>  ```console Traceback (most recent call last):   File "/home/hayesall/miniconda3/envs/spf/lib/python3.7/site-packages/pygraphviz/agraph.py", line 1750, in iteritems     ah = gv.agnxtattr(self.handle, self.type, ah) StopIteration: agnxtattr  The above exception was the direct cause of the following exception:  Traceback (most recent call last):   File "reporod.py", line 4, in <module>     G = nx.nx_agraph.from_agraph(A)   File "/home/hayesall/miniconda3/envs/spf/lib/python3.7/site-packages/networkx/drawing/nx_agraph.py", line 82, in from_agraph     N.graph.update(A.graph_attr)   File "/home/hayesall/miniconda3/envs/spf/lib/python3.7/site-packages/pygraphviz/agraph.py", line 1740, in keys     return list(self.__iter__())   File "/home/hayesall/miniconda3/envs/spf/lib/python3.7/site-packages/pygraphviz/agraph.py", line 1743, in __iter__     for (k, v) in self.iteritems(): RuntimeError: generator raised StopIteration ```  </details>  ### Environment  Python version: `3.7.7` NetworkX version: `2.5`  pygraphviz: `1.3` -- Fails pygraphviz: `1.6` -- Succeeds   ### Additional context  - I couldn't find a minimum version for `pygraphviz` documented here, but an error message might help this. - I think `pygraphviz==1.3` is default with Anaconda (`conda install pygraphviz`).
issue
Side effect when casting selfloop_edges to a list?#TITLE_END#**Overview**: `nx.selfloop_edges` returns a generator expression. Casting this expression to a list appears to invoke a side effect that changes future computation.  **Version Info**: `networkx==2.5`  ### Case 1: No casting  ```python import networkx as nx  gg = nx.MultiDiGraph() gg.add_node("a") gg.add_node("b") gg.add_node("c") gg.add_node("d") gg.add_node("e") gg.add_edge("a","b", weight=3) gg.add_edge("a","d", weight=1) gg.add_edge("c","a", weight=6) gg.add_edge("d","e", weight=2) gg.add_edge("d","c", weight=4) gg.add_edge("e","e", weight=1) gg.add_edge("a","b", weight=1)  loops = nx.selfloop_edges(gg)  # print(list(loops))  gg.remove_edges_from(loops) print(gg.edges) ```  The output works as expected:  ```console [('a', 'b', 0), ('a', 'b', 1), ('a', 'd', 0), ('c', 'a', 0), ('d', 'e', 0), ('d', 'c', 0)] ```  ### Case 2: Cast `selfloop_edges` to a list for printing  ```python import networkx as nx  gg = nx.MultiDiGraph() gg.add_node("a") gg.add_node("b") gg.add_node("c") gg.add_node("d") gg.add_node("e") gg.add_edge("a","b", weight=3) gg.add_edge("a","d", weight=1) gg.add_edge("c","a", weight=6) gg.add_edge("d","e", weight=2) gg.add_edge("d","c", weight=4) gg.add_edge("e","e", weight=1) gg.add_edge("a","b", weight=1)  loops = nx.selfloop_edges(gg)  # Cast the generator to a list for printing: print(list(loops))  gg.remove_edges_from(loops) print(gg.edges) ```  Output. Notice the selfloop is printed, but it is not actually removed from the MultiDiGraph.  ```console [('e', 'e')] [('a', 'b', 0), ('a', 'b', 1), ('a', 'd', 0), ('c', 'a', 0), ('d', 'e', 0), ('d', 'c', 0), ('e', 'e', 0)] ```
