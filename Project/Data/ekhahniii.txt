issue
`relabel_nodes` does not work for callables with `__getitem__`#TITLE_END#<!-- If you have a general question about NetworkX, please use the discussions tab to create a new discussion -->  <!--- Provide a general summary of the issue in the Title above -->  `relabel_nodes` accepts mappings in the form of functions. It differentiates function from mapping by testing`not hasattr(mapping, "__getitem__")`. This test is ambiguous for callables that do possess '__getitem__`, e.g. `str`.  Would it be better to test `isinstance(mapping, typing.Mapping)` and document accordingly?  ### Current Behavior <!--- Tell us what happens instead of the expected behavior --> ```python import networkx as nx  G = nx.DiGraph() G.add_nodes_from([1, 2])  # works # nx.relabel_nodes(G, lambda x: str(x))  # error nx.relabel_nodes(G, str) ```  ``` Traceback (most recent call last):   File "...\networkx_2_8_4_relabel_callable.py", line 10, in <module>     nx.relabel_nodes(G, str)   File "...\lib\site-packages\networkx\relabel.py", line 121, in relabel_nodes     return _relabel_copy(G, m)   File "...\lib\site-packages\networkx\relabel.py", line 193, in _relabel_copy     H.add_nodes_from(mapping.get(n, n) for n in G)   File "...\lib\site-packages\networkx\classes\digraph.py", line 519, in add_nodes_from     for n in nodes_for_adding:   File "...\lib\site-packages\networkx\relabel.py", line 193, in <genexpr>     H.add_nodes_from(mapping.get(n, n) for n in G) AttributeError: type object 'str' has no attribute 'get' ```  ### Expected Behavior <!--- Tell us what should happen --> `relabel_nodes` works for callables.  ### Steps to Reproduce <!--- Provide a minimal example that reproduces the bug --> See current behavior.  ### Environment <!--- Please provide details about your local environment --> Python version: 3.9 NetworkX version: 2.8.5   ### Additional context <!--- Add any other context about the problem here, screenshots, etc. --> 
issue
Incompatibility between `pydot_layout` + `draw_networkx_{nodes, edges, labels}` for graphs with non-string nodes#TITLE_END#<!-- If you have a general question about NetworkX, please use the discussions tab to create a new discussion -->  <!--- Provide a general summary of the issue in the Title above -->  Previously, `pydot_layout` handled graphs with non-string nodes. At least as of 2.8.4, the returned `dict` of positions is keyed by the string representation of the nodes, rather than the node objects themselves. This introduces an incompatibility with e.g. `draw_networkx_{nodes, edges, labels}`.  Perhaps related to #5710.   ### Current Behavior <!--- Tell us what happens instead of the expected behavior -->  ```python import networkx as nx from matplotlib import pyplot as plt   G = nx.DiGraph() G.add_nodes_from([1, 2]) G.add_edges_from([(1, 2)]) pos = nx.nx_pydot.pydot_layout(G) f, ax = plt.subplots() nx.draw_networkx_nodes(G, ax=ax, pos=pos) nx.draw_networkx_edges(G, ax=ax, pos=pos) nx.draw_networkx_labels(G, ax=ax, pos=pos) plt.tight_layout() plt.show() ``` ``` Traceback (most recent call last):   File "...\lib\site-packages\networkx\drawing\nx_pylab.py", line 425, in draw_networkx_nodes     xy = np.asarray([pos[v] for v in nodelist])   File "...\lib\site-packages\networkx\drawing\nx_pylab.py", line 425, in <listcomp>     xy = np.asarray([pos[v] for v in nodelist]) KeyError: 1  The above exception was the direct cause of the following exception:  Traceback (most recent call last):   File "...\bugs\networkx_2_8_4_pydot.py", line 30, in <module>     nx.draw_networkx_nodes(G, ax=ax, pos=pos)   File "...\lib\site-packages\networkx\drawing\nx_pylab.py", line 427, in draw_networkx_nodes     raise nx.NetworkXError(f"Node {err} has no position.") from err networkx.exception.NetworkXError: Node 1 has no position. ```  ### Expected Behavior <!--- Tell us what should happen -->  `draw_networkx_{nodes, edges, labels}` can accept both the graph provided to `pydot_layout` and the `dict` of positions produced by `pydot_layout`.  A workaround is to recreate the graph with the string representation of the nodes; however, the user must then replicate whatever modification was made to the string keys in `pydot_layout` or wantonly assume no modifications were made.  ### Steps to Reproduce <!--- Provide a minimal example that reproduces the bug --> See current behavior.  ### Environment <!--- Please provide details about your local environment --> Python version: 3.9 NetworkX version: 2.8.4   ### Additional context <!--- Add any other context about the problem here, screenshots, etc. --> 
