issue
Miscalculation of a node's degree when it is connected to itself (affects `modularity` and `louvain_communities`)#TITLE_END#I came across this issue upon implementing the Louvain algorithm in PySpark. In essence, I think the [modularity function](https://github.com/networkx/networkx/blob/main/networkx/algorithms/community/quality.py) does not work properly when a node is connected to itself (i.e., a self-loop exists).  **I think this traces back to how a node's degree is calculated.**  To see this, suppose we have the following undirected graph:  ```python # Import nx import networkx as nx  # Network where node 1 is connected to itself G = nx.Graph(incoming_graph_data=[     (1, 1), (1, 2), (1, 3),     (1, 4), (2, 4), (3, 5) ])  # Declare an awesome partition P = [{1, 2, 4}, {3, 5}]  # Calculate modularity of said partition modularity =nx.algorithms.community.quality.modularity(G, P, weight='weight', resolution=1) ```  This yields 0.2083333333333333. However, upon deriving the modularity by hand according to the formula cited in `networkx/algorithms/community/quality.py` (Reference [1]_), I believe the modularity should equal 0.24305555555 (see attached screenshot).  Notice how my solution matches yours when we count the self loop twice (i.e., node 1 has degree 5 and $A_{11}$ is summed twice).  I am unsure about the degree being equal to 4 (it very well could be 5). However, why is $A_{11}$ being counted twice? Mathematically, the sum over $i$ and $j$ would not allow this.  ![screenshot](https://github.com/networkx/networkx/assets/47676848/b56d9dc6-d25d-48c7-9389-b3616e92d44b)
issue
Fix definition of $m$ parameter in docstring of `modularity` function#TITLE_END#Hello!  The docstring for the `modularity` function (`networkx/algorithms/community/quality.py`) states that:  >  $m$ is the number of edges  This is incorrect, as the function itself defines `m` as:  ```python out_degree = in_degree = dict(G.degree(weight=weight)) deg_sum = sum(out_degree.values()) # Sum of all weights in G! m = deg_sum / 2 # Divide by two to account for mirrors ```  in the undirected case (same goes for the directed case, except because it uses `G.in_degrees`/`G.out_degrees`).  I therefore corrected the docstring and cited [this paper](https://arxiv.org/abs/cond-mat/0408187) exactly as it appears in `networkx/algorithms/community/louvain.py`.
