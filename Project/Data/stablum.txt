issue
(Digraph) object has no attribute '_adj' (with more info)#TITLE_END#I'm duplicating the ticket https://github.com/networkx/networkx/issues/2741 because I cannot re-open it myself.  While trying `copy.deepcopy` of a graph, I am encountering the following exception: ``` File "/home/francesco/.local/lib/python3.6/site-packages/networkx/classes/reportviews.py", line 894, in __setstate__     self._adjdict = G._succ if hasattr(G, "succ") else G._adj AttributeError: 'TrackGraph' object has no attribute '_adj' ```  where TrackGraph is a subclass of DiGraph: ``` class TrackGraph(nx.DiGraph):     ... ```  Version is the following:  ``` >>> nx.__version__ '2.0' ```  I cannot provide the full code because it's a big project, and I could not isolate the bug in a simpler case. My hypothesis is that the order in which the unplicking of the attributes happens is relevant. Apparently one of these attributes is an `OutEdgeView`. I cannot see which attribute because python's pickle is notoriously uninformative during debugging.  Anyways, I think that that attribute is being set (and hence `__setstate__` triggered) before _adj or other attributes are set. In that case the `OutEdgeView.__setstate__` is faced with an almost empty object, without _adj.  Here is a demonstration: ``` import pickle  class Bar(object):     def __init__(self,foo,value):         self.value = value         self.foo = foo          def __setstate__(self,state):         self.value = state['value']         print("__setstate__ value:",self.value)         self.foo = state['foo']         if 'a' in dir(self.foo):             print(self.foo.a)         else:             print("self.foo does not have 'a'")         if 'b' in dir(self.foo):             print(self.foo.b)         else:             print("self.foo does not have 'b'")      def __str__(self):         return "Bar, value={}".format(self.value)  class Foo(object):     def __init__(self):         self.a = Bar(self,42)         self.b = Bar(self,23)  def main():     foo1 = Foo()     with open('/tmp/foo','wb') as f:         pickle.dump(foo1,f)     print("just pickled. Now let's unpickle")     with open('/tmp/foo','rb') as f:         foo2 = pickle.load(f)     print("just unpickled.",foo2)     print("foo2.a",foo2.a)     print("foo2.b",foo2.b)     print("foo2.a.foo",foo2.a.foo)     print("foo2.b.foo",foo2.b.foo)  if __name__=="__main__":     main() ``` Which produces the following output:  ``` just pickled. Now let's unpickle __setstate__ value: 42 self.foo <__main__.Foo object at 0x7f41b2af2240> does not have 'a' self.foo <__main__.Foo object at 0x7f41b2af2240> does not have 'b' __setstate__ value: 23 self.foo <__main__.Foo object at 0x7f41b2af2240> does not have 'a' self.foo <__main__.Foo object at 0x7f41b2af2240> does not have 'b' just unpickled. <__main__.Foo object at 0x7f41b2af2240> foo2.a Bar, value=42 foo2.b Bar, value=23 foo2.a.foo <__main__.Foo object at 0x7f41b2af2240> foo2.b.foo <__main__.Foo object at 0x7f41b2af2240> ```  This demonstrates that `foo2.a.foo` is of course not fully restored when `foo2.a.__setstate__` is triggered. But even worse, after `a` has been restored, it is not set yet to `foo2`, as can be demonstrated by `foo2.b.__setstate__` that cannot access `a`. This seems to be the problem in `OutEdgeView`.  Opinions?
issue
Attempt to tackle the unpickling problem. Ticket #2793 (3rd, fixed pull request)#TITLE_END#attempt to tackle the unpickling problem in which the graph is being used before being completely unpickled. Instance variables have been replaced with @property getters. Ticket #2793
issue
Attempt to tackle the unpickling problem. Ticket #2793  (2nd, fixed pull request)#TITLE_END#Tackling the unpickling problem in which the graph is being used before being completely unpickled. Instance variables have been replaced with @property getters. Ticket #2793
issue
Attempt to tackle the unpickling problem. Ticket #2793#TITLE_END#attempt to tackle the unpickling problem in which the graph is being used before being completely unpickled. Instance variables have been replaced with @property getters. Ticket #2793
issue
(Digraph) object has no attribute '_adj'#TITLE_END#While trying `copy.deepcopy` of a graph, I am encountering the following exception: ``` File "/home/francesco/.local/lib/python3.6/site-packages/networkx/classes/reportviews.py", line 894, in __setstate__     self._adjdict = G._succ if hasattr(G, "succ") else G._adj AttributeError: 'TrackGraph' object has no attribute '_adj' ```  where TrackGraph is a subclass of DiGraph: ``` class TrackGraph(nx.DiGraph):     ... ```  Version is the following:  ``` >>> nx.__version__ '2.0' ``` Any idea on how to fix it? 
