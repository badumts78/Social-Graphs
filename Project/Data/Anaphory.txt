issue
greedy_modularity_communities raises StopIteration for unconnected (?) graph#TITLE_END#<!--- Provide a general summary of the issue in the Title above -->  After an update of `networkx` from 2.6.3 to 2.8, one of my tests suddenly failed with ``` Traceback (most recent call last):   File "/usr/lib/python3.10/runpy.py", line 196, in _run_module_as_main     return _run_code(code, main_globals, None,   File "/usr/lib/python3.10/runpy.py", line 86, in _run_code     exec(code, run_globals)   File "/home/gereon/Develop/lexedata/src/lexedata/report/nonconcatenative_morphemes.py", line 159, in <module>     networkx.algorithms.community.greedy_modularity_communities(graph),   File "/home/gereon/.local/etc/lexedata/lib/python3.10/site-packages/networkx/algorithms/community/modularity_max.py", line 354, in greedy_modularity_communities     dq = next(community_gen) StopIteration  ``` It turns out that the internals of `greedy_modularity_communities` have changed, so the function doesn't work any more with unconnected graphs.  ### Current Behavior <!--- Tell us what happens instead of the expected behavior -->  `networkx.algorithms.community.greedy_modularity_communities` fails with undocumented error message for unconnected graphs, or graphs without edges  ### Expected Behavior <!--- Tell us what should happen -->   - Either document the requirement to have a connected graph with at least one edge and throw `ValueError` instead of `StopIteration` when it is not fulfilled, or run the graph through `nx.connected_components()` first.  - If the graph has only one node and no edges, return that node.  ### Steps to Reproduce <!--- Provide a minimal example that reproduces the bug -->  ``` >>> G = nx.Graph() >>> G.add_edges_from([(0,1),(2,3)]) >>> greedy_modularity_communities(G) Traceback (most recent call last):   File "<stdin>", line 1, in <module>   File "/home/gereon/.local/etc/lexedata/lib/python3.10/site-packages/networkx/algorithms/community/modularity_max.py", line 354, in greedy_modularity_communities     dq = next(community_gen) StopIteration ```  ``` >>> G = nx.Graph() >>> G.add_nodes_from([1]) >>> greedy_modularity_communities(G) Traceback (most recent call last):   File "<stdin>", line 1, in <module>   File "/home/gereon/.local/etc/lexedata/lib/python3.10/site-packages/networkx/algorithms/community/modularity_max.py", line 350, in greedy_modularity_communities     communities = next(community_gen)   File "/home/gereon/.local/etc/lexedata/lib/python3.10/site-packages/networkx/algorithms/community/modularity_max.py", line 79, in _greedy_modularity_communities_generator     q0 = 1 / m ZeroDivisionError: division by zero  ``` ### Environment <!--- Please provide details about your local environment --> Python version: 3.10.2 NetworkX version: 2.8
