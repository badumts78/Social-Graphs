issue
3.3: pytest fails in multiple units using `numpy` and `scipy`#TITLE_END#I'm packaging your module as an rpm package so I'm using the typical PEP517 based build, install and test cycle used on building packages from non-root account. - `python3 -sBm build -w --no-isolation` - because I'm calling `build` with `--no-isolation` I'm using during all processes only locally installed modules - install .whl file in </install/prefix> using `installer` module - run pytest with $PYTHONPATH pointing to sitearch and sitelib inside </install/prefix> - build is performed in env which is *`cut off from access to the public network`* (pytest is executed with `-m "not network"`)  <details> <summary>List of installed modules in build env:</summary>  ```console Package            Version ------------------ ----------- build              1.2.1 contourpy          1.2.1 cycler             0.12.1 exceptiongroup     1.1.3 fonttools          4.51.0 importlib_metadata 7.1.0 iniconfig          2.0.0 installer          0.7.0 kiwisolver         1.4.5 lxml               5.2.2 matplotlib         3.8.4 numpy              1.26.4 olefile            0.47 packaging          24.0 pandas             2.2.1 pillow             10.3.0 pluggy             1.4.0 pyparsing          3.1.2 pyproject_hooks    1.0.0 pytest             8.1.1 python-dateutil    2.9.0.post0 pytz               2024.1 scipy              1.12.0 setuptools         69.4.0 tokenize_rt        5.2.0 tomli              2.0.1 wheel              0.43.0 zipp               3.18.2 ``` </details>  Please let me know if you need more details or want me to perform some diagnostics. 
issue
3.2.1: pytest fails in networkx/drawing/tests/test_pylab.py with `module 'matplotlib' has no attribute 'use'`#TITLE_END#matplotlib 3.8.3 and pytest fails on scanning units with ```console + PYTHONPATH=/home/tkloczko/rpmbuild/BUILDROOT/python-networkx-3.2.1-5.fc36.x86_64/usr/lib64/python3.9/site-packages:/home/tkloczko/rpmbuild/BUILDROOT/python-networkx-3.2.1-5.fc36.x86_64/usr/lib/python3.9/site-packages + /usr/bin/pytest -ra -m 'not network' ============================= test session starts ============================== platform linux -- Python 3.9.18, pytest-8.1.1, pluggy-1.4.0 rootdir: /home/tkloczko/rpmbuild/BUILD/networkx-networkx-3.2.1 configfile: pyproject.toml collected 4831 items / 1 error / 30 skipped  ==================================== ERRORS ==================================== ____________ ERROR collecting networkx/drawing/tests/test_pylab.py _____________ networkx/drawing/tests/test_pylab.py:10: in <module>     mpl.use("PS") E   AttributeError: module 'matplotlib' has no attribute 'use' =============================== warnings summary =============================== networkx/utils/backends.py:135   /home/tkloczko/rpmbuild/BUILD/networkx-networkx-3.2.1/networkx/utils/backends.py:135: RuntimeWarning: networkx backend defined more than once: nx-loopback     backends.update(_get_backends("networkx.backends"))  networkx/utils/backends.py:576   /home/tkloczko/rpmbuild/BUILD/networkx-networkx-3.2.1/networkx/utils/backends.py:576: DeprecationWarning:    random_tree is deprecated and will be removed in NX v3.4   Use random_labeled_tree instead.     return self.orig_func(*args, **kwargs)  -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html ```
issue
3.2: pytest is failing in use `importlib.resources` module (6.1.0)#TITLE_END#I'm packaging your module as an rpm package so I'm using the typical PEP517 based build, install and test cycle used on building packages from non-root account. - `python3 -sBm build -w --no-isolation` - because I'm calling `build` with `--no-isolation` I'm using during all processes only locally installed modules - install .whl file in </install/prefix> using 'installer` module - run pytest with $PYTHONPATH pointing to sitearch and sitelib inside </install/prefix> - build is performed in env which is *`cut off from access to the public network`* (pytest is executed with `-m "not network"`)  Here is pytest output: <details>  ```console + PYTHONPATH=/home/tkloczko/rpmbuild/BUILDROOT/python-networkx-3.2-2.fc35.x86_64/usr/lib64/python3.8/site-packages:/home/tkloczko/rpmbuild/BUILDROOT/python-networkx-3.2-2.fc35.x86_64/usr/lib/python3.8/site-packages + /usr/bin/pytest -ra -m 'not network' ==================================================================================== test session starts ==================================================================================== platform linux -- Python 3.8.18, pytest-7.4.2, pluggy-1.3.0 rootdir: /home/tkloczko/rpmbuild/BUILD/networkx-networkx-3.2 collected 0 items / 1 error  ========================================================================================== ERRORS =========================================================================================== _______________________________________________________________________________ ERROR collecting test session _______________________________________________________________________________ /usr/lib/python3.8/site-packages/_pytest/config/__init__.py:641: in _importconftest     mod = import_path(conftestpath, mode=importmode, root=rootpath) /usr/lib/python3.8/site-packages/_pytest/pathlib.py:567: in import_path     importlib.import_module(module_name) /usr/lib64/python3.8/importlib/__init__.py:127: in import_module     return _bootstrap._gcd_import(name[level:], package, level) <frozen importlib._bootstrap>:1014: in _gcd_import     ??? <frozen importlib._bootstrap>:991: in _find_and_load     ??? <frozen importlib._bootstrap>:961: in _find_and_load_unlocked     ??? <frozen importlib._bootstrap>:219: in _call_with_frames_removed     ??? <frozen importlib._bootstrap>:1014: in _gcd_import     ??? <frozen importlib._bootstrap>:991: in _find_and_load     ??? <frozen importlib._bootstrap>:975: in _find_and_load_unlocked     ??? <frozen importlib._bootstrap>:671: in _load_unlocked     ??? <frozen importlib._bootstrap_external>:843: in exec_module     ??? <frozen importlib._bootstrap>:219: in _call_with_frames_removed     ??? networkx/__init__.py:35: in <module>     from networkx import generators networkx/generators/__init__.py:5: in <module>     from networkx.generators.atlas import * networkx/generators/atlas.py:54: in <module>     ATLAS_FILE = importlib.resources.files("networkx.generators") / "atlas.dat.gz" E   AttributeError: module 'importlib.resources' has no attribute 'files' ===================================================================================== warnings summary ====================================================================================== networkx/utils/backends.py:135   /home/tkloczko/rpmbuild/BUILD/networkx-networkx-3.2/networkx/utils/backends.py:135: RuntimeWarning: networkx backend defined more than once: nx-loopback     backends.update(_get_backends("networkx.backends"))  -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html ================================================================================== short test summary info ================================================================================== ERROR  - AttributeError: module 'importlib.resources' has no attribute 'files' !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ================================================================================ 1 warning, 1 error in 0.35s ================================================================================ ``` </details>  Here is list of installed modules in build env <details>  ```console Package                       Version ----------------------------- -------- alabaster                     0.7.13 asttokens                     2.2.1 attrs                         23.1.0 Babel                         2.13.0 backcall                      0.2.0 beautifulsoup4                4.12.2 bleach                        6.1.0 build                         1.0.0 charset-normalizer            3.3.0 comm                          0.1.4 contourpy                     1.0.7 cppclean                      0.13 cycler                        0.12.1 debugpy                       1.8.0 decorator                     5.1.1 defusedxml                    0.7.1 distro                        1.8.0 docutils                      0.20.1 exceptiongroup                1.1.3 executing                     1.2.0 fastjsonschema                2.18.0 fonttools                     4.43.1 gpg                           1.21.0 html5lib                      1.1 idna                          3.4 imagesize                     1.4.1 importlib-metadata            6.8.0 importlib-resources           6.1.0 iniconfig                     2.0.0 installer                     0.7.0 ipykernel                     6.25.2 ipython                       8.12.0 jedi                          0.19.0 Jinja2                        3.1.2 jsonschema                    4.19.1 jsonschema-specifications     2023.7.1 jupyter_client                8.4.0 jupyter_core                  5.3.1 jupyterlab-pygments           0.1.2 kiwisolver                    1.4.5 MarkupSafe                    2.1.3 matplotlib                    3.6.3 matplotlib-inline             0.1.6 mistune                       2.0.5 nb2plots                      0.7.2 nbclient                      0.8.0 nbconvert                     7.8.0 nbformat                      5.9.2 nest-asyncio                  1.5.8 numpy                         1.24.4 numpydoc                      1.6.0 olefile                       0.46 packaging                     23.2 pandocfilters                 1.5.0 parso                         0.8.3 pexpect                       4.8.0 pickleshare                   0.7.5 Pillow                        10.1.0 pkg                           0.0.0 pkgutil_resolve_name          1.3.10 platformdirs                  3.11.0 pluggy                        1.3.0 prompt-toolkit                3.0.39 psutil                        5.9.5 ptyprocess                    0.7.0 pure-eval                     0.2.2 Pygments                      2.16.1 pyparsing                     3.1.1 pyproject_hooks               1.0.0 pytest                        7.4.2 python-dateutil               2.8.2 pytz                          2023.3 pyzmq                         25.1.0 referencing                   0.30.2 requests                      2.31.0 rpds-py                       0.10.6 SciPy                         1.8.1 setuptools                    68.2.2 six                           1.16.0 snowballstemmer               2.2.0 soupsieve                     2.5 Sphinx                        7.1.2 sphinx-gallery                0.14.0 sphinxcontrib-applehelp       1.0.4 sphinxcontrib-devhelp         1.0.2 sphinxcontrib-htmlhelp        2.0.3 sphinxcontrib-jsmath          1.0.1 sphinxcontrib-qthelp          1.0.3 sphinxcontrib-serializinghtml 1.1.9 sphinxtesters                 0.2.3 stack-data                    0.6.3 tabulate                      0.9.0 texext                        0.6.7 tinycss2                      1.2.1 tomli                         2.0.1 tornado                       6.3.3 traitlets                     5.11.2 typing_extensions             4.8.0 urllib3                       1.26.17 wcwidth                       0.2.8 webencodings                  0.5.1 wheel                         0.41.2 zipp                          3.17.0 ``` </details> 
