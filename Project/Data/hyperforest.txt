issue
Irreproducible result from Louvain graph partitioning#TITLE_END#I have a weighted undirected graph. I partitioned the graph multiple times with Louvain algorithm, with SAME seed / random state across all runs, but it gives inconsistent result.  Is this expected? Is there any possible way to make it reproducible?  ### Current Behavior  Attached script,  consuming `graph1.csv`, result in different partitioning (node set) when it's being run multiple times.  Output of the script: ``` Broken in iter: 5  Init. group: [[23], [7], [1, 3, 12, 20, 33, 34, 35], [4, 5, 6, 16, 18, 19, 21, 22, 28, 29], [0, 2, 8, 9, 10, 11, 13, 14, 15, 17, 24, 25, 26, 27, 30, 31, 32, 36, 37]]  Group: [[23], [7], [1, 3, 12, 17, 20, 31, 33, 34, 35], [4, 5, 6, 16, 18, 19, 21, 22, 28, 29], [0, 2, 8, 9, 10, 11, 13, 14, 15, 24, 25, 26, 27, 30, 32, 36, 37]] ``` ### Expected Behavior  I do not know if it's expected or not, but if not, the partitioning must be consistent and reproducible whenever someone run it multiple times (as long as the seed / random state is same).  ### Steps to Reproduce  Run the script below.  ### Environment  Python version: `3.8.0` NetworkX version: `2.8.8` Conda: `4.10.1` Numpy: `1.21.3` Pandas: `2.0.3`  ### Additional Context  The sample graph here has nodes of integer, while my actual graph nodes is string.  ### Files  Graph (in .csv): [graph1.csv](https://github.com/user-attachments/files/20577924/graph1.csv)  Script: ``` import numpy as np import pandas as pd import networkx as nx import random   # random.seed(42) # np.random.seed(42)   def load_graphs():     df_graph = pd.read_csv('./graph1.csv')      graph1 = nx.from_pandas_edgelist(         df_graph,         source='src',         target='dst',         edge_attr='weight',         create_using=nx.Graph()     )      return graph1   def partition_graph(graph: nx.Graph, seed=None) -> list:     group = nx.community.louvain_communities(graph, weight='weight', seed=seed)     group = sorted(group, key=len)     group = [sorted(g) for g in group]     return group   if __name__ == '__main__':     graph = load_graphs()      random_state = np.random.RandomState(42)     init_group = partition_graph(graph, seed=random_state)      for it in range(100):         group = partition_graph(graph, seed=random_state)          if group != init_group:             print(f'Broken in iter: {it}')                          print('\nInit. group:')             print(init_group)                          print('\nGroup:')             print(group)             break ```
