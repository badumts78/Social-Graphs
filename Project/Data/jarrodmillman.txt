issue
put all readwrite functions into readwrite directory (dot and bipartitie.edgelist)#TITLE_END#We should probably have our read/write functionality all in one place: - review ``write_dot`` and ``read_dot`` in ``drawing/nx_agraph.py`` and ``drawing/nx_pydot.py`` - review ``algorithms/bipartite/edgelist.py`` and ``readwrite/edgelist.py``
issue
Use scipy's csgraph#TITLE_END#We optionally depend on scipy, but we don't use their compressed sparse graph routines (``scipy.sparse.csgraph``):  - https://docs.scipy.org/doc/scipy/reference/sparse.csgraph.html  Our numpy and scipy code is out of date and we are in the process of cleaning it up (e.g., #4089 and #4048).  As part of that clean up, I would like to see (better) integration with ``csgraph``.  We've had previous discussion about it that may be useful to look over (e.g., #1080 and #1076).  For instance, as a result of that discussion APGL changed to a BSD license for us:  https://github.com/charanpald/APGL Development of APGL stopped in 2018, though there was a little activity last week.  There is also some old code that Aric wrote that may provide some useful ideas:  https://github.com/hagberg/networkx/commit/b6e18655f51104c06251558890e88a9dee189d4d  Someone will need to investigate the situation and suggest how we should move forward.
issue
Parallelization plan#TITLE_END#We should develop some helper functions for parallelization and then use it in several places.  There are several comments in the code indicating where we could parallelize things: ``` $ grep -r paralleliz networkx/algorithms/shortest_paths/weighted.py:    # TODO This can be trivially parallelized. networkx/algorithms/shortest_paths/weighted.py:    # TODO This can be trivially parallelized. networkx/algorithms/shortest_paths/unweighted.py:    # TODO This can be trivially parallelized. networkx/algorithms/shortest_paths/unweighted.py:    # TODO This can be trivially parallelized. networkx/algorithms/vitality.py:    # TODO This can be trivially parallelized. networkx/algorithms/bipartite/redundancy.py:    # TODO This can be trivially parallelized. networkx/algorithms/efficiency_measures.py:    # TODO This summation can be trivially parallelized. networkx/algorithms/tournament.py:        # TODO This is trivially parallelizable. networkx/algorithms/tournament.py:        # TODO This is trivially parallelizable. networkx/algorithms/tournament.py:    # TODO This is trivially parallelizable. networkx/algorithms/tournament.py:    # TODO This is trivially parallelizable. networkx/algorithms/tree/mst.py:        # TODO This can be parallelized, both in the outer loop over networkx/algorithms/tree/mst.py:        # TODO This loop can be parallelized, to an extent (the union networkx/algorithms/centrality/reaching.py:    # TODO This can be trivially parallelized. networkx/algorithms/centrality/reaching.py:    # TODO This can be trivially parallelized. networkx/algorithms/isolate.py:    # TODO This can be parallelized. networkx/algorithms/matching.py:    # TODO This is parallelizable. networkx/algorithms/matching.py:    # TODO This is parallelizable. networkx/algorithms/minors.py:    # (to check set membership). This can certainly be parallelized. networkx/generators/geometric.py:    # TODO This can be parallelized. ```  There are also several open PRs: - https://github.com/networkx/networkx/pull/2265 - https://github.com/networkx/networkx/pull/3440 - https://github.com/networkx/networkx/pull/3581 - https://github.com/networkx/networkx/pull/3587 - https://github.com/networkx/networkx/pull/4007  And there is an example in our gallery: - https://github.com/networkx/networkx/blob/master/examples/advanced/plot_parallel_betweenness.py
issue
Add team gallery#TITLE_END#The ``team.rst`` page is generate from the NetworkX GitHub teams via: ``` python tools/team_list.py > doc/team.rst ```  Eventually I will add it to Travis-CI.   It needs some minor fixes and we may want to put it somewhere else.  This is based on: https://github.com/scikit-image/scikit-image-web/pull/69
issue
Update pre-commit linting#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html -->  If you are using a LLM or any other AI model (ChatGPT, llama, mistral, claude ...), please read and follow the guidelines in the [Contributor Guide](https://networkx.org/documentation/latest/developer/contribute.html) before submitting your PR.  Remove these comments from the description before opening the Pull Request. 
issue
Update developer requirements#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html -->  If you are using a LLM or any other AI model (ChatGPT, llama, mistral, claude ...), please read and follow the guidelines in the [Contributor Guide](https://networkx.org/documentation/latest/developer/contribute.html) before submitting your PR.  Remove these comments from the description before opening the Pull Request. 
issue
Update doc requirements#TITLE_END#Update tools versions for docs.
issue
Update pre-commit repos#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html -->  If you are using a LLM or any other AI model (ChatGPT, llama, mistral, claude ...), please read and follow the guidelines in the [Contributor Guide](https://networkx.org/documentation/latest/developer/contribute.html) before submitting your PR.  Remove these comments from the description before opening the Pull Request. 
issue
Drop support for Python 3.10#TITLE_END#Let's wait a week or so before merging this to see if there are any major issues with NX 3.4.
issue
Remove old deprecation decorator#TITLE_END#See #6905
issue
Use official Python 3.13 release#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Support Python 3.13#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update pygraphviz (1.14)#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update minimum dependencies (SPEC 0)#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Use pydocstyle autoformatting#TITLE_END#There are 6285 remaining errors: ``` D100 Missing docstring in public module D101 Missing docstring in public class D102 Missing docstring in public method D103 Missing docstring in public function D104 Missing docstring in public package D105 Missing docstring in magic method D106 Missing docstring in public nested class D205 1 blank line required between summary D206 Docstring should be indented with spaces, D210 No whitespaces allowed surrounding docstring text D400 First line should end with a D401 First line of docstring should be D404 First word of the docstring should D414 Section has no content ("Notes") D414 Section has no content ("References") D414 Section has no content ("See Also") ```  
issue
Update numpydoc (1.8)#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Test on Python 3.13-dev#TITLE_END#Python 3.13.0-alpha1 was made available recently: https://github.com/actions/python-versions/releases/tag/3.13.0-alpha.1-6531259803  See #7089.
issue
Update ruff config#TITLE_END#This PR is mainly to get the ruff configuration in sync with other repos. It adds more rules, but doesn't require changing anything. I plan to make future PRs to uncomment and fix the commented out rules in `extend-select` in order of importance / usefulness.
issue
Add changelist config#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update ruff pre-commit and config#TITLE_END#This should be merged (not squashed) for git blame ignore stuff. It mainly updates ruff and applies the new autoformatting. I didn't change or add any of the selected rules. I also double-checked the changes. I am going to self-merge and I want to keep the merge commit clean. I have some follow-up PRs to make on top of this one to bring us inline with the linting we are doing on other projects. I wanted to get this in first, so the follow-up changes will be easier to see.
issue
Update geospatial gallery dependencies#TITLE_END#This depends on the next release of momepy.
issue
Update momepy#TITLE_END#The main branch documentation isn't building currently. I am going to self-merge, so we don't get failures on all PRs and main. 
issue
Update pygraphviz#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update doc requirements#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update tests for macOS Sonoma v14#TITLE_END#Close #7436.
issue
Update tests for macOS v14#TITLE_END#`macos-latest` has switched from macOS v12 to macOS v14: https://github.com/actions/runner-images/tree/main
issue
Update numpydoc#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update pygraphviz#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Drop old dependencies per SPEC 0#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Deprecate pydot?#TITLE_END#In https://github.com/networkx/networkx/pull/5721, we added a `PendingDeprecationWarning` for `nx.nx_pydot.*`. It has a number of issues and isn't actively maintained. We are also planning to improve installation issues for pygraphviz. This is a tracking issue to gather feedback from users.   Please leave a comment if you have feelings either way about this change.
issue
Add Python versions to release notes#TITLE_END#Close #7095.
issue
Remove nbconvert upper pin (revert #6984)#TITLE_END#This upper pin is no longer needed, see #7082.
issue
Add favicon#TITLE_END#Thanks to @axif0 for catching this.  Closes #6435 
issue
Drop Python 3.9 support#TITLE_END#See https://scientific-python.org/specs/spec-0000/  <!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update release process#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Support Python 3.12#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update contributing guide for changelist workflow#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update release process for changelist#TITLE_END#<!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Add 3.2rc0 release notes#TITLE_END#This was generated via: ``` export VERSION=3.2rc0 export PREVIOUS=3.1 export ORG="networkx" export REPO="networkx" changelist ${ORG}/${REPO} networkx-${PREVIOUS} main --version ${VERSION}  --out doc/release/release_dev.rst --format rst ```  If we want to change something in the release notes, we should update the relevant GH PR.
issue
Use trusted publisher#TITLE_END#I enabled GH as a trusted publisher for PyPI: ![2023-10-05T08:13:43,311731019-07:00](https://github.com/networkx/networkx/assets/123428/09cde9ba-1d46-44c6-80c5-afb199e3e746) 
issue
Generate requirements files from pyproject.toml#TITLE_END#This PR is based on https://github.com/numpy/numpydoc/pull/483 and https://github.com/scikit-image/scikit-image/pull/7085, which make pyproject.toml a primary file without any template, and adds a pre-commit script to write requirements files. It doesn't really change anything, but I would like to keep everything consistent.  <!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update developer deprecation todo list#TITLE_END#I added a link to the removal in the commit message for each documentation update.  The only remaining issue is what to do about pydot. For now, I just moved the note to the next release and we can discuss it later.
issue
Update sphinx theme#TITLE_END#There a couple of issues that I need to look into before this is ready to merge.  - [ ] search box - [ ] version pull-down - [ ] version warning banner.
issue
Temporarily upperpin nbconvert#TITLE_END#We need to get this working before main will be able to deploy the docs. Reported issue upstream: https://github.com/matthew-brett/nb2plots/issues/32
issue
Add for testing new pydata-sphinx-theme PR#TITLE_END#This PR needs to be merged to test #6930.  <!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> 
issue
Update numpydoc#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Import nx in docstrings#TITLE_END#To make the docstring examples self-contained (and less confusing to new users), we should consider removing https://github.com/networkx/networkx/blob/4e92d77ae1973e892712daac85392efbef9b3591/doc/conf.py#L118 and adding `import networkx as nx` to our docstring examples.  See https://github.com/scipy/scipy/issues/13049.
issue
Revert "Pin sphinx<7 as temporary fix for doc CI failures (#6680)"#TITLE_END#This reverts commit a068e47d92e9cf2f1f17b1363057b55d16ed7df1.  <!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Unpin numpy nightly wheels#TITLE_END#Follow-up to #6852. Close #6846.
issue
Unpin scipy upperbound for tests#TITLE_END#Follow-up to #6726. For more details, see https://github.com/scipy/scipy/issues/18603
issue
Nightly wheels failing#TITLE_END#See https://github.com/networkx/networkx/actions/runs/5894203831/job/15987339056  Here is the output of `pip list`: ``` Package         Version --------------- ----------------------- contourpy       1.1.0 coverage        7.3.0 cycler          0.11.0 fonttools       4.42.0 iniconfig       2.0.0 kiwisolver      1.4.4 matplotlib      3.8.0rc1 networkx        3.2rc0.dev0 numpy           1.26.0b1 packaging       23.1 pandas          2.1.0rc0+25.ge92ea577cc Pillow          10.0.0 pip             23.2.1 pluggy          1.2.0 pyparsing       3.1.1 pytest          7.4.0 pytest-cov      4.1.0 python-dateutil 2.8.2 pytz            2023.3 scipy           1.12.0.dev0 setuptools      65.5.0 six             1.16.0 tzdata          2023.3 ```  We are getting this error: ``` AttributeError: Module 'scipy' has no attribute 'errstate' ```
issue
Don't test numpy2 nightlies#TITLE_END#We are failing on the nightly wheel builds b/c of numpy 2 (see #6846). This let's us test on the other wheels without the known numpy 2 failure. After merging this, I will make a PR to revert it and we can work on fixing the issue there.
issue
[Experimental] Speedup docbulid#TITLE_END#I have a few ideas I plan try out, but I am not sure how much impact they will have.  It is probably not worth looking at this until I have some timing results and I have a clearer idea of what will help the most.  This is related to #4594.  It may be an alternative or maybe we should do both.  It would certainly be good if we could speed up the CI, but it would also be good to speed up the doc build anyway.  It is currently very slow to build docs on my own machine and I would still like to do that from time to time.
issue
Add plotly example#TITLE_END#https://plotly.com/python/v3/igraph-networkx-comparison/
issue
Attach milestone to merged PRs#TITLE_END#This will attach the next milestone to PRs when they are merged into main. I've created the TOKEN, so this should work.  I also enabled `Fine-grained personal access tokens` in the process: https://github.blog/2022-10-18-introducing-fine-grained-personal-access-tokens-for-github/  We are already using them for scientific-python and scikit-image.
issue
Use dependabot#TITLE_END#This will create PRs to update the GH actions monthly (it won't do anything for the requirements at the moment, since we use `>=` for all the requirements at the moment). I've started using it in other projects and makes minor maintenance stuff easier.
issue
WIP: Use GitHub API to get PR/contibutors list#TITLE_END#Not ready to merge.  Started working on new ``contribs.py`` script using GH API instead of ``git log``.  I will finish this up later, I just wanted to make it available so folks can see the direction I am headed.  The main reason for switching is that:  1. ``git log`` was missing a bunch of merged PRs. 2. ``git log`` doesn't know about the GitHub labels (e.g., Enhancement, Maintenance)
issue
Add label-check workflow#TITLE_END#As discussed in the developer meeting today, I've updated the labels to include: https://github.com/networkx/networkx/labels?q=type ``` type: Maintenance type: Enhancements type: Documentation type: Highlights type: API type: Bug fix  ```  This is in preparation for switching to https://github.com/scientific-python/changelist/ after the upcoming 3.2 release.
issue
Include missing package_data#TITLE_END#Follow-up to #6774.
issue
Use pyproject.toml#TITLE_END#This uses `pyproject.toml` and removes `setup.py`, `.mypi.ini`, and `ruff.toml`. I replicated the previous behavior where `setup.py` was grabbing optional dependencies from the `requirements` files using the same system we used in scikit-image (https://github.com/scikit-image/scikit-image/pull/6726 and https://github.com/scikit-image/scikit-image/pull/6763) and numpydoc (https://github.com/numpy/numpydoc/pull/474).  `pyproject.toml` is autogenerated from the `requirements` and `tools/pyproject.toml.in` via `python tools/generate_pyproject.toml.py`. The `pre-commit` monitors everything to make sure things don't get out-of-sync.
issue
Check that it works on 3.12 without setuptools#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Test on Python 3.12-beta2#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update core dependencies per SPEC0#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update pygraphviz#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Drop support for Python 3.8 per SPEC0#TITLE_END#Follow-up to #6636  also getting ready for the move to `pyproject.toml`.  See https://scientific-python.org/specs/spec-0000/
issue
Skip scipy-1.11.0rc1 due to known issue#TITLE_END#See https://github.com/scipy/scipy/issues/18603
issue
Update release process#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Draft release notes#TITLE_END#The empty sections are supposed to be filled during the release process, so we just need to fill in the `Highlights`, `Improvements`, and `Deprecations` sections.  I removed the `API Changes`, since I don't think this release has any. Please correct me if I am wrong.
issue
Update release requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update team galleries#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update sphinx#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update pre-commit#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Looking for dead tests#TITLE_END#This is not to merge!!!  I just wondered if we have any tests that aren't being run.
issue
Update developer requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add gallery example of using mpl to annotate a graph drawn with nx.draw#TITLE_END#NetworkX can draw graphs that can be annotated using the matplotlib drawing tools because the result of `nx.draw` is a matplotlib figure on which you can use matplotlib to draw anything else you'd like on top of the networkx drawing of the graph.  This idea is motivated by this SO post: - https://stackoverflow.com/questions/66221054/3-dimensional-graph-lightgraphs-graphplot-julia-or-networkx-python  Someone could start with the example from the SO post; but it would be nice to have an example with more annotations and with nicer looking output.  (I suspect someone with more matplotlib skill than me would be able to make something very nice).   It also might be worth explaining a bit more about potential use cases in the example (perhaps by using real data where this type of annotation provides useful information about the underlying system).  If we add a nice example to the gallery, we should also add a link to the example to the SO post.
issue
Update precommit hooks#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update release notes#TITLE_END#The list of commits and authors was updated via: ``` # checkout branches and make sure they are up-to-date git checkout networkx-2.8.8 git pull origin networkx-2.8.8 git checkout main git pull origin main  # find out what commits on main haven't been cherry-picked already git cherry -v networkx-2.8.8 main > cherry-log.txt  # get their commit messages and hashes grep "^+" cherry-log.txt | cut -d " " -f 3- > 3.0-new-commit-messages.txt grep "^+" cherry-log.txt | cut -d " " -f 2  > 3.0-new-commit-hashes.txt  # get their commit authors > 3.0-new-commit-authors.txt lines=$(cat 3.0-new-commit-hashes.txt) for line in $lines do    git log --format="%an" ${line}^! >> 3.0-new-commit-authors.txt done  # get a unique sorted list of authors sort -u -o 3.0-new-commit-authors.txt{,}  # make messages and authors into markdown lists awk -i inplace '{ print "-", $0 }' 3.0-new-commit-messages.txt awk -i inplace '{ print "-", $0 }' 3.0-new-commit-authors.txt ```
issue
Fix links to migration guide#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix documentation deployment#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix docstrings#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix links in release notes#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update GH actions#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update pre-commit hooks#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Pin to sphinx 5.2.3#TITLE_END#and update release requirements   TODO: math roles aren't rendered with sphinx 5.3  See https://github.com/sphinx-doc/sphinx/issues/10944 for example. 
issue
Add 2.8.x release notes#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Re-enable  geospatial examples#TITLE_END#Re-enable  geospatial examples once pysal makes a new release. See - https://github.com/networkx/networkx/pull/5841  Background information: - https://github.com/networkx/networkx/pull/5779 - https://github.com/pysal/libpysal/pull/472
issue
Reenable geospatial examples#TITLE_END#Close #5840.
issue
Update developer requirements #TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update pytest#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Test on Python 3.11#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Simplify scipy imports#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use scipy.sparse array datastructure#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update deprecations#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update linters#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Support Python 3.11#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update numpydoc#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Test numpydoc 1.5.0rc1#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update pydata-sphinx-theme#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update doc requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update linters#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update precommit linters#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Support matplotlb 3.6rc1#TITLE_END#Matplotlib 3.6rc1 just came out: https://pypi.org/project/matplotlib/3.6.0rc1/  While preparing NX 2.8.6, I noticed we are getting errors with this prerelease. I don't have time to look at it right now, but wanted to create this PR to see if anyone else could look into it before I have a chance.  ``` if ax is None: >           if cf._axstack() is None: E           TypeError: '_AxesStack' object is not callable  networkx/drawing/nx_pylab.py:113: TypeError =============================== warnings summary =============================== networkx/drawing/tests/test_pylab.py::test_alpha_iter   /home/circleci/project/networkx/drawing/tests/test_pylab.py:489:   MatplotlibDeprecationWarning: Auto-removal of overlapping axes is deprecated since 3.6 and   will be removed two minor releases later; explicitly call ax.remove() as needed.     plt.subplot(131) ```
issue
Support Matplotlib 3.6rc1#TITLE_END#Not sure we need to address this before releasing NX 2.8.6, but it would be nice. See #5937.  We could ignore this for now and deal with it before 2.8.7. I've already backported all other 2.8.6 PRs to the v2.8 branch. We need to decide what to do about this, I need to update the 2.8.6 release notes (won't take long), and then make the release. I am busy this afternoon, so I will take care of this tonight or tomorrow morning.
issue
Update pygraphviz#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove old Appveyor cruft#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update precommit hooks#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Prepare NX 2.8.5#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Drop NumPy 1.19#TITLE_END#https://numpy.org/neps/nep-0029-deprecation_policy.html
issue
Clean up from PR #5779#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove pyyaml dependency#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove gdal dependency#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove coverage and performance from quality#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove gpickle#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove generate_unique_node#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add PendingDeprecation for pydot#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update doc requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update developer requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update release requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update sphinx#TITLE_END#Testing Sphinx 5, which is scheduled for release in a few weeks.
issue
Test scipy and pandas on py3.10#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove broken conda example#TITLE_END#Fix #4870.
issue
Build docs with Py 3.9#TITLE_END#Rasterio doesn't have a wheel for Python 3.10 yet and we don't want to manually build it.  <!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use pip cache#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use new ubuntu LTS release#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update GH actions#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update numpydoc#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Run black on docs#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove redundant dependencies#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update dependencies#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Avoid black formatting when using git blame#TITLE_END#We should look into adding a `.git-blame-ignore-revs` file for using with `git blame`: https://black.readthedocs.io/en/stable/guides/introducing_black_to_your_project.html#avoiding-ruining-git-blame  Looks like GH may also soon support it: https://github.com/github/feedback/discussions/5033
issue
Make sympy extra dep#TITLE_END#I made sympy an extra (not default) dependency as we had previously discussed not making things default dependencies until they are used a lot or for core functionality.  I also updated the minimum dependency from 1.0 to 1.10. This is a new dependency used by a single function that didn't exist before. I don't think there is any need to support a release of sympy that came out in 2016 and only claims to work on Python 3.5 or older.  (We only run on 3.8 or more recent).
issue
Update sphinx#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Ignore black formatting#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix development banner#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix docs#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove stuff conda doesn't support#TITLE_END#See #5355.
issue
Update release process#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Silence expected warnings#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Test on 3.11-dev#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix pandas warning#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Deprecate info#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add readwrite section to tutorial#TITLE_END#As part of deprecating nx_yaml #4281 and gpickle #4282 I am drafting a readwrite section for the tutorial.  I am planning something short, but I would like it to be somewhat prescriptive.  So far I just have a table from the pydata talk and a short section on using yaml and pickle to save NX graphs.  Here are some resources I am looking at: - https://gephi.org/users/supported-graph-formats/ - https://www.researchgate.net/publication/330185503_Overview_of_Standard_Graph_File_Formats - https://arxiv.org/pdf/1503.02781.pdf - Pitas, Ioannis (2016), "1.5 Graph storage formats and visualization", Graph-Based Social Media Analysis
issue
Add pickle and yaml migration info#TITLE_END#Closes #4283.
issue
Update release requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use pytest-mpl#TITLE_END#Closes #4389 using https://github.com/matplotlib/pytest-mpl to perform image comparison for Matplotlib figures in pytest.  I couldn't figure out how to view the image diffs on failure using GitHub actions alone (I don't think it is possible).  So this PR uses circleci to run pytest-mpl because circleci allows us to view html artifacts (e.g., that is what we do for the doc builds).  As far as I can tell this seems to work.  As you can see below,  ``` ci/circleci: documentation — Your tests passed on CircleCI! ci/circleci: image — Your tests failed on CircleCI  ci/circleci: documentation artifact — Link to 0/doc/build/html/index.html  ``` There is one issue, that I think should disappear when we merge with master.  Namely, the new GitHub action that should point to the image artifact isn't working.  I believe after merging with master we should have: ``` ci/circleci: documentation — Your tests passed on CircleCI! ci/circleci: image — Your tests failed on CircleCI  ci/circleci: documentation artifact — Link to 0/doc/build/html/index.html  ci/circleci: image artifact — Link to 0/results/fig_comparison.html ```  If  `ci/circleci: image`  fails, the `ci/circleci: image artifact` link should point to a link like this: - https://1420-890377-gh.circle-artifacts.com/0/results/fig_comparison.html  If it succeeds, it should point to a link like this: - https://1422-890377-gh.circle-artifacts.com/0/results/fig_comparison.html   The reason I this should work once we merge to master is this note: ``` Note: The standard PR-to-main-repo-from-branch-in-a-fork workflow might not activate the action. For changes to take effect, changes might need to be made to to the default branch in a repo with the action enabled. For example, you could iterate directly in master, or in master of a fork. This seems to be a limitation of the fact that CircleCI uses the status (rather than app) API and that this is always tied to the master/default branch of a given repository. ``` -- from https://github.com/marketplace/actions/run-circleci-artifacts-redirector  ## TODO later  I think we need more experience using this before figuring out some policies.  Here are two things we should look into at some point in the near future.  1. This PR currently requires storing a baseline image to compare against in the repo. ``` $ ls -l networkx/drawing/tests/baseline/ total 48 -rw-rw-r--. 1 jarrod jarrod 25862 Jan 29 18:19 test_axes.png -rw-rw-r--. 1 jarrod jarrod  3326 Jan 29 18:19 test_empty_graph.png -rw-rw-r--. 1 jarrod jarrod 12969 Jan 29 18:19 test_multigraph_edgelist_tuples.png $ du -sh networkx/drawing/tests/baseline/ 52K	networkx/drawing/tests/baseline/ ``` This isn't a big deal now.  But we will need to pay attention that we don't commit large images.  2. I would like to integrate the ``sphinx_gallery`` examples.  It isn't clear that best way to do this.  I will open an issue on ``sphinx_gallery`` and see if we can get this integrated upstream in a clean way.  3. Image comparisons outside ``networkx/drawing/tests/tests_pylab.py``.  We should look into testing pygraphviz and pydot interfaces.  I am not sure it makes sense, but we may also want to consider whether it makes sense to add image comparison tests in other locations (e.g., ``networkx/algorithms``).  My first thought is that is is better to test algorithms directly rather than by using an image comparison test.  But maybe there is a use case that I am not thinking of.  4. Gain experience with how sensitive these tests are.  It is likely fairly dependent on the exact platform we test on.   I am not sure if it will cause trouble.  But things like font may end up varying by machine.  If that happens we may need to investigate some other options.  For example, we may need to look into things like: ``` @pytest.mark.mpl_image_compare(tolerance=20) @pytest.mark.mpl_image_compare(savefig_kwargs={'dpi':300}) @pytest.mark.mpl_image_compare(remove_text=True) ``` We may also need to be careful to pin versions of Matplotlib and FreeType used for image comparisons.  But currently it looks like things work as is. 
issue
Improve nx_pylab testing#TITLE_END#Currently our visualization test suite are smoke tests.  We should investigate using ``pytest-mpl`` - https://github.com/matplotlib/pytest-mpl  See #4375.
issue
Update pygraphviz#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update scipy#TITLE_END#SciPy 1.8 final was released on 2/5.
issue
Update test requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update to stable version of black#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update numpydoc#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update year#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update sphinx#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update dev deps#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use new package name#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
failure when testing prereleases of dependencies#TITLE_END#@rossbar We are getting the following failure when testing prereleases.  I suspect the issue is related to NumPy 1.22.0rc1. ``` =================================== FAILURES =================================== ________________________ TestLayout.test_spiral_layout _________________________  self = <networkx.drawing.tests.test_layout.TestLayout object at 0x7f4dd807dc70>      def test_spiral_layout(self):              G = self.Gs              # a lower value of resolution should result in a more compact layout         # intuitively, the total distance from the start and end nodes         # via each node in between (transiting through each) will be less,         # assuming rescaling does not occur on the computed node positions         pos_standard = nx.spiral_layout(G, resolution=0.35)         pos_tighter = nx.spiral_layout(G, resolution=0.34)         distances = self.collect_node_distances(pos_standard)         distances_tighter = self.collect_node_distances(pos_tighter) >       assert sum(distances) > sum(distances_tighter) E       assert 2.1859271805707814 > 2.4246843231297848 E        +  where 2.1859271805707814 = sum([0.31927215741496506, 0.3558859513351378, 0.4196367596771466, 0.5002552444945128, 0.5908770676490193]) E        +  and   2.4246843231297848 = sum([0.3585779234394243, 0.39751744460128174, 0.4657296446767588, 0.5524763132328394, 0.6503829971794806])  networkx/drawing/tests/test_layout.py:374: AssertionError ```
issue
Test on Python 3.10#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix modularity functions#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
List policies#TITLE_END#For now, I think it is reasonable to keep a short list at the bottom of this CONTRIBUTING file.  If/when it gets long, we can make a separate page and link to the new page from the CONTRIBUTING file.
issue
Update example requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use sphinx 4.2#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use black 21.9b0#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Test on Python 3.10#TITLE_END#This enables some testing on Python 3.10 and fixes some test that weren't correctly marked as requiring scipy.  Once scipy, matplotlib, and pandas release Python 3.10 wheels, I will create a PR to enable fully testing on 3.10 and updating the documentation to state we support 3.10.
issue
Add pyupgrade to pre-commit#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Drop Py37#TITLE_END#We are dropping support for Python 3.7 per NEP 29: https://numpy.org/neps/nep-0029-deprecation_policy.html  Closes #5141 and closes #5142.  Added @SimoneGasperini as coauthor of this PR in 4866d57.  @dschult @rossbar This disables testing on 3.7, moves to PyPy 3.8, removes testing code needed for 3.7 compatibility, updates documentation, deprecates a function needed for Python <= 3.7, auto-updates code with `pyupgrade --py38-plus`, which I will add to to our pre-commit hooks in a follow-up PR.
issue
Update core dev team#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix docstring typo#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix typo#TITLE_END#Fix #4986.
issue
Remove default dependencies#TITLE_END#Having scipy as a default dependency introduce a circular build dependency issue for scipy:  https://github.com/scipy/scipy/issues/14335 and https://github.com/serge-sans-paille/pythran/issues/1837  This PR removes numpy, scipy, matplotlib, and pandas as "default" dependencies for NetworkX.  With this PR, ``` pip install networkx ``` requires installing no additional packages and we will ask users to install networkx via ``` pip install networkx[default] ```  I propose releasing networkx 2.6.2 with this PR merged and removing 2.6.0 and 2.6.1.  I would still like to figure out a way for users to install networkx with its "default" dependencies using only ``` pip install networkx ``` for 2.7.  Currently, I think we may want to release two packages on PyPI: - ``networkx-core`` for libraries that only need a small subset of our functionality and that are not interested in installing extra packages - ``networkx`` for end-users who don't care about which libraries we use to provide basic functionality.  Of course, we will need to think through this a bit and we may need to work with projects (like ``pythran``) that depend on us.
issue
Fix conda instructions#TITLE_END#Fix #4870. 
issue
Finalize 2.6 release notes#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix version pull down#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add 3.0 migration guide#TITLE_END#I am not sure how much more detail to add.  Maybe just pointing to the release notes for details about the deprecated code would be enough for now.
issue
Update release process#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Make optional dependencies default#TITLE_END#Given their central position in the scientific Python ecosystem and the fact that they provide self-contained, easy to install wheels, NumPy, SciPy, Matplotlib, and Pandas are now default dependencies.  They don't have pre-built wheels for pypy or 3.9-dev, so they aren't installed by default on those instances via the environment marker: ``` platform_python_implementation!='PyPy' and python_version<'3.9' ``` Before we officially add support for Python 3.9, we will change ``python_version<'3.9'`` to ``python_version<'3.10'``.  If and when the core projects (ie., NumPy, SciPy, Matplotlib, and Pandas) provide self-contained wheels for PyPy, we will remove ``platform_python_implementation!='PyPy'``.  This also makes pyyaml a default dependency.  According to https://pypistats.org/top, pyyaml is among the top 15 packages downloaded from pypi and has more conda downloads than networkx.  It also easy to install and works on pypy.  It is unlikely that we will add additional new default dependencies.  We will also be unlikely to add new extra dependencies.  More detail can be found in the new dependency bullet to the ``Guidelines`` section of the ``Contributor Guide`` (see c9395c8ce1).  This removes code (mostly boiler plate stuff), simplifies our CI system, and should help reduce the number of user installation issues.  @dschult , @rossbar , @stefanv, @MridulS  I think this is ready to go.  Let me know if you have any questions or suggestions. 
issue
Default to NumPy for simrank_similarity#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use scipy to compute eigenvalues#TITLE_END# ![hits](https://user-images.githubusercontent.com/123428/119858437-5218e800-bec9-11eb-8d80-50907f7dc52a.png) <!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add dtype argument to adjacency_matrix#TITLE_END#@dschult This adds a dtype argument to `adjacency_matrix` and deprecates `adj_matrix`.
issue
Finish geospatial readme#TITLE_END#See #4417.  @ljwolf may take the lead on this.  If not, I will.
issue
Improve gallery examples#TITLE_END#### Restructure  #4422 #4427 #4428 #4429   ### Existing examples - [x] examples/drawing/plot_house_with_colors.py #4263  - [x] examples/drawing/plot_four_grids.py #4264  - [x] examples/drawing/plot_degree_rank.py #4259 (see also: #4265) - [x] examples/drawing/plot_labels_and_colors.py #4266  - [x] examples/drawing/plot_giant_component.py #4267  - [x] examples/drawing/plot_knuth_miles.py #4251  - [x] examples/drawing/plot_chess_masters.py #4252  - [x] examples/basic/plot_read_write.py #4260  - [ ] examples/graph/plot_napoleon_russian_campaign.py - [x] examples/algorithms/plot_decomposition.py #4278  - [ ] examples/algorithms/plot_krackhardt_centrality.py - [x] examples/graph/plot_words.py #4409  - [x] examples/applications/plot_circuits.py #4408  - [x] examples/algorithms/plot_rcm.py #4411   ### New examples - [x] gene-gene network #4269  ### Geospatial examples  - [x] pysal, geopandas, momepy, OSMnx, etc. #4366, #4381, #4383, #4407   ### External libraries examples  We should move the javascript, jit, and pygraphviz libraries here.  I think it makes sense to keep geospatial separate as it looks like it will have a number of specialized examples.  - [x] igraph #4404 - [ ] graphtools (maybe via igraph?) - [ ] scikit-learn (maybe a spectral clustering example?) - [ ] RAPIDS cuGraph     - https://medium.com/rapids-ai/rapids-cugraph-networkx-compatibility-d119e417557c     - https://github.com/ptheywood/cuda-cmake-github-actions     - FLAMEGPU/FLAMEGPU2_dev#290 - [ ] graph plotting libraries ?  Are there other examples we should include?  I know a lot of libraries build on networkx.  It would be nice to have list of ones that provide functions to convert to/from NetworkX.
issue
Add info about testing and examples#TITLE_END#Depends on #4556 and is depended upon by #4579.
issue
Refactor testing utilities#TITLE_END#As discussed in #4582, change `assert_edges_equal`, `assert_graphs_equal`, and `assert_nodes_equal` to be more pytest-idiomatic.  For example, `assert_edges_equal` becomes the Boolean function `edges_equal` and then the assert is done the testing file (i.e., `assert edges_equal(edges1, edges2)`).  This also makes these utility functions useful in nontesting situations where you want to compare edges, but not raise an exception based on the result.  <!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Deprecate run#TITLE_END#As discussed in #4829, use pytest directly instead:  we don't use `run` in the CI; the core developer team doesn't use this function when developing; and it isn't tested.
issue
Use pytest.approx#TITLE_END#As discussed in #4582, this replace our utility function `almost_equal` with the pytest builtin `approx`.
issue
Deprecate preserve_random_state#TITLE_END#Close #4775.
issue
Link to guides#TITLE_END#This PR adds a link to https://networkx.org/nx-guides/ with the name `NX Guides` to the navbar: ![screenshot](https://user-images.githubusercontent.com/123428/118890595-d2c95a00-b8b3-11eb-9710-3076164a9f25.png)  Is there a better name?  E.g., `Tutorials and Guides`, `Interactive Tutorials and Guides`, `Interactive Guides`, etc.
issue
Fix Sphinx errors#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update requirements#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
pygeos 0.10#TITLE_END#Pygeos 0.10 was just released and it looks like it broke our documentation build system on circleci, but not on github actions.
issue
Restructure documentation#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update black#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use igraph 0.9#TITLE_END#Sphinx-gallery hangs on the igraph plot.  When I run this locally, it displays the igraph plot; but it hangs until I close the plot.  After manually closing the plot, sphinx-gallery doesn't find the PNG file.  We may need a python-igraph sphinx-gallery scrapper.  @rossbar Could you take a quick look (when you have a chance) and see if there is an easy fix or whether we need to make changes to python-igraph to get this working?
issue
Improve documentation look#TITLE_END#@rossbar Could you take a quick look at this?
issue
Remove mayavi and cartopy dependencies#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update documentation dependencies#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use pydata sphinx theme#TITLE_END#NumPy, SciPy, and other projects are moving (or have moved) to using the [pydata sphinx theme](https://github.com/pydata/pydata-sphinx-theme) for documentation.  I believe it is nicer looking and, more importantly, will help us create a more unified scientific Python ecosystem.  We also know the maintainers, so we can easily help fix and improve the theme.  I plan to clean up a few things, but I wanted to get some feedback before putting too much more time in to this.  We could merge this as is and I could do the clean up in a separate PR or I could make the changes to this PR.  I slightly prefer merging this first, but I don't have a strong preference.
issue
Make main default branch (and remove gitwash)#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update CI to use main#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Remove old file reference#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Pygraphviz choco#TITLE_END#Bash and PowerShell have different syntax for line continuations and for ``for`` loops.  So you can not do something like ```     - name: Before install       run: |         if [ "$RUNNER_OS" == "Linux" ]; then           sudo apt-get update           sudo apt-get install graphviz graphviz-dev         elif [ "$RUNNER_OS" == "macOS" ]; then           brew install graphviz         elif [ "$RUNNER_OS" == "Windows" ]; then           choco install graphviz         fi ``` without also doing something like ```   extra:     runs-on: ${{ matrix.os }}     defaults:        run:          shell: bash ```  That uses Bash for all OSes; but then Windows fails to build extension code because the development environment for Windows is not setup/configured for Git Bash.  It may be possible to get this working, but I decided to use the default shell for each OS.  This requires moving the logic that detects what OS you are running on outside of all the ``run`` steps.  For example, ```     - name: Before install (macOS)       if: runner.os == 'macOS'       run: brew install graphviz ``` You can see more about context and expression syntax here: - https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions  In particular, you can use these operators to do more complex checks: - https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#operators  One thing that tripped me up a bit was the fact that double quotes are invalid.  That is, this prevents the whole ``test.yml`` workflow from even loading: ```     - name: Before install (macOS)       if: runner.os == "macOS"       run: brew install graphviz ```
issue
Release pygraphviz 1.7#TITLE_END#We need to review and merge existing PRs.  Update to support Python 3 only.  Clean up and review issues.  See: https://github.com/pygraphviz/pygraphviz/milestone/4
issue
Test pygraphviz 1.7rc2#TITLE_END#@rossbar you should ignore the documentation build issue (see #4562).  It would be great if you could look into the PyGraphviz errors, though.  We are getting a bunch of errors like this: ``` PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp\\tmpnjbtob0b' ``` I haven't looked into it, but I suspect that maybe there are some file handles that need to be closed in the recent Windows changes to PyGraphviz.
issue
Fix typos#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Fix search#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Simplify test pylab#TITLE_END#I am simplifying test_pylab.py in preparation for using pytest-mpl.
issue
Test Windows via GH actions#TITLE_END#@rossbar Switch to GH actions from Appveyor for Windows testing.  Once this is merged, I will clean up #4561 so that it is just focused on pygraphviz testing on Windows.
issue
PyGEOS 0.9 breaks gallery examples#TITLE_END#@brendan-ward @ljwolf PyGEOS 0.9 was released today and it appears to have broken all our geospatial examples.  We are now getting errors like: ``` Unexpected failing examples: /home/circleci/repo/examples/geospatial/plot_polygons.py failed leaving traceback: Traceback (most recent call last):   File "/home/circleci/repo/examples/geospatial/plot_polygons.py", line 12, in <module>     from libpysal import weights   File "/home/circleci/repo/venv/lib/python3.8/site-packages/libpysal/__init__.py", line 28, in <module>     from . import io   File "/home/circleci/repo/venv/lib/python3.8/site-packages/libpysal/io/__init__.py", line 3, in <module>     from .iohandlers import *   File "/home/circleci/repo/venv/lib/python3.8/site-packages/libpysal/io/iohandlers/__init__.py", line 6, in <module>     from . import dat   File "/home/circleci/repo/venv/lib/python3.8/site-packages/libpysal/io/iohandlers/dat.py", line 2, in <module>     from ...weights import W   File "/home/circleci/repo/venv/lib/python3.8/site-packages/libpysal/weights/__init__.py", line 2, in <module>     from .distance import *   File "/home/circleci/repo/venv/lib/python3.8/site-packages/libpysal/weights/distance.py", line 7, in <module>     from .util import (   File "/home/circleci/repo/venv/lib/python3.8/site-packages/libpysal/weights/util.py", line 19, in <module>     import geopandas as gpd   File "/home/circleci/repo/venv/lib/python3.8/site-packages/geopandas/__init__.py", line 3, in <module>     from geopandas.geoseries import GeoSeries  # noqa   File "/home/circleci/repo/venv/lib/python3.8/site-packages/geopandas/geoseries.py", line 12, in <module>     from geopandas.base import GeoPandasBase, _delegate_property   File "/home/circleci/repo/venv/lib/python3.8/site-packages/geopandas/base.py", line 13, in <module>     from .array import GeometryArray, GeometryDtype   File "/home/circleci/repo/venv/lib/python3.8/site-packages/geopandas/array.py", line 25, in <module>     from . import _vectorized as vectorized   File "/home/circleci/repo/venv/lib/python3.8/site-packages/geopandas/_vectorized.py", line 39, in <module>     type_mapping = {p.value: _names[p.name] for p in pygeos.GeometryType}   File "/home/circleci/repo/venv/lib/python3.8/site-packages/geopandas/_vectorized.py", line 39, in <dictcomp>     type_mapping = {p.value: _names[p.name] for p in pygeos.GeometryType} KeyError: 'MISSING' ```  Is this an easy fix or should I pin PyGEOS to 0.8?
issue
Pin pygeos==0.8#TITLE_END#See #4562.
issue
Fix for PR #4378#TITLE_END#The recent change in behavior of `node_list` kwarg in draw_networkx_edges (#4374) resulted in the edges disappearing for our gallery example (``examples/drawing/plot_random_geometric_graph.py``): ![Figure_2](https://user-images.githubusercontent.com/123428/103430625-e41aff80-4b7a-11eb-91ea-be0256f55c24.png)  I don't understand what the intention of including ``nodelist=[ncenter]`` to the call to ``nx.draw_networkx_edges``.  As far as I could tell it just drew all the edges in 2.5. ![Figure_1](https://user-images.githubusercontent.com/123428/103430655-25131400-4b7b-11eb-82d3-b6eca96052d2.png)  Removing it results in on master: ![Figure_3](https://user-images.githubusercontent.com/123428/103430658-2fcda900-4b7b-11eb-9ada-83df4d1994b8.png)  
issue
Delete old test#TITLE_END#@dschult @rossbar I tried reenabling this in case Travis was the issue.  After looking into it more, I think we should just delete this test.  I noticed it wasn't consistent even on my laptop: ![time_strongly_connected_components](https://user-images.githubusercontent.com/123428/103486770-144de280-4db5-11eb-84ee-31493d0ffed0.png) The code to produce the figure is here:  https://gist.github.com/jarrodmillman/a170d27fc8c5fcb5e03ff450e260ce42
issue
Simplify version information#TITLE_END#As part of the pygraphviz cleanup, I noticed that it had a unmaintained version number system.  I looked into the nx version number system and noticed it was also largely unmaintained (although more up to date than the one in pygraphviz).  ## What  I planned to update ``networkx/release.py`` and started in #4491.  But decided we didn't need to have something complicated.  So this PR removes ``networkx/release.py`` and there will no longer be an autogenerated ``networkx/version.py``.  Instead, we would now have something like ``` __version__ = "2.6rc1.dev0" ``` in ``networkx/__init__.py``.  I moved the other useful information in ``networkx/release.py`` to ``setup.py``.  Moving forward everytime we make a release, the release maintainer will update the version number.  For example, ``` __version__ = "2.6rc1.dev0"  # now __version__ = "2.6rc2.dev0"  # release 2.6rc1 __version__ = "2.6rc2"  # if needed, otherwise __version__ = "2.6"  # release 2.6 __version__ = "2.7rc1.dev0"  # immediately after 2.6 release __version__ = "2.7rc2.dev0"  # release 2.7rc1 __version__ = "2.7rc2"  # if needed, otherwise __version__ = "3.0"  # release 3.0 __version__ = "3.1rc1.dev0"  # immediately after 3.0 release ```  ## Why  The old code didn't really work and we don't use the information (it mostly didn't generate) anyway.   Now that we ask developers to test development releases using ``pip install -e .``, we always create ``networkx/version.py`` when they run that command.  Thus, generating a ``networkx/version.py``, which is never modified until they update or reinstall.  I suspect few of us ever hit the "dynamic" version number stuff and, if we did, I suspect we never look at it.  For example, the dynamic version number stuff has never been updated to work with git.  The only update to handle git was to add this line ```     if os.path.isdir(gitdir):         vcs = "git"         # For now, we are not bothering with revision and tag. ``` to ``networkx.release.get_revision``.  That was put there 10 years ago and hasn't changed since.  While numpy and scipy still do something complicated, scikit-image uses the simpler ``__version__`` information (https://github.com/scikit-image/scikit-image/blob/master/skimage/__init__.py#L74).  If desired, we could put more information on https://networkx.org/documentation/latest/.  For example, if we wanted to list the git commit hash, we could do that in ``doc/Makefile`` or ``doc/conf.py`` with something like ``` git rev-parse --short HEAD ```
issue
Run pypy tests separately#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Drop Travis CI#TITLE_END#Travis stopped deploying the docs 18 days ago.  Once #4480 is merged, the latest docs will deploy via actions.
issue
Update year#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update geospatial readme#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Simplify example dependencies#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update pre-commit#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update Sphinx#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Reenable tests#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Update GH actions links in README#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Deprecate iterable#TITLE_END#This function added 10 years ago, so maybe it was needed for some Python 2 case that I can't recall.  If we are keeping it in, we should come up with an example of an ``obj`` such that  - ``hasattr(obj, "__iter__")`` is ``False`` - ``len(obj)`` doesn't raise an exception  and it makes sense to use it in ``flatten`` or ``generators/lattice.py``  See #4224.
issue
Drop Py3.6 support per NEP 29#TITLE_END#Several of the core packages have decided to drop support for Python 3.6 on their next release.  scikit-image already has a release without Python 3.6 support: - https://pypi.org/project/scikit-image/  (Dec. 15)  NumPy, SciPy, and Pandas already have release candidates without Python 3.6 support: - https://pypi.org/project/numpy/1.20.0rc1/  (Dec. 3) - https://pypi.org/project/scipy/1.6.0rc1/  (Dec. 10) - https://pypi.org/project/pandas/1.2.0rc0/  (Dec. 8)  I am not sure when Matplotlib is planning to make a new release, but they've removed support for 3.6 from master already. - https://github.com/matplotlib/matplotlib/pull/17662 (Jul. 6)  GH actions/setup-python now supports PyPy-3.7: - https://github.com/actions/setup-python/pull/168  I recommend we also follow NEP 29 and drop 3.6 support (which is what this PR does).  For more information see: - https://numpy.org/neps/nep-0029-deprecation_policy.html
issue
Reorganize tests#TITLE_END#This basically combines the three test workflows into one and improves the names slightly.  Doing this makes the order of the tests easier to scroll through in the checks below.
issue
Deprecate consume#TITLE_END#We only use this in one place and it has a one-line body.  See #4224.
issue
Deprecate jit#TITLE_END#How popular is the Javascript Infovis Toolkit?  It looks to me like it is a dead project and I propose deprecating this code.    The last commit to https://github.com/philogb/jit was Sept. 2014.  The last release was July 1, 2013.  The newest question on stackoverflow was Feb. 2015.   The mailing list is getting questions, but no one is answering.  We did get a recent PR:  https://github.com/networkx/networkx/pull/3891  It looks like the only way to install it is to download the source (or clone the repo) and then type ``python make.py build``, but ``make.py`` is a Python 2 script.  Maybe if I fixed it, everything would work.  But it seems likely to me that there will be other things that need to be updated.  It looks like @MridulS contributed ``jit_data`` and ``jit_graph`` in #1945 based on #881.  Do you know more about if this widely used still?
issue
Update geospatial readme#TITLE_END#Co-authored-by: Brendan Ward <bcward@astutespruce.com> Co-authored-by: Martin Fleischmann <martin@martinfleischmann.net> Co-authored-by: Geoff Boeing <gboeing@users.noreply.github.com> Co-authored-by: Ross Barnowski <rossbar@berkeley.edu>  <!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Collect graphviz examples#TITLE_END#This moves all the graphviz examples to one section including the one that merged all the old pygraphviz examples.  It also sorts the subsections by filename.  Before it was by lines of code.
issue
Standard imports#TITLE_END#Closes #4277 and makes searching for ``np``, ``sp``, ``linalg``, etc. more helpful.  If scipy implements lazy loading a la https://snarky.ca/lazy-importing-in-python-3-7/ (maybe one of us should contribute it), then we can just remove all the lines like ``` import scipy.linalg  # call as sp.linalg import scipy.sparse  # call as sp.sparse ``` similarly for matplotlib and lines like ``` import matplotlib.collections  # call as mpl.collections ```
issue
Add igraph example#TITLE_END#igraph recently added functions to convert to/from networkx: https://github.com/igraph/python-igraph/pull/242
issue
Remove advanced example section#TITLE_END#I don't think examples in the advanced section make sense.  (We could have an advanced section.  I just don't think the current examples are that great.)  So I moved 1. eigenvalues to drawing (It seems like a basic plot you might want to do.) 2. i deleted the umlaut one (unicode isn't special anymore) 3. the other two to algorithms
issue
Refactor gallery#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use str dunder#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add plot for rcm example#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add circuit plot#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Add words graph plot#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Don't import nx from networkx#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Pagerank followup#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Test mac osx via actions#TITLE_END#This moves our testing to GH actions from Travis.  Travis was running too much.  The mac tests were particularly slow (sometimes taking over 30 minutes just to run 3.7 with dependencies).  This will make are CI system faster and also slightly reduce the lines of code.
issue
Check formatting of PRs via black#TITLE_END#@dschult , @rossbar This replaces ``pep8speaks`` with just checking that black doesn't need to reformat the code.  If it reformats the code the check fails and the changes are shown in the failed action.  If the linting test fails, the PR author will need to run black on their local branch, commit the changes, and push to their remote branch.  I also updated to the newest release of ``black`` and ``pre-commit``.  There are several files that no longer conform to the black defaults.  So the lint test is failing.  I will fix that before this is merged (i.e., once folks have seen what this looks like when it fails).  Hopefully, this will be the end of us accidentally checking in code that isn't formatted by black using the default settings.
issue
Update sphinx#TITLE_END#The previous version had an error that was preventing bridges from being autodocumented.
issue
WIP: Bad style#TITLE_END#@dschult Check out what automatically happened after https://github.com/networkx/networkx/pull/3669#issuecomment-544052359.  However, https://github.com/networkx/networkx/pull/3669#issuecomment-544052593 didn't seem to do anything, but the second time https://github.com/networkx/networkx/pull/3669#issuecomment-544094470 worked.  Maybe I just did it too fast.  You may want to take a quick look at this: https://github.com/OrkoHunter/pep8speaks/#miscellaneous-features  Here is the configuration file:  https://github.com/networkx/networkx/blob/master/.pep8speaks.yml  I set it up to have lines up to 100 characters (that lets me have to text files side by side on my laptop monitor and see everything fine).  I also have it ignoring `E402 module level import not at top of file`, but feel free to add to the list if the reports are annoying.
issue
Install Python after updating brew#TITLE_END#> Formulae that declare an unconditional dependency on the "python" formula are bottled against Homebrew’s Python 3.x and require it to be installed.  ``graphviz``  declares an unconditional dependency on the "python", which is now 3.8 by default.  And  > WARNING: When you brew install formulae that provide Python bindings, you should not be in an active virtual environment.  So I moved the brew install before we create the venv.  NOTE:  Quotes are from https://docs.brew.sh/Homebrew-and-Python
issue
Use newer osx on travis#TITLE_END#Closes #2614.
issue
Format python in docstrings#TITLE_END#@dschult @rossbar This started as an attempt to run black on the docstrings.  When I tried to do that, I noticed that several files no longer were formatted according to black (fb9bea4).  Then I ran black on the docstrings and incorrectly converted a couple docstrings to f-strings (dfe958d).   I also did some manual cleanup and then quieted some pytest warnings.  I looked at everything fairly closely and am reasonably confident this didn't mess anything up.  I would like to get this merged soon, so let me know if this looks OK.  We should set up the CI system to automatically run black on the code (and maybe on the docstrings) on each PR soon.
issue
WIP: Install optional deps for osx build#TITLE_END#This PR enables testing OSX with the optional requirements (see ``requirements/extras.txt``) installed.  @dschult Do you have any thoughts about how to fix the resulting error:  ``` ======================================================================  FAIL: test_agraph.TestAGraph.testMultiDirected  ----------------------------------------------------------------------  Traceback (most recent call last):    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/nose/case.py", line 198, in runTest      self.test(*self.arg)    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/drawing/tests/test_agraph.py", line 69, in testMultiDirected      self.agraph_checks(nx.MultiDiGraph())    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/drawing/tests/test_agraph.py", line 36, in agraph_checks      self.assert_equal(G, H)    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/drawing/tests/test_agraph.py", line 29, in assert_equal      assert_edges_equal(G1.edges(), G2.edges())    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/testing/utils.py", line 43, in assert_edges_equal      assert_equal(c1, c2)  AssertionError: 4 != 3      '4 != 3' = '%s != %s' % _common_shorten_repr(4, 3)      '4 != 3' = self._formatMessage('4 != 3', '4 != 3')  >>  raise self.failureException('4 != 3')        ======================================================================  FAIL: test_agraph.TestAGraph.testMultiUndirected  ----------------------------------------------------------------------  Traceback (most recent call last):    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/nose/case.py", line 198, in runTest      self.test(*self.arg)    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/drawing/tests/test_agraph.py", line 66, in testMultiUndirected      self.agraph_checks(nx.MultiGraph())    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/drawing/tests/test_agraph.py", line 36, in agraph_checks      self.assert_equal(G, H)    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/drawing/tests/test_agraph.py", line 29, in assert_equal      assert_edges_equal(G1.edges(), G2.edges())    File "/Users/travis/build/networkx/networkx/venv/lib/python3.6/site-packages/networkx/testing/utils.py", line 43, in assert_edges_equal      assert_equal(c1, c2)  AssertionError: 4 != 3      '4 != 3' = '%s != %s' % _common_shorten_repr(4, 3)      '4 != 3' = self._formatMessage('4 != 3', '4 != 3')  >>  raise self.failureException('4 != 3') ```  I am also not sure why the shapefile tests are being skipped: ``` SKIP: OGR not available SKIP: ogr not available. ``` According to ``pip list``,  ``` GDAL (1.11.2) ``` is installed.  I'll look into this, but may need some help with the above tracebacks.
issue
Add links to data files#TITLE_END#Fix #3692.  I started by, for example, adding a line like ``` The data file can be found at:  - https://github.com/networkx/networkx/blob/master/examples/drawing/sampson_data.zip ``` to `plot_sampson.py`.   I also removed several `try` and `except` import blocks.  For example, I replaced things like ``` try:     import pygraphviz     from networkx.drawing.nx_agraph import graphviz_layout except ImportError:     try:         import pydot         from networkx.drawing.nx_pydot import graphviz_layout     except ImportError:         raise ImportError("This example needs Graphviz and either PyGraphviz or pydot") ``` with ``` # This example needs Graphviz and either PyGraphviz or pydot # from networkx.drawing.nx_pydot import graphviz_layout from networkx.drawing.nx_agraph import graphviz_layout ```  There are also a few other miscellaneous changes.
issue
Remove boiler plate from top of modules#TITLE_END#The copyright and author stuff is not necessary, out-of-date, and inconsistent.  It takes up visual space and is a pain to police everyone doing the same thing on the top of the module.  Git handles authorship in a comprehensive and authoritative way. The LICENSE.txt file applies to all project code.
issue
Remove old Python 2 code#TITLE_END#This removes some of the last remaining bits of Python 2 support.  @dschult Should we deprecate `literal_stringizer` and `literal_destringizer` in `networkx/readwrite/gml.py` (and remove it in nx 2.6)?  According to the documentation, ``` For better interoperability of data generated by Python 2 and Python 3, we've provided `literal_stringizer` and `literal_destringizer`. ```
issue
Use canonical url to help search engines#TITLE_END#This should help search engines return the stable docs as the canonical source.
issue
WIP: Fix matplotlib deprecation#TITLE_END#Fix #3694.  The test was added b/c of #3295.  The graph ``` G = nx.path_graph(3, create_using=nx.MultiDiGraph) ``` I made the third node have size 0.  Does that seem reasonable?
issue
Enable ThinGraph tests#TITLE_END#@dschult I mentioned this problem in a previous PR.  I decided to repackage the issue in this PR and merge all the other changes in the previous PR.  I made the class names start with Test so pytest collects it to run.  I also changed from nose style `setUp` to pytest style `setup_method`.  Any idea how to fix this?
issue
Deprecate Python 2/3 compatibility code#TITLE_END#See discussion here #3715.
issue
CI refactor#TITLE_END#My goal is to make the tests faster and to run more tests in more configurations.  ## Slow tests  Before changing anything, the 9 slowest tests account for over half the test time  ``` ========================= slowest 10 test durations =========================== 51.69s call     algorithms/flow/tests/test_gomory_hu.py::TestGomoryHuTree::test_les_miserables_graph_cutset 36.20s call     algorithms/connectivity/tests/test_kcomponents.py::test_torrents_and_ferraro_graph 25.45s call     algorithms/connectivity/tests/test_kcutsets.py::test_alternative_flow_functions 14.92s call     algorithms/connectivity/tests/test_kcutsets.py::test_torrents_and_ferraro_graph 11.97s call     algorithms/connectivity/tests/test_kcomponents.py::test_shell 8.11s call     algorithms/flow/tests/test_maxflow_large_graph.py::TestMaxflowLargeGraph::test_gw1 7.20s call     algorithms/connectivity/tests/test_kcomponents.py::test_random_gnp 5.28s call     tests/test_all_random_functions.py::test_rng_interface 5.11s call     algorithms/similarity.py::networkx.algorithms.similarity.optimal_edit_paths 4.39s call     algorithms/connectivity/tests/test_cuts.py::test_node_cutset_random_graphs ========= 4341 passed, 3 skipped, 21974 warnings in 300.20s (0:05:00) ========== ``` If we skip those 9 slow tests, we have ``` ========================= slowest 10 test durations =========================== 4.45s call     algorithms/connectivity/tests/test_cuts.py::test_node_cutset_random_graphs 3.78s call     algorithms/flow/tests/test_gomory_hu.py::TestGomoryHuTree::test_davis_southern_women_graph 3.61s call     drawing/tests/test_layout.py::TestLayout::test_smoke_int 3.61s call     drawing/tests/test_layout.py::TestLayout::test_fixed_node_fruchterman_reingold 3.59s call     algorithms/flow/tests/test_gomory_hu.py::TestGomoryHuTree::test_karate_club_graph 2.94s call     algorithms/connectivity/tests/test_connectivity.py::test_articulation_points 2.84s call     algorithms/approximation/tests/test_kcomponents.py::test_example_1 2.81s call     algorithms/approximation/tests/test_kcomponents.py::test_example_1_detail_3_and_4 2.73s call     algorithms/approximation/tests/test_kcomponents.py::test_torrents_and_ferraro_graph 2.61s call     algorithms/connectivity/tests/test_kcutsets.py::test_shell ========= 4333 passed, 11 skipped, 21397 warnings in 136.15s (0:02:16) ========= ```  Do we need to skip all these tests or can we make them faster?  For instance, instead of skipping  ``` algorithms/similarity.py::networkx.algorithms.similarity.optimal_edit_paths ``` I changed ```     >>> G1 = nx.cycle_graph(6)     >>> G2 = nx.wheel_graph(7)     >>> paths, cost = nx.optimal_edit_paths(G1, G2)     >>> len(paths)     84     >>> cost     7.0 ``` to ```     >>> G1 = nx.cycle_graph(4)     >>> G2 = nx.wheel_graph(5)     >>> paths, cost = nx.optimal_edit_paths(G1, G2)     >>> len(paths)     40     >>> cost     5.0 ``` since ``` In [5]: %%timeit      ...:     >>> G1 = nx.cycle_graph(6)     ...:     >>> G2 = nx.wheel_graph(7)     ...:     >>> paths, cost = nx.optimal_edit_paths(G1, G2)     ...:                                                                                                                                                                                                              4.73 s ± 23.3 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)  In [6]: %%timeit     ...:     >>> G1 = nx.cycle_graph(4)     ...:     >>> G2 = nx.wheel_graph(5)     ...:     >>> paths, cost = nx.optimal_edit_paths(G1, G2)     ...:                                                                                                                                                                                                              221 ms ± 6.46 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) ``` Does that seem reasonable?  Can we speed up some of the other tests, rather than skipping them?  ## Running tests on more configurations  I also split `requirements/extras.txt` into easy to install `requirements/optional.txt` and harder to install `requirements/extras.txt`.  Then I made everything, but pypy install  `requirements/optional.txt`.  This means that everything (but pypi) is now testing code that uses numpy, scipy, matplotlib, pandas, yaml, or lxml.
issue
Link to files needed for example#TITLE_END#Fix #3751.
issue
Improve test coverage#TITLE_END#Preparing for #3719.
issue
Py36+ updates#TITLE_END#This upgrades the syntax to Python 3.6 using two automated tools: [fstringify](https://github.com/jacktasia/fstringify) and [pyupgrade](https://github.com/asottile/pyupgrade).  @dschult We have a bunch of code that uses older syntax.  This upgrades the code to use new syntax.  I know we normally don't do this type of thing, but moving from Python 2 to 3.6 is a bit unusual.  I am fairly confident that this doesn't break anything.  It also makes the code shorter, more readable, and more modern.  It should also make the code slightly faster.  It doesn't get everything, since the automated tools are a bit conservative.  But it greatly reduces the number of things that we will need to fix by hand.  If this seems reasonable to you, I will also try to take care of most of the remaining updates (mostly fstring updates) by hand.  
issue
Items from closed tickets and old wiki to be reviewed#TITLE_END#We need to go through these items and decide what to keep, what to discard, and where to put it.
issue
Update links to Py3 docs#TITLE_END#Closes #4006.
issue
Add URLs/banner/titlebar to documentation#TITLE_END#Closes #3998 and adds some stubs pertaining to #2730.
issue
Add roadmap#TITLE_END#We need a roadmap for the  NumFOCUS application Ross is preparing.  I have been meaning to draft this for a while, but this is good motivation.  It is based in part on things we've been discussing as well as some things from the CZI proposal.  I am hoping that at least @dschult and @rossbar can carefully review this before Thursday.  We can discuss it in more depth on Thursday.  I would like to merge this in about a week, so it would be good to have a few iterations on it before then.  I think it is about the right length and should perhaps be shortened a bit.  Please feel free to remove things you aren't interested in.  If I missed anything major that we want, please feel free to push changes to my branch.  It is a living document, so we will add and remove stuff later as desired.
issue
Deprecate nx_yaml#TITLE_END#See #4283.
issue
Homepage#TITLE_END#<!-- Please run black to format your code.  For more information, see: - https://networkx.github.io/documentation/latest/developer/contribute.html --> 
issue
Add simple graph w/ manual layout#TITLE_END#Adding simple figure I made for the pydata global talk.
issue
Improve readwrite test coverage#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Deprecate gpickle#TITLE_END#See #4283.
issue
Test on Python 3.9#TITLE_END#3.9 wheels on PyPI  - [x] numpy 1.19.3 - [x] scipy 1.5.4 https://github.com/scipy/scipy/pull/12961 - [x] matplotlib 3.3.3 https://github.com/matplotlib/matplotlib/pull/18842 - [x] pandas 1.1.3
issue
Sphinx33#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Cleanup algebraicconnectivity#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use GH actions for Linux CI#TITLE_END#@rossbar This is ready to go.  There is more to do in a follow-up PR: - finish deploy doc - maybe get rid of appveyor (add ``Windows`` to ``os: [Ubuntu, macOS]`` in ``test-default.txt`` - remove travis (and maybe appveyor)  But I would like to see how well this works first.  And this should give us more time with Travis, since we will only really use it to deploy docs on merge to master.
issue
Fix#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Deprecate nx_shp#TITLE_END#See #3478 , #3479, #3932 , #4107, #4205, and https://github.com/geopandas/geopandas/issues/1592.
issue
Add gene-gene network#TITLE_END#@ericmjl @rossbar @dschult  I decided to add a biological network example to the PyData global slidedeck.  I want all the figures to be from the gallery, so I am adding this example.  I found the dataset online and I don't know much about it.  It would be great if we could improve it before tomorrow evening when I will record the talk.  For example, I know biologists have used degree and betweenness centrality in network analysis, but I don't know if it makes sense here.  It doesn't have to make sense since we aren't claiming anything; but it would be nice.  Would it make more sense to have ```   size = degree   color = betweenness centrality ``` I tried and it didn't look great.  But maybe with different settings, it would.  Any other ideas?  Is there a better color gradient or way to plot this?
issue
Remove xml import checks#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Use matrix multiplication operator#TITLE_END#This mainly about using the matrix multiplication operator ``@``.  It also makes the ``numpy/scipy`` imports more consistent.
issue
Ignore expected warnings#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Drop Py3.6 support per NEP 29#TITLE_END#<!-- Please run black to format your code. See https://networkx.org/documentation/latest/developer/contribute.html for details. --> 
issue
Build docs for deployment on Travis CI#TITLE_END#Now Travis will only build the docs when it needs to deploy them after the PR is merged to master.  This will make Travis run the tests on PRs faster and simplifies the travis config.
issue
Remove / replace old sparse code#TITLE_END#We should remove and replace ``scikits.sparse`` from ``linalg/algebraicconnectivity.py`` and ``linalg/tests/test_algebraic_connectivity.py``.
issue
Viewable documentation builds for PRs#TITLE_END#Travis CI supports uploading artifacts, but  > Note that the artifacts addon is not available for pull request builds.  So I think going with Circle CI to build the docs on PRs seems like a good solution.  Since you are familiar with how NumPy does it, it should be straightforward.  It will also speed up our Travis CI time.  It might be a good idea to add more checks if possible. For instance, sphinx can check that links aren't broken. There maybe other stuff that can be checked. If possible it would be nice to somehow automatically check that new functions have been added to the documentation and, if not, to post a note on the PR. It would be nice to get this in sooner, rather than later. So you may want to do the easiest things in one PR and create a separate PR for additional checks.  You should double check that I haven't missed anything, but here are some pointers:  In ``.travisci``, we can remove ```     - os: linux       python: 3.7       env:       - OPTIONAL_DEPS=1       - BUILD_DOCS=1       - DEPLOY_DOCS=1       addons:         apt:           packages:           - libgdal-dev           - graphviz           - texlive           - texlive-latex-extra           - latexmk ``` and ``` script:   - if [[ "${BUILD_DOCS}" == 1 ]]; then       source tools/travis/build_docs.sh;     else       source tools/travis/script.sh;     fi  after_success:   - if [[ "${REPORT_COVERAGE}" == 1 ]]; then       codecov;     fi   - if [[ "${BUILD_DOCS}" == 1 && "${DEPLOY_DOCS}" == 1 ]]; then       source tools/travis/deploy_docs.sh;     fi ``` can be replaced with ``` script:   - source tools/travis/script.sh  after_success:   - if [[ "${REPORT_COVERAGE}" == 1 ]]; then       codecov;     fi ```  You should also remove: - tools/travis/build_docs.sh - tools/travis/deploy_docs.sh  The basic recipe for building docs should be something like: ``` ## Depending on what OS circle CI you will need somehow install ## libgdal-dev graphviz texlive texlive-latex-extra latexmk  # Install python3 -m venv venv source venv/bin/activate pip install --upgrade pip pip install -r requirements.txt pip install -r requirements/optional.txt pip install -r requirements/extras.txt pip install -r requirements/doc.txt pip install .  # Build docs cd doc make html make latexpdf LATEXMKOPTS="-silent" cd ..  # Deploy docs on PR # I don't know how to do this  # Deploy docs on master # somehow set up a deploy key (see tools/travis/deploy_docs.sh)  # Push the latest docs to the networkx/documentation repo (gh-pages branch) GH_REF=git@github.com:networkx/documentation.git echo "-- pushing docs --"  # The next two lines should be updated ... git config --global user.email "travis@travis-ci.com" git config --global user.name "NetworkX Travis Bot"  cd doc git clone --quiet --branch=gh-pages --depth=1 ${GH_REF} ghpages_build cd ghpages_build  # Overwrite previous commit git rm -r latest cp -a ../build/html latest cp -a ../build/latex/networkx_reference.pdf latest/_downloads/. git add latest git commit -m "Deploy GitHub Pages"  git push --force --quiet "${GH_REF}" gh-pages > /dev/null 2>&1 ```
issue
Simplify top-level directory#TITLE_END#@dschult , @rossbar My goal is to highlight the important documents for contributors by moving some details only needed by core developers down the hierarchy.  I ended up adding some of those documents to the developer guide, which we probably should do regardless of whether we move the files.
issue
Silence known warnings#TITLE_END#@dschult This PR silences a ton of warnings in the test reports.   We need to fix them eventually, but they make it hard to see new warnings.  Please feel free to merge this once you've looked over the change.
issue
WIP: Fix scipy deprecation warnings#TITLE_END#@dschult This PR replaces things like `scipy.array` with `numpy.array`.  SciPy will remove these when they eventually release 2.0 and they are making noise in our test suite now.  Everything is straightforward except `scipy.sqrt`, which maps to `numpy.lib.scimath.sqrt` instead of `numpy.sqrt`.  Here is the difference: ``` >>> import numpy as np   >>> import scipy as sp       >>> sp.sqrt(-1) 1j >>> np.lib.scimath.sqrt(-1)    1j >>> np.sqrt(-1)   __main__:1: RuntimeWarning: invalid value encountered in sqrt nan ```  Should we continue allowing negative square roots in this context?  I suspect not and am tempted to use `numpy.sqrt`.  I highlighted the two instances below.
issue
Run doctest without optional dependencies#TITLE_END#Pytest isn't running fixtures like ``` # fixture for pytest def setup_module(module):     import pytest     numpy = pytest.importorskip('numpy')     scipy = pytest.importorskip('scipy')     pandas = pytest.importorskip('pandas') ``` in `networkx/convert_matrix.py` or ``` # fixture for pytest def setup_module(module):     import pytest     yaml = pytest.importorskip('yaml')   def teardown_module(module):     import os     os.unlink('test.yaml') ``` in `networkx/readwrite/nx_yaml.py`. 
issue
Fixes issue 3610: Bug in version attribute of gexf.py#TITLE_END#Fix #3659, Fix #3610
issue
Pep8#TITLE_END#PEP8 fixes, which also reenable 4 tests (pytest requires tests have unique names).  I made multiple commits to make it easier to review the changes.  Before merging, I will collapse the pep8 commits.  Before ``` $ flake8 --statistics --count -qq 2     E111 indentation is not a multiple of four 2     E114 indentation is not a multiple of four (comment) 3     E117 over-indented (comment) 3     E124 closing bracket does not match visual indentation 14    E127 continuation line over-indented for visual indent 8     E128 continuation line under-indented for visual indent 2     E201 whitespace after '[' 1     E225 missing whitespace around operator 5     E231 missing whitespace after ',' 2     E251 unexpected spaces around keyword / parameter equals 2     E261 at least two spaces before inline comment 95    E265 block comment should start with '# ' 1     E272 multiple spaces before keyword 5     E302 expected 2 blank lines, found 1 1     E303 too many blank lines (2) 4     E306 expected 1 blank line before a nested definition, found 0 87    E402 module level import not at top of file 867   E501 line too long (91 > 79 characters) 1     E502 the backslash is redundant between brackets 9     E711 comparison to None should be 'if cond is None:' 29    E712 comparison to False should be 'if cond is False:' or 'if not cond:' 6     E713 test for membership should be 'not in' 3     E721 do not compare types, use 'isinstance()' 42    E722 do not use bare 'except' 2     E731 do not assign a lambda expression, use a def 48    E741 ambiguous variable name 'l' 370   F401 'networkx.exception.*' imported but unused 276   F403 'from networkx.exception import *' used; unable to detect undefined names 516   F405 'complete_bipartite_graph' may be undefined, or defined from star imports: networkx.algorithms.bipartite.generators 2     F632 use ==/!= to compare str, bytes, and int literals 12    F811 redefinition of unused 'nx' from line 4 13    F821 undefined name 'maxuppernode' 231   F841 local variable 'density' is assigned to but never used 133   W291 trailing whitespace 1     W292 no newline at end of file 20    W293 blank line contains whitespace 2818 ```  Now ``` $ flake8 --statistics --count -qq 94    E402 module level import not at top of file 874   E501 line too long (91 > 79 characters) 1     E713 test for membership should be 'not in' 3     E721 do not compare types, use 'isinstance()' 38    E722 do not use bare 'except' 48    E741 ambiguous variable name 'l' 320   F401 'networkx.exception.*' imported but unused 236   F403 'from networkx.exception import *' used; unable to detect undefined names 10    F405 'greedy_color' may be undefined, or defined from star imports: networkx.algorithms.coloring.greedy_coloring 3     F811 redefinition of unused 'nx' from line 4 13    F821 undefined name 'maxuppernode' 231   F841 local variable 'density' is assigned to but never used 2     W291 trailing whitespace 1873 ```
issue
Fix test_gexf to handle XML default serialisation order #TITLE_END#This fixes the following errors:  ``` ======================================================================  FAIL: test_gexf.TestGEXF.test_edge_id_construct  ----------------------------------------------------------------------  Traceback (most recent call last):    File "/home/travis/venv/lib/python3.8/site-packages/nose/case.py", line 198, in runTest      self.test(*self.arg)    File "/home/travis/venv/lib/python3.8/site-packages/networkx/readwrite/tests/test_gexf.py", line 339, in test_edge_id_construct      assert_equal(expected, obtained)  AssertionError: '<gexf version="1.2" xmlns="http://www.gexf.net/[660 chars]exf>' != '<gexf xmlns="http://www.gexf.net/1.2draft" xmln[660 chars]exf>'  Diff is 1440 characters long. Set self.maxDiff to None to see it.      """Fail immediately, with the given message."""  >>  raise self.failureException('\'<gexf version="1.2" xmlns="http://www.gexf.net/[660 chars]exf>\' != \'<gexf xmlns="http://www.gexf.net/1.2draft" xmln[660 chars]exf>\'\nDiff is 1440 characters long. Set self.maxDiff to None to see it.')         ======================================================================  FAIL: test_gexf.TestGEXF.test_write_with_node_attributes  ----------------------------------------------------------------------  Traceback (most recent call last):    File "/home/travis/venv/lib/python3.8/site-packages/nose/case.py", line 198, in runTest      self.test(*self.arg)    File "/home/travis/venv/lib/python3.8/site-packages/networkx/readwrite/tests/test_gexf.py", line 314, in test_write_with_node_attributes      assert_equal(expected, obtained)  AssertionError: '<gexf version="1.2" xmlns="http://www.gexf.net/[783 chars]exf>' != '<gexf xmlns="http://www.gexf.net/1.2draft" xmln[783 chars]exf>'  Diff is 2123 characters long. Set self.maxDiff to None to see it.      """Fail immediately, with the given message."""  >>  raise self.failureException('\'<gexf version="1.2" xmlns="http://www.gexf.net/[783 chars]exf>\' != \'<gexf xmlns="http://www.gexf.net/1.2draft" xmln[783 chars]exf>\'\nDiff is 2123 characters long. Set self.maxDiff to None to see it.') ```  The issue is that  > Prior to Python 3.8, the serialisation order of the XML attributes of elements was artificially made predictable by sorting the attributes by their name. Based on the now guaranteed ordering of dicts, this arbitrary reordering was removed in Python 3.8 to preserve the order in which attributes were originally parsed or created by user code.  https://docs.python.org/3.8/library/xml.etree.elementtree.html https://bugs.python.org/issue34160     
issue
Add governance/values/nexp/wishlist#TITLE_END#@rossbar This is adapted from scikit-image and numpy with input from @dschult and @hagberg.  It would be great if you could review this.  The tentative plan is to merge this with master soon, but leave the nxeps in draft status.  I would like to keep this pretty simple.  So, it would be great if you could find places where we should shorten or tighten the text.  We will revisit the governance structure in a few months after we've had some experience with it and have more people in the conversation.
issue
Update apt-get on circleci image#TITLE_END#We were still getting errors on circleci.  The errors end with ``` E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? ```  I don't use Debian, so I am just guessing:  I suspect the image has an out-of-date apt cache and it is trying to install things with old/incorrect names.  Running ``sudo apt-get update`` updates the list of available packages and their versions.  So I suspect it will fix issues like this [one](https://app.circleci.com/pipelines/github/networkx/networkx/74/workflows/8494bd33-b0ab-48e0-83e3-e3f57961ec30/jobs/82) where it states: ``` E: Failed to fetch http://security.debian.org/debian-security/pool/updates/main/r/ruby2.5/libruby2.5_2.5.5-3+deb10u1_amd64.deb  404  Not Found [IP: 199.232.64.204 80] ``` When I went to the website, it had ``libruby2.5_2.5.5-3+deb10u2_amd64.deb `` but not ``libruby2.5_2.5.5-3+deb10u1_amd64.deb``.  
issue
Update dependencies#TITLE_END#Fix #3786
issue
Prepare for turning chordal_graph_cliques into a generator#TITLE_END#See #4004.
issue
Test Python 3.8 with AppVeyor#TITLE_END#Closes  #3637.
issue
Document version naming policy#TITLE_END#Closes #3374 
issue
Fix error message#TITLE_END#Closes #3334 
issue
Update pyyaml and fix yaml.load(input) deprecation warning#TITLE_END#https://github.com/yaml/pyyaml/wiki/PyYAML-yaml.load(input)-Deprecation
issue
3.7 default and drop 2.7 for CI#TITLE_END#Closes #3212
issue
Update dependencies and test 3.7 on xenial#TITLE_END#Xenial is not officially supported yet.  See https://github.com/travis-ci/travis-ci/issues/9815
issue
Update contributor guide#TITLE_END#In addition to fixing some minor formatting and editing stuff, here are the main changes I made: - I moved setting up the build environment to the initial setup section. - In "Divergence from ``upstream master``", we used to recommend rebasing.  It now says to merge.  I borrowed text from ``scikit-image``. - I put all the deprecation information in one location ``doc/developer/deprecations.rst``.
issue
Use pytest instead of nose#TITLE_END#We should probably move to ``pytest`` at some point in the near future.  Development of nose has stopped and they recommend moving to a new package.  NumPy and SciPy have switched to pytest: https://docs.scipy.org/doc/numpy-1.15.0/reference/testing.html
issue
TravisCI fix#TITLE_END#Fixes #3030.  I couldn't reproduce the nbconvert / libpng error.  But it looks like it may no longer be a problem.  However, a couple of days ago pyyaml 4.1 was released and it is breaking things.  I am going to merge this now, so that there is less ci noise.  I will look into the 4.1 issue soon.
issue
Use pyyaml updates#TITLE_END#This is on hold pending the 4.2 release:   https://github.com/yaml/pyyaml/issues/193  They removed 4.1 and released 3.13.  The next release will be 4.2, I believe.
issue
Add example of spectral embedding of the grid graph#TITLE_END#Here is what it looks like: ![sphx_glr_plot_spectral_grid_001](https://user-images.githubusercontent.com/123428/31066413-b05476de-a701-11e7-8207-0537fd442ecb.png)
issue
MRG: Remove ``to_pandas_dataframe`` and ``from_pandas_dataframe``#TITLE_END#See PR #2558.
issue
Temporarily disable sphinx doctests#TITLE_END#See Legacy array printing for NumPy 1.14+ (#2810)  That fix worked for nose, but doesn't seem to work for sphinx.
issue
Legacy array printing for NumPy 1.14+#TITLE_END#https://github.com/numpy/numpy/blob/master/doc/release/1.14.0-notes.rst  This fixes a bunch of failures like: ``` File "/home/travis/venv/lib/python2.7/site-packages/networkx/convert_matrix.py", line 1053, in networkx.convert_matrix.to_numpy_array Failed example:     A Expected:     array([[ 1.]]) Got:     array([[1.]]) ```
issue
MRG: Remove ``bellman_ford``#TITLE_END#See commit 6562ad8d6.
issue
Use isinstance in is_string_like#TITLE_END#See https://github.com/matplotlib/matplotlib/pull/8011
issue
Refactor travis tests and deploy docs with travis#TITLE_END#See - https://travis-ci.org/networkx/networkx/builds/271948102 - https://networkx.github.io/dev-docs/  This PR accomplishes two main goals:  1. Travis-ci now tests that our documentation builds without error. 2. Travis-ci can now push the built docs to GitHub pages when a    build is triggered on the master branch.  I also changed the travis-ci tests so that we only install packages when necessary and only generate a coverage report when it will be uploaded via codecov. This substantial speeds up the tests so that we are able to test more things now (e.g., whether the docs build). Generating the coverage reports, in particular, was costly (i.e., it roughly doubled or tripled the time it takes the test suite to run). I no longer test extra dependencies on 3.4 and 3.5 (since I suspect they aren't often as useful and I suspect that most folks on Python 3 are using 3.6 anyway), but I can easily add them back (though they will slightly increase the testing time).  To deploy the built docs on GitHub pages, I generated an ed25519 deploy key using ``ssh-keygen``. I added the ``deploy-key.pub`` contents to the ``networkx/dev-docs`` repo’s settings under ``Settings -> Deploy Keys``. I encrypted the private deploy key with the travis-ci symmetric key using ``travis encrypt-file deploy-key``. You can see how I use it in ``tools/travis/deploy_docs.sh``.  I haven't been able to directly test this without triggering a build on the master branch (however, I could temporarily have it deploy from the PR by changing the conditional at the top of ``tools/travis/deploy_docs.sh``). If we merge this, we should leave ReadTheDocs working until we are certain this pushes the docs to GitHub pages and that we like the results. (We will need to update a few links on http://networkx.github.io/documentation/ and https://networkx.github.io/ as well.) I tested it by hand and you can see the results here:   https://networkx.github.io/dev-docs/ Once we verify this PR works as I intended, we can shut down the ReadTheDocs site and clean up a few things I left behind (e.g., ``doc/requirements.txt``).  Initially I looked into pushing to the ``gh-pages`` branch of this repo:   http://networkx.github.io/documentation/ But that repo is huge and takes a long time to clone. We can add the stable 2.0 docs (and any other missing builds) there. Alternatively, we could create a new repo (e.g., networkx/docs) for 1.11 and future docs. This would leave the networkx/documentation repo as it is.  (There were other options, I looked into and that we could still use. Travis-ci has builtin  support: https://docs.travis-ci.com/user/deployment/pages/ However, they use a personal ``GITHUB_TOKEN``, which has access to all of the repositories that that person has access to (and it isn't as flexible as the approach I used).  If we want to use that method, I would recommend creating a new machine user account on GitHub that only has access to one repo. However, that seems like overkill to me. There is also this project (developed by the sympy folks): https://drdoctr.github.io/doctr/ That seems like a big project for the little bit of work necessary to accomplish what we want and it isn't as flexible as the current approach.)  This isn't exactly what I did, but this blog post describes something similar to what I did: https://djw8605.github.io/2017/02/08/deploying-docs-on-github-with-travisci/ If this PR seems reasonable, I will write up something similar except with the steps I followed. (That could be useful as documentation for us and might be helpful for other projects.) Setting up the keys is a one-time deal, which we won't need to bother with again. The key pair I generated will only allow travis-ci (or someone with the travis-ci key) to push to ``networkx/dev-docs``. We don't need to keep a copy of the private key, so I could delete it once we verify that this works.  If we go with this method, then we can control the documentation build by modifying ``tools/travis/deploy_docs.sh``. It is a pretty straightforward bash script and it should be obvious how you could do whatever you want (e.g., we could use the various text editing command-line tools on Linux to correct or modify anything we want, we could grab additional files from anywhere on the web and copy them into any directory we want, etc.).  I've spent some time reorganizing the commits into somewhat reasonable chunks of work, so you may want to review the changes commit by commit. However, I suspect looking at the full changes will be reasonable as well.  This is a fairly big change to our doc system and one we probably don't want to immediately change again. So I would be happy to get a lot of tough feedback.  Thoughts?  Fix #2646.
issue
Readthedocs pain#TITLE_END#Readthedocs (RTD) is a pain to work with and keeps having timeout errors.  I started to look into whether we can build the docs on our own and push them to RTD instead of having it built on the site.  It would also make more sense to have the doc build process as part of our CI process, rather than only checked after the fact.  Has there been any discussion about moving away from RTD before (at least the build process)?  If so, was there a reason not to move?  I assume it is too late to move back to hosting the docs on github, but I thought I'd check since it might be easier to do.
issue
Deprecate node#TITLE_END#This is ready to merge.
issue
Deprecation warnings for G.node and G.edge?#TITLE_END#@dschult , @hagberg While trying to get scikit-image working with 2.0, I've started wondering if we should provide ``G.node`` and ``G.edge`` for backward compatibility until we release 2.1 or so.  Here is the scikit-image PR: https://github.com/scikit-image/scikit-image/pull/2766
issue
Prep beta release#TITLE_END#Last PR before beta release later today.
issue
WIP: Fix typo#TITLE_END#Found while adding tests in PR #2617
issue
WIP: Removed draw_nx#TITLE_END#Deprecated in e222c41b on Dec 29, 2005.
issue
Use texext for math_dollar#TITLE_END#This is **not** ready to merge.  Testing a prerelease of texext, which should fix the bug I ran into in PR #2588 and reverted in f511efa.  Once I verify things work, I will let upstream know they can make a new release.
issue
Create separate functions for df as edge-lists and adjacency matrices#TITLE_END#Fixes #2464.  Some related commits: 52eb3d3: from_pandas_dataframe and to_pandas_dataframe were added to work with adjacency matrix. f0c22dd: from_pandas_dataframe was changed to work with edge-lists, but to_pandas_dataframe was not changed.
issue
Fix docs#TITLE_END#Changes mostly due to PR #2604.
issue
Fix examples#TITLE_END#Changes due to PR #2604
issue
Travis refactor#TITLE_END#I have done the following:  1. stop running known failing ci for pypy and ironpython 2. use ``virtualenv``/``pip`` instead of ``conda`` 3. moved body of ``before_install`` (``script``) to ``tools/travis/before_install.sh`` (``tools/travis/script.sh``)  I don't think there is much value in running the failing builds.  It takes longer, isn't informative, and makes the build recipes more complicated than they would otherwise be.  Given how long ago these recipes were added, I would likely start from scratch (i.e., I would start by looking at the upstream documentation instead of just modifying the existing code) if I was trying to fix them.   But I haven't seriously looked into whether it would be difficult to get them passing again.  Does this seem reasonable?  If so, I would like to remove the remaining old pypy and ironpython code.  If we want to add these build targets back, I could take another look at it after the 2.0 release.  (If this doesn't seem reasonable, I can just put them back now and leave them failing.)  It is more important for us to test ``virtualenv``/``pip`` than ``conda``.  Pip has become much better, since the conda recipe was added (3 years ago).  For example, the conda recipe starts with a note reading "Workaround for travis-ci/travis-ci#2683" and then has some arcane looking statements.  For ``pip``, here is the entire recipe:  ``` if [[ "${OPTIONAL_DEPS}" == pip ]]; then    # create new empty venv   virtualenv -p python ~/venv   source ~/venv/bin/activate    # needed to build Python binding for GDAL   export CPLUS_INCLUDE_PATH=/usr/include/gdal   export C_INCLUDE_PATH=/usr/include/gdal    # install required packages   pip install --upgrade pip   pip install --retries 3 $PIP_FLAGS -r requirements.txt    # show what's installed   pip list fi ``` I have also run into problems with conda not supporting older versions of Python (e.g., PR #2558 fails because conda doesn't provide new packages for Python 3.4 and the version of pandas is several years old).  Using ``virtualenv``/``pip``  solves this issue as it has support for older versions of Python.  Finally, I moved some of the conditional logic to separate bash scripts.  This doesn't change the functionality and makes the logic of ``.travis.yml`` easier to see.  I have more I plan to do, but I wanted to get some feedback before continuing.  Here are the things I would like to do:  1. completely remove the pypy and ironpython recipes (for now) 2. add an osx build 3. further cleanup code and simplify logic  Thoughts?
issue
WIP: Add note on how to estimate appropriate values for alpha#TITLE_END#Fixes #2307.  I made parallel changes to both ``katz_centrality`` and ``katz_centrality_numpy``.  In particular, I added the sentence ```     You can use ``max(nx.adjacency_spectrum(G))`` to get $\lambda_{\max}$ the largest     eigenvalue of the adjacency matrix. ``` after the sentence (in ``katz_centrality``) ```     The parameter ``alpha`` should be strictly less than the inverse of largest     eigenvalue of the adjacency matrix for the algorithm to converge. ``` and the sentence (in ``katz_centrality_numpy``) ```     The parameter ``alpha`` should be strictly less than the inverse of largest     eigenvalue of the adjacency matrix for there to be a solution. ```  You will also notice that I changed the inline math markup (e.g., ``:math:`\beta` `` became ``$\beta$``).  This uses the ``texext`` Sphinx extension, which I added in PR #2588.  I find the ``dollar_math`` much more readable and familiar when I am working with source files and it renders the same in HTML.
issue
Update migration guide#TITLE_END#This is ready to merge.  Incorporates text from Mridul Seth and closes #2540.
issue
WIP: Enable doctests for timingclasses module#TITLE_END#Enabling doctests, which were skipped per fdc906e4.
issue
Use codecov instead of coveralls#TITLE_END#This is ready to merge.  Codecov has a much nicer interface and better features than coveralls.  ``scipy``, ``scikit-image``, ``scikit-learn``, and ``pandas`` have already switched.  This PR also deletes cruft and has stricter coverage reporting.  The coverage is now 89% (mostly) because I changed ``` branch = False ``` to ``` branch = True ``` in ``.coveragerc``.  The function ``` def <name>():      if <somecase>:         <dosomething>     return <something> ``` has two execution paths through ``if <somecase>:``.  Our tests should cover both paths.  Now we track whether they do.  For example, line 96 on the [``convert.py`` page](https://codecov.io/gh/networkx/networkx/src/0eef781b4e77cc8e02d03d58902437d816ac38bf/networkx/convert.py#L96) is yellow because our tests don't cover all possible paths through this line.  You can read more about branch coverage [here](http://coverage.readthedocs.io/en/latest/branch.html#branch).  I will submit additional PRs to improve test coverage by adding additional test over the new two weeks.  For example, getting annoyed with ``coveralls`` reporting while working on [this](https://github.com/networkx/networkx/pull/2558/commits/33b0fddf7920a80baba90e15f4f8cd32a5e54ec8#diff-2cf221e677cf8fd2435587a6fd0f7971) was what motivated this PR.
issue
I broke the doc builder#TITLE_END#I'll fix this later tonight.
issue
Update sphinx-gallery to v0.1.12#TITLE_END#Use explicit order sortkey to specify the subsection's order within a gallery.
issue
Use nbplot directive#TITLE_END#http://matthew-brett.github.io/nb2plots/
issue
Delete v1.9 and v1.9.1 branches#TITLE_END#They don't have any commits, so the tag is sufficient: - https://github.com/networkx/networkx/tree/v1.9 - https://github.com/networkx/networkx/tree/v1.9.1
issue
Flatten doc hierarchy#TITLE_END#@hagberg , @dschult This is ready to merge.  I flattened the documentation directory structure following the discussion in PR #2054.  I also fixed a couple Sphinx warnings.  Once this is merged, I will create a new PR to finalize the clean ups, to improve the gallery, and to incorporate some of the remaining changes from PR #2054.   Everything worked on readthedocs as far as I can see and the gallery is here:   http://networkx.readthedocs.io/en/latest/auto_examples/index.html I will improve the gallery in the next PR.
issue
Remove confusing sentence from tutorial#TITLE_END#Let me know if you want me to change anything, but I suspect this should be completely non-controversial.
issue
Remove stale reference to pngmath#TITLE_END#Completes fix for #2340 (see commit ffa3e5deb837).  This could be merged as is, but I noticed more cruft in the `conf.py` that I am happy to fix and include in the PR.  For example, there are still references to the old Trac site.   I am not planning to change anything substantial and I suspect nothing I do will be user visible.  Should I include additional Sphinx clean up commits in this PR or would you prefer I create a new PR for that purpose?  Either way, I can commit the changes over the weekend.
issue
Remove duplicate files#TITLE_END#This closes:   atlas example is duplicated in two directories #2046  It is ready to merge.
issue
Ensure _relabel_copy() respects node order of OrderedGraphs#TITLE_END#This fixes #2482 as suggested. @dschult   I added a test, which failed with the previous code and passes with this commit.  Please let me know if I should provide additional tests.  I also made some minor pep8 modifications to the functions I touched. I noticed that both `networkx/relabel.py` and `networkx/tests/test_relabel.py` have additional pep8 violations.  When I edit a file (such as these two) for some other purpose, is it acceptable to take the opportunity to make those files pep8 compliant?  I don't think it is worth making a big deal about pep8 compliance, but I am happy to make things more standard as I go.  For instance, I am happy to make additional pep8 style fixes to this PR before you merge it.  If you don't need any additional tests and would prefer that I resist making additional pep8 style changes outside the functions I've already edited, then this is ready to merge (assuming the CI system doesn't complain). 
issue
Ensure `digraph.reverse` respects hashable objects#TITLE_END#I more or less implemented the suggested test and fix from #2442.  I changed the test from this  ``` self.assertCountEqual(G.nodes(), G.reverse().nodes()) self.assertCountEqual(map(reversed, G.edges()), G.reverse().edges()) ```  to  ``` assert_items_equal(G.nodes(), G.reverse().nodes()) assert (y, x) in G.reverse().edges() ```  Let me know if you have a better idea. 
issue
Fix call to `from_pandas_dataframe` from `to_networkx_graph`#TITLE_END#Fixes #2111.  To make this clean, I decided to make `from_pandas_dataframe` only require one argument by changing the signature from  ``` def from_pandas_dataframe(df, source, target, edge_attr=None,         create_using=None): ```  to  ``` def from_pandas_dataframe(df, source='source', target='target', edge_attr=None,         create_using=None): ```  I added additional tests and expanded a doctest.  I have a few minor cleanups I want to make before this is merged, but I would like to have feedback on the changes I made to the call signature (or anything else) first.
issue
Ensure label in gml output is quoted#TITLE_END#Attempting to fix #2362.   @dschult  I am not confident that my approach is correct.  Would you take a quick look and let me know if this seems like a reasonable start.  Should I add `and key != 'label'` to the blocks of code handling dicts and lists in `stringize` as well?  I wasn't sure how we should handle labels that were more complex than just ints, longs, and floats.  If this seems like the correct approach, the problem I am running into is that the `literal_stringizer` function takes the unicode string ``` u'This is "quoted" and this is a copyright: \xa9' ```  and converts it to the text string ``` 'u\'This is "quoted" and this is a copyright: \\xa9\'' ```  The function `escape` handles the unicode string correctly producing ``` 'This is &#34;quoted&#34; and this is a copyright: &#169;' ``` But the text string becomes ``` "u'This is &#34;quoted&#34; and this is a copyright: \\xa9'" ```  I left some print statements for debugging purposes in for now, but will remove them before finalizing the pull request. Any thoughts?
issue
Add hint to duplicated edge error#TITLE_END#Fixes #2383   It looked to me like modifying the code to automatically detecting a multigraph was a bit involved.  Given the (hopefully) imminent release of networkx-2.0, I decided that adding a hint to the error message would be sufficient for now.  ``` In [1]: import networkx as nx  In [2]: nx.read_gml('polblogs.gml') --------------------------------------------------------------------------- NetworkXError                             Traceback (most recent call last) <ipython-input-2-83bca7fece32> in <module>() ----> 1 nx.read_gml('polblogs.gml')  <decorator-gen-455> in read_gml(path, label, destringizer)  /home/jarrod/src/networkx/networkx/utils/decorators.pyc in _open_file(func, *args, **kwargs)     219         # Finally, we call the original function, making sure to close the fobj.     220         try: --> 221             result = func(*new_args, **kwargs)     222         finally:     223             if close_fobj:  /home/jarrod/src/networkx/networkx/readwrite/gml.py in read_gml(path, label, destringizer)     203             yield line     204  --> 205     G = parse_gml_lines(filter_lines(path), label, destringizer)     206     return G     207   /home/jarrod/src/networkx/networkx/readwrite/gml.py in parse_gml_lines(lines, label, destringizer)     427      428 Hint:  If this is a multigraph, add "multigraph 1" to the header of the file.""" % --> 429                     (i, source, '->' if directed else '--', target))     430         else:     431             key = edge.pop('key', None)  NetworkXError: edge #12757 (1047->1179) is duplicated  Hint:  If this is a multigraph, add "multigraph 1" to the header of the file. ```  Assuming this seems reasonable, this is ready to merge. @dschult 
issue
Update AppVeyor#TITLE_END#This adds Python 3.6 and updates 2.7, 3.3, 3.4, and 3.5 to the current point releases.  I've rebased on master.  This is ready to merge.
issue
How to install#TITLE_END#@hagberg , @dschult I would like to update the INSTALL file.  So far, I moved it to the top of the repository.  If you clone the repository or view it on GitHub, you will look at the root directory first.  Any one looking at the online documentation won't notice a difference.  I would also like to lightly edit the INSTALL text.  For example,  ``` http://scipy.org/Download ``` is from the old Moin site and is now a redirect to ``` https://scipy.org/install.html ```  I would also update some of the pip stuff.  Should I go ahead and draft something for you to comment on?
issue
Doc ordered graph classes#TITLE_END#When I was working on PR #2504, I almost missed the fact that `nx.OrderedMultiGraph` existed and started to implement my own multigraph subclass as suggested in the `nx.MultiGraph` docstring.  This PR documents the existence of the ordered variants so (hopefully) others won't (almost) overlook their existence as well.  I was thinking of removing the examples of creating a ordered graph subclass for the various base graph classes, but wanted feedback first.  (@dschult,  @hagberg)  Instead we could add a line like: ``` Please see `ordered.py` for examples of creating graph subclasses by overwriting the base class `dict` with a dictionary-like object. ```  At the very least, we should add a line something like: ``` This example is provided as part of NetworkX via nx.OrderedGraph. ``` to each of the base graphs' docstrings.  This is only done in `graph.py` currently.  Also, in `doc/source/reference/api_1.10.rst` it states ``` * [`#1314 <https://github.com/networkx/networkx/pull/1314>`_]   Allow overwriting of base class dict with dict-like:   OrderedGraph, ThinGraph, LogGraph, etc. ``` I couldn't figure out what a `LogGraph` is.  Is that a typo? Or is there some obvious meaning I am missing?  Perhaps we could add an example somewhere in the codebase or remove `LogGraph` from the api reference file.
issue
Fix sphinx#TITLE_END#Minor edits to improve readability, make sure everything is in rst format (not md format), and to make sure tutorial follows pep8.  There are a few other cleanups I may make, but I wanted to get some feedback as I go.  I also wondered if the following statement from the tutorial is still true: ``` Note that the drawing package in NetworkX is not yet compatible with Python versions 3.0 and above. ``` I assume this is out-of-date and should be removed. @dschult , @hagberg 
issue
Revise docs#TITLE_END#This is ready to merge.  I finished the last bits of reorganization from #2054.  I fixed broken links identified by ``make linkcheck``.  I did some pep8 fixes on a couple of files I edited for other reasons, and cleaned up ``conf.py``.  I think at this point #2054 can be closed.  The remaining issues have there own tickets now.
issue
Ensure `make html` doesn't fail build on exit#TITLE_END#Mark `parallel_betweenness` as a known failure
issue
Remove deprecated code#TITLE_END#This removes deprecated code marked for removal in 2.0 or code that was deprecated more than 4 years ago.  I also marked 2.1 as the removal release for ``bellman_ford``.  I still need to add a note to ``doc/release/release_2.0.rst`` and to ``doc/news.rst``.
issue
Drop 3.3 support#TITLE_END#While all our tests currently work with Python 3.3, I propose we officially drop support for it before the 2.0 release.  ``numpy``, ``scipy``, ``matplotlib``, ``pandas``, and many other packages have already dropped Python 3.3 support in their previous releases.  3.3.6 is from 2014 and I doubt there will be another release as its end-of-life is 2017-09-29.  Python 3.3 use was negligible a year ago (and has presumably decreased in popularity as packages have dropped support for it): - https://github.com/pypa/pip/issues/3796 - http://www.randalolson.com/2016/09/03/python-2-7-still-reigns-supreme-in-pip-installs/  Our CI checks will be faster and we will have to worry about less versions of python for bug reports.  Does this seem reasonable? 
issue
pypy3 failing under travisci Trusty environment#TITLE_END#For example,   https://travis-ci.org/networkx/networkx/jobs/257014896  ``` W: http://dl.hhvm.com/ubuntu/dists/trusty/InRelease: Signature by key 36AEF64D0207E7EEE352D4875A16E7281BE7A449 uses weak digest algorithm (SHA1)  W: http://ppa.launchpad.net/couchdb/stable/ubuntu/dists/trusty/Release.gpg: Signature by key 15866BAFD9BCC4F3C1E0DFC7D69548E1C17EAB57 uses weak digest algorithm (SHA1)  Patching redis-server init script  pypy3 is not installed; attempting download  Downloading archive: https://s3.amazonaws.com/travis-python-archives/binaries/ubuntu/14.04/x86_64/-.tar.bz2  $ sudo tar xjf -.tar.bz2 --directory /  bzip2: (stdin) is not a bzip2 file.  tar: Child returned status 2  tar: Error is not recoverable: exiting now  The command "sudo tar xjf -.tar.bz2 --directory /" failed and exited with 2 during .  Your build has been stopped. ```  I restarted it to make sure it still failed (it did).  It looks like previous successful builds worked under precise.  
issue
Assign closed issues to 2.0 milestone#TITLE_END#I plan to assign closed issues currently labelled as part of the ``2.1`` and ``future`` milestones to ``2.0``: https://github.com/networkx/networkx/milestones  As I am going to use the GitHub API for autogenerating the contributors file for the release notes (PR #2542) , I want to make sure all PRs closed on master prior to the 2.0 tag are correctly labelled.  If I am overlooking something, please let me know.
issue
Use precise until we sort out pypy on trusty #TITLE_END#See #2543.
issue
Document release process#TITLE_END#Am I missing anything obvious?  We can fine-tune this as we do the 2.0 release.  (I don't mention making a 2.0 branch as I don't think it is necessary.   Particularly, if we are releasing 2.1 soon after the 2.0 release.)
issue
Cherry pick missing commits#TITLE_END#Fix #2531.  Do we want some of 79550da?  Or should I remove the tests cases added in a35b7ea to ``networkx/drawing/tests/test_layout.py``?  I also left out the move to ``pydotplus`` as it appears abandoned and development on ``pydot`` continued.  But I am not familiar with either.
issue
missing commits#TITLE_END#@hagberg , @dschult  I just noticed that there is no ``doc/release/api_1.11.rst``, but there is one here:   https://github.com/networkx/networkx/tree/v1.11 in ``doc/source/reference/api_1.11.rst``.  It appears this file was never committed on the master branch.  The v1.11 branch is " 59 commits ahead, 1066 commits behind master. "  So it looks like there may be a number of missing commits on master.  For example, this is also missing:   https://github.com/networkx/networkx/commit/5665c71f3a9aec0325078de2de43537aee03386d As this shows: ``` $ git lg networkx/drawing/tests/test_agraph.py * d8ada85 - Make graph attributes work both to/from with agraph  (#2507) (11 days ago) [Dan Schult] * 7bfb768 - Improve drawing test scripts (typos, newlines, methods) (1 year, 5 months ago) [Michael-E-Rose] * f5031dd - Adjust imports in drawing layouts with graphviz (1 year, 6 months ago) [Dan Schult] * 9922ec7 - doc, formatting, and whitespace cleanup (5 years ago) [Aric Hagberg] * 47565b1 - Handle name in translation between pygraphviz (AGraph) and networkx. Fixes #734 (5 years ago) [Aric Hagberg] * 3665bc1 - Update tests (6 years ago) [Aric Hagberg] * d41d15f - More imports cleanup and exceptions fixed. (6 years ago) [Loïc Séguin-C.] * baceff1 - Added tests for multigraph conversion to/from agraph. Changed from_agraph() so that the tests pass. (8 years ago) [dschult] * ca6df32 - Convert drawing tests to functional tests and use SkipTest if optional packages are not available. (8 years ago) [aric]  ```  I suspect that this was unintentional and that I should go through the missing commits and either cherry-pick the appropriate ones or make a new commit when cherry-picking doesn't work.  I just wanted to check whether I am correct before I go through the effort.  I will make a PR so you can review the commits I grab before merging to master.
issue
deleting old branches#TITLE_END#I plan to clean up some old branches.  The following branches have nothing not already in ``master``: - [attrgraph](/networkx/networkx/tree/attrgraph) - [beam-log-2](/networkx/networkx/tree/beam-log-2) - [digraph-edge-subgraph](/networkx/networkx/tree/digraph-edge-subgraph) - [doc-isom-orderable](/networkx/networkx/tree/doc-isom-orderable) - [remove-beam-notes](/networkx/networkx/tree/remove-beam-notes)  I will delete them.  I will also delete: - [revert-1806-patch-numpy-compatible](/networkx/networkx/tree/revert-1806-patch-numpy-compatible) It has one commit not in ``master``:   ec5e42e  
issue
Refactor examples#TITLE_END#@dschult , @hagberg I am going through the examples to make the auto-generated gallery nicer (this already does that, but I plan to work on this a bit more before we merge it).  I have some questions:  1. I am not sure what the Blockmodel plot should show.  Currently it looks lackluster.  I started modifying the code, but decided to stop and see if anyone knows what it should look like or what to change to make it look that way.  2. I would like to make a nice plot of the bipartite graph in `examples/algorithms/plot_davis_club.py`.  I am not that familiar with networkx yet and I don't do a lot of plotting in general.  So I thought I'd check if there are any examples of plotting bipartite graphs that I could look at before spending too much time trying to figure it out myself.  3. Some of the examples have data files.  Should any of these be moved into the library?  For example, ``` nx.hartford_drug_use_graph()  # examples/algorithms/plot_blockmodel.py nx.sampson_monastery_graph()  # examples/drawing/plot_sampson.py ``` For the `hartford_drug_use_graph()`, I don't see an advantage in having the file in the examples directory and would just use the `nx.hartford_drug_use_graph() `.  However, for `sampson_monastery_graph()`, it seems the code would be kept.  In this case, we could add something like the following to the docstring: ``` The file ``sampson_data.zip`` can be download from `here <https://github.com/networkx/networkx/raw/master/examples/drawing/sampson_data.zip>`_. We have also provided this data as a built-in example, which you can access via ``nx.sampson_monastery_graph() ``. ``` Are there any other datasets hidden in the examples directory, for which we should provide loaders?  Alternatively, are there any datasets, which we should definitely not provide data loaders for?  Any other suggestions or thoughts?
issue
Remove external subpackage#TITLE_END#Ready to merge.  All content removed 3 years ago in commit 94a1c3e9df.  I also made some minor corrections (and style fixes) to `setup.py`.
issue
Update `write_gml` docstring#TITLE_END#Attempting to fix #1454  This doesn't go as far as was discussed, but I think it is better than it was.  I added some additional text to (hopefully) make the issues more apparent to users.  I cleaned up some typos and formatting issues as well.  There are a couple of open issues relating to the GML format, which I intend to take a look at over the next week.  I can add additional documentation as part of those pull requests.  This is ready to merge.  @hagberg Does this seem reasonable?
issue
Add CONTRIBUTE file#TITLE_END#Fixes #1480   Ready for merge.
issue
Note the precondition that graphs are directed and acyclic#TITLE_END#Fixes #2240   @dschult This is ready to merge.
comment
 So far the relative imports seem slightly worse than absolute imports (they are slightly more succinct, but make moving code more difficult).  @stefanv stated that ``import networkx as nx`` and then using ``nx.whatever`` should be avoided in the library.  I haven't understood this yet, so it would be good to figure out what issue this causes and document it.  For example, numpy uses ``import numpy as np`` frequently, while scipy avoids ``import scipy as sp``.  We also need to investigate where our circular imports are coming from.  Currently, for example, ``` import networkx ``` gives us ``` networkx networkx.networkx networkx.nx ... networkx.nx.networkx.nx ... ```  Similarly, ``` import networkx as nx ``` gives us ``` nx nx.networkx nx.nx ... nx.nx.networkx.nx ... ```  Presumably, we have more issues than this.   We should do some experiments to see exactly what gets imported in what order, when.  Also, whether that changes when you use absolute vs relative imports. 
comment
More of the core developers are going to need time to look at this.  In the meantime, there is no reason to keep rebasing.  Just let it sit here until we can decide whether and when to start using type annotations.
comment
How does this compare to https://github.com/fmagin/networkx-stubs/?  Would it make sense to combine your efforts with ``networkx-stubs``?
comment
@NeilGirdhar If that project has "essentially no useful type annotations," do you know why it exists or what they are using it for?  It seems like a lot of work for something that doesn't provide much benefit.  Or is it that your approach just provides a lot more benefit?  For example, does this PR identify any new errors in networkx?  How would we use it to help us maintain networkx?  @gjulianm You mentioned that you "added some for multigraph/multidigraph" because you needed them for a project.  Could you tell me more about why you needed them and what they enabled you to do?  
comment
I would go with `_generate_random_paths` for the 2.6 release, and revisit it with NXEP3.  The rename could be a separate PR, since it should be merged quickly.  It probably makes sense to add a note to NXEP3 mentioning `_generate_random_paths` in the same rename PR, so that we don't forget to revisit this.
comment
I think we all understand the arguments for making it public or private.  So I will leave it to @dschult to decide.  It if is made public in 2.6 and deprecated in 2.7, we can still remove it in 3.0.  If it is deprecated after the 3.0 release, it can be removed in 3.2.
comment
@dschult Here is another suggestion (but you and Ross should make the call on this):  We could mark the function private in `networkx/algorithms/similarity.py`; but then import it in the top-level namespace as follows: ``` from networkx.algorithms.similarity import _generate_random_paths as generate_random_paths ```
comment
This won't work unless we enable pre-commit.ci for this repo, which we currently haven't done. I would prefer holding off on this for now as it will keep trying to update mirrors-prettier to an alpha release (at least until the mirrors-prettier issue is sorted out).
comment
I am marking this a draft for now as I want to look into the proposed solutions a bit. (I have the same issue on other repos, so thanks for looking into and proposing solutions!)
comment
You may want to contribute to https://github.com/fmagin/networkx-stubs/
comment
I will review this before merging. At least one of the updates will require additional work or it will break stuff.
comment
We should keep this consistent with upstream: https://github.com/scientific-python/changelist  Feel free to make a PR to that repo. Make sure to explain why you are making the changes. Thanks!
comment
Is it worth adding a brief `Note` mentioning how this relates to harmonic centrality: https://networkx.org/documentation/latest/reference/algorithms/generated/networkx.algorithms.centrality.harmonic_centrality.html  
comment
My main concern with using diameter is that I've only seen it in the context of a max.  This doesn't seem to be using a max.  The definition of harmonic diameter in the paper you link to, they do take a max.
comment
I guess the max sort of goes away (since there is just one element in the set you are taking the max of) when k = |V| as in your case.
comment
We should add this stuff to changelist (since the idea is to not have to manually edit the release notes): - https://github.com/scientific-python/changelist
comment
E.g., https://github.com/scientific-python/changelist/issues/55
comment
We should create an issue: - https://github.com/pysal/libpysal/issues   Or better still a PR: - https://github.com/pysal/libpysal/pulls
comment
@mbastian Hi Mathieu! We met last year in Leiden. I believe you have forceatlas2 in Gephi. If you have any time or interest, it would be great if you or someone on your team who is familiar with this layout could take a look.
comment
I will fix this. Thanks for pointing out the issue.
comment
We should also update the docstring for [nx.simple_cycles](https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.cycles.simple_cycles.html). It currently states: ```     Parameters     ----------     G : NetworkX DiGraph        A directed graph ``` but `G` doesn't have to be a NetworkX DiGraph.
comment
See #7028.
comment
I am not sure this will work: ``` v4 of the Codecov GitHub Action will use the [Codecov CLI](https://github.com/codecov/codecov-cli) to upload coverage reports to Codecov.  Breaking Changes      Tokenless uploading is unsupported. However, PRs made from forks to the upstream public repos will support tokenless (e.g. contributors to OS projects do not need the upstream repo's Codecov token)     Various arguments to the Action have been removed     For repositories using Dependabot, users will need to ensure that it has access to the Codecov token for PRs from Dependabot to upload coverage. ```
comment
Deprecating `reverse_cuthill_mckee_ordering` and adding the one-liner with a comment about the memory footprint in `cuthill_mckee_ordering`'s docstring seems a good solution.
comment
Does `myst-nb` allow you to test the code doesn't produce different results like `nb2plots`?
comment
It would be great to get this algorithm in!
comment
@ekohilas Please fold in your changes from #4308 incorporating Dan's suggestions regarding using ``nbr`` for variable names.
comment
Sure. You can also find that information listed here: https://pypi.org/project/networkx/  You shouldn't be able to install the package on Python 3.8. Did you try to install on it 3.8 and not get an error? If so, how did you try to install it?
comment
Travis hung for some reason unrelated to your changes.  I restarted the test and it worked fine this time.
comment
I normally have only been testing without dependencies with pypy and 3.x-dev versions, which seems like it should catch most things. That does mean we will have a few months every year after the most recent version of python is released where we only test on pypy without dependencies.
comment
It am not sure if it will cause a ton of noise, but I added testing for 3.13.0-alpha1 in #7096. It ran fine, so we could try merging that to catch any future cases where we have a combination of not installing dependencies and avoiding pypy. But we should probably just avoid those kinds of cases in general since if we aren't installing dependencies we shouldn't be running pypy.
comment
NetworkX 3.2 dropped Python 3.8 support.
comment
@dschult @MridulS Here is the 3.2 release branch: https://github.com/networkx/networkx/tree/v3.2  I am waiting for the tests to pass. Everything applied cleanly except https://github.com/networkx/networkx/commit/c9f893476ba9905a98e6c03c9d33a3826a474416. Because we dropped support for 3.9 in #7028, we removed ```     if sys.version_info < (3, 10):         backends = (             ep for ep in entry_points()["networkx.backends"] if ep.name == "nx-loopback"         )     else:         backends = entry_points(name="nx-loopback", group="networkx.backends") ``` and replaced it with ``` backends = entry_points(name="nx-loopback", group="networkx.backends") ```  So put  back the code in https://github.com/networkx/networkx/commit/c9f893476ba9905a98e6c03c9d33a3826a474416.
comment
Sorry, I was out. I just got back and will take care of the release now.  The release process is documented here: https://github.com/networkx/networkx/blob/main/doc/developer/release.rst  Tagging the release is one of the steps, but there are a few others. And since this is a special case release a few obvious changes to the process will need to be made (e.g., the release isn't happening on main, it is happening on v3.2).
comment
Conda doesn't follow the upstream releases closely. We ran into a similar problem with scikit-image. I pinned this so other can see it more easily. If they aren't updating the minimum Python versions, I suspect they aren't updating our other minimum dependencies either. I wonder how they were able to get the tests to pass with Python 3.8? Or do they not tests their releases?
comment
This should be handled in #7028.
comment
I like Dan's suggestion to add the one-liner to the docstring.  We should add it as an example so that it is tested as part of the doctests.
comment
Igraph made a new release right before you updated your PR: - https://pypi.org/project/python-igraph/  I haven't looked into it yet, but the error is not related to what you did.  One of us will sort out the igraph issue and let you know what to do next.
comment
It isn't empty. It contains: ``` <!-- Please use pre-commit to lint your code. For more details check out step 1 and 4 of https://networkx.org/documentation/latest/developer/contribute.html --> ```
comment
Thanks!!
comment
We deleted `tools/pyproject.toml.in` in #6987.
comment
@MridulS This looks good to me, but I wanted to check with you before merging (since I am planning to make the b1 release as soon as you review / merge this and #6630),
comment
i would prefer becoming less dependent on GitHub rather than adopting more of their technologies. They are likely to pull the rug out from under us once they get whatever they want from us.
comment
We could also remove ```   - package-ecosystem: "pip"     directory: "/"     schedule:       interval: "monthly"     labels:       - "type: Maintenance" ```  It isn't going to activate again for a month, though. So it won't generate much noise. I wasn't expecting it to bump upper pins. But I was planning to at some point remove the `<7` pin, but not until looking into whether we still need `nb2plots`.  My slight preference would be to just let things sit for a bit and revisit this in a month or two. But, if you wanted to remove the pip section now, I would approve your PR. ;)
comment
We use ``black`` for formatting now:   https://github.com/psf/black  This means you don't need to manually deal with PEP8 issues anymore---just run black.  You can read more in our contributor guide:  https://networkx.github.io/documentation/latest/developer/contribute.html
comment
Maybe it is to specialized and doesn't have enough $\LaTeX$, but I like Euler's formula: $F + V − E = 2$  I also like Cheeger's inequalities and the Expander mixing lemma - https://lucatrevisan.wordpress.com/2011/01/19/cs359g-lecture-3-cheegers-inequality/ - https://lucatrevisan.wordpress.com/2016/04/22/cs294-lecture-20-properties-of-expanders/#more-3181 - https://en.wikipedia.org/wiki/Expander_graph
comment
These are not direct requirements for networkx and we shouldn't specify them.
comment
I am not seeing this error on my computer or on our CI system.  What version of pre-commit are you using? Did you try the steps listed in the StackOverflow article?
comment
If we are going to have a link to the release notes, should we link to the developer release notes? If so, we should manually edit the README when we make releases, since the PyPI page will link to README and that means if we don't update this link during releases the link will be incorrect. I would prefer not needing to manually updating the README for every release (we are trying to make the release process less complicated). But if we are going to merge this PR, we should update the release process notes.  The list of links is already getting long for me taste. The release notes are prominently linked on the homepage and documentation. But I don't have a strong objection if others think it is too difficult to find the release notes.
comment
@rossbar I am not sure this is related to not making the PDFs. That should impact networkx-1.0.1 and it looks like everything worked fine for that PR: https://github.com/networkx/documentation/runs/11676885185
comment
I wonder if it could be related to this: https://github.blog/changelog/2023-02-21-github-pages-deprecating-symlinks-in-non-actions-builds/  The problem started for us right after Feb. 28th.
comment
Yes, that looks like it is it: ![screenshot](https://user-images.githubusercontent.com/123428/225223417-0c899a84-f4f2-48d0-a47f-d3068a4b5e63.png)  We are deploying from a branch and on February 28th GH pages stopped supporting symlinks in non-action builds.
comment
https://github.com/networkx/documentation/commit/8b2b0ca76b9b1db72fe78b9feab0094ee547daf7
comment
If we are going to continue supporting building PDFs, I would prefer to build them regularly. If we only do it before a release, making releases is going to be harder. So I prefer one of these options:  1. Don't change anything. 2. Don't support PDF building. 3. Setup a cronjob to build the pdf every so often (say weekly or biweekly) to verify that everything still works.
comment
I want to double-check that it is up-to-date before merging this.
comment
Just checking since I don't use conda. You were able to successfully execute this command: ``` pip install -e . ``` And then at the same command prompt that you successfully executed that command, what error message did you get when you entered ``` PYTHONPATH=. pytest networkx ```  My understanding is that ``` pytest --pyargs networkx ``` should test the installed package and that ``` PYTHONPATH=. pytest networkx ``` should test the source directory.  It probably makes more sense to test the installed package, but I can't remember why we didn't recommend that originally.
comment
I removed `pytest-mpl` from the `requirements/test.txt` file in #5361. I couldn't figure out a simpler way to handle things.
comment
@dschult I am ready to make the 3.0 release once this is merged. Let me know if I should wait for anything else.
comment
I will review this and look at Christofides #3585 at the same time.  I would like to get them both in before 2.6.
comment
@stefanv Is this ready to merge?
comment
> I'm a little confused by all the pep8 stuff. Shouldn't running black once fix all that? > Is it true that black doesn't mess with comments and doc_strings but that flake8 and pycodestyle do? > How can we make this easier for submitters?  @dschult We need to set up black to run as part of the CI and remove pep8speaks.  @rossbar started looking into how to do this and has a reasonable idea of what to do (I think).
comment
The example doesn't render correctly: https://324-890377-gh.circle-artifacts.com/0/doc/build/html/auto_examples/convert/plot_graph_tensors.html#sphx-glr-auto-examples-convert-plot-graph-tensors-py  I think changing ``` An overview of the steps involved looks like this:  1. Create your graph with data attributes 1. Define functions to extract data.     - For node DataFrames functions have signature:     f(node, datadict) -> pd.Series.     - For adjacency DataArray functions have signature: f(G) -> xr.DataArray.     Use ``format_adjacency()`` to ease creation of the DataArray. 1. Call the relevant generate function (``generate_node_dataframe`` or ``generate_adjacency_xarray``)  """ ``` to ``` An overview of the steps involved looks like this:  1. Create your graph with data attributes 2. Define functions to extract data.      - For node DataFrames functions have signature:       f(node, datadict) -> pd.Series.     - For adjacency DataArray functions have signature: f(G) -> xr.DataArray.       Use ``format_adjacency()`` to ease creation of the DataArray.  3. Call the relevant generate function    (``generate_node_dataframe`` or ``generate_adjacency_xarray``) """ ``` should fix it.  That is,  1. use different numbers (so it makes sense to people who read the text file). 2. use spaces to mark the beginning and end of the bullet list. 3. indent text to keep it in the same block (e.g., in the bullet list and item 3).  You can also remove the extra space at the end of the docstring.  I would also use a shorter title and a more descriptive first sentence.  The short title is the image title in the gallery.   I would use 3-4 words so the title in the gallery isn't super long.  I would add a descriptive first sentence, since it is what is displayed when you hover over the image in the gallery (it currently says "In this example, we show how two things:").  Maybe make the current title the first sentence and add a shorter less descriptive title.  If possible it would be nice to draw a figure.  The figure is used in the gallery and makes it more visually interesting.  Otherwise, it just displays a default image.  You may want to look at - https://xarray.pydata.org/en/stable/plotting.html  for ideas.  I.e., it would be nice if the plot used the fact that you have an xarray.  Should "f(node, datadict) -> pd.Series" be ``f(node, datadict) -> pd.Series`` (i.e., put in double backquotes)?  And "f(G) -> xr.DataArray" be ``f(G) -> xr.DataArray``?
comment
I originally (mistakenly) thought this only added xarray as a dependency for the gallery example.  This is the first example of adding a new extra dependency since we adopted our new "policy" for extra dependencies:  ``` Default dependencies are listed in requirements/default.txt and extra (i.e., optional) dependencies are listed in requirements/extra.txt. We don't often add new default and extra dependencies. If you are considering adding code that has a dependency, you should first consider adding a gallery example. Typically, new proposed dependencies would first be added as extra dependencies. Extra dependencies should be easy to install on all platforms and widely-used. New default dependencies should be easy to install on all platforms, widely-used in the community, and have demonstrated potential for wide-spread use in NetworkX. ```  Could all of the code move to the example (as we recommend for new extra dependencies)?  If not, we should take the opportunity to update the policy to better explain our reasoning about when new dependencies can skip first being added as examples.  If we decide to make xarray an extra dependency, then xarray needs to be listed  in ``requirements/extra.txt`` not ``requirements/example.txt``.  We should also mention the addition of a new extra dependency in the release notes.
comment
We already made some significant changes to our dependencies for the next release.   I don't think it will cause any issues, but it makes me a little hesitant to make more dependency changes in general for the next release.  One option would be to add this as an example for the next release and then add it as an extra dependency for the 3.0 release.  That might allow us to see if there are any unexpected issues.  This approach might be more desirable if there were a couple of additional dependencies that are added in the same way for the 3.0 release.  We should discuss whether there are other potential extra dependencies that we want to add before the 3.0 release.
comment
@ericmjl This branch had gotten out-of-sync with master.  It was a bit of work to rebase, so I decided to just push the changes to your branch.  I was careful and I don't think I messed anything up.  But you may want to double-check I didn't make any errors.
comment
I made xarray a default dependency so the tests would run, which is why the tests are failing now.  I am still not sure if this should be a default dependency or an extra one.  I would also prefer making this a gallery example first, but I don't feel strongly about that. In general, I think xarray is the type of thing it would make sense to add as a default or extra dependency.  I don't have much experience using xarray, so I am not sure this is a general solution or if there are other ways to do it.  It would be helpful if we could get feedback from other people using xarray and nx.  But there may not be a lot of people with more experience with this than Eric.
comment
See #4953 and #5053.
comment
In 2.5, I removed gdal from the requirements file (see https://github.com/networkx/networkx/commit/5638e1ff).  These instructions tell you how to install gdal manually.  In 2.6, we deprecated gdal.  But our support for it will not be removed until the 3.0 release.  So this shouldn't be merged until after we remove the use of gdal before the 3.0 release and after the 2.7 release.
comment
It is used here:  networkx/readwrite/nx_shp.py.
comment
Thanks for this PR!  We are planning to release 2.7 in a couple of months and 3.0 near the end of the year.  We will merge this after 2.7 and before 3.0.
comment
I would choose a different graph. Normally the idea of bipartitioning a graph is that there are two components that have more internal edges than external edges. A cycle has no natural partitioning.
comment
I suggested an example.
comment
Thanks!!
comment
Thanks!!
comment
Thanks!!
comment
I would like to wait a couple of weeks before we start removing the old code.  I don't anticipate any issues, but I would like to wait and see if we need to release 2.8.1. For instance, we may want to release 2.8.1 with some documentation improvements and a fix for #5520.  I think we should do it a series of PRs, so it will be easier to revert stuff if that becomes necessary.  I also think it may make sense to do this in a developer sprint with you, me, and Ross.  That way we can take care of it all at once and double-check each others PRs.
comment
We will have a beta and at least one rc release. We should strongly encourage folks to try the beta and rc releases.
comment
Pygraphviz is hard to install, which is why it is an extra dependency that isn't needed to use NetworkX.  It looks like Anaconda hasn't updated graphviz or pygraphviz for awhile: - https://anaconda.org/anaconda/graphviz - https://anaconda.org/anaconda/pygraphviz  If you need to use graphviz, you should ask them to provide a recent version of graphviz and pygraphviz.  Alternatively, you could install graphviz yourself and then pip should be able to build pygraphviz.  Out of curiosity, why do you need to install the extra (and hard to install) dependencies?  Are you using graphviz?
comment
I've pinged someone I know on the conda-forge team to see if I can get them to update - https://github.com/conda-forge/graphviz-feedstock - https://github.com/conda-forge/pygraphviz-feedstock/  Once they update, hopefully anaconda will update as well - https://anaconda.org/anaconda/graphviz - https://anaconda.org/anaconda/pygraphviz  Neither has updated their versions for Windows for several releases.  If anyone knows how to get them to update things, we would appreciate the help.  In particular, it may help if folks could upvote this issue: - https://github.com/conda-forge/graphviz-feedstock/issues/47
comment
@michealzhang13 I created the following issues: - https://github.com/conda-forge/graphviz-feedstock/issues/55 - https://github.com/conda-forge/pygraphviz-feedstock/issues/13  It would be helpful if you could up vote these issues.  I couldn't figure out how to report issues to - https://anaconda.org/anaconda/graphviz - https://anaconda.org/anaconda/pygraphviz  Do you know how?  If so, I will create issues there as well.
comment
Could you tell us more about the performance issues you are running into that Cython solves for you?  The small tests you did only shows a few seconds of improvement.  Do you have a real-world problem where this improves things from say hours to minutes for you?  If you tell us more about the bottleneck you are experiencing, we may be able to suggest another way to address the performance issues you are experiencing.
comment
It may be worth making a NXEP about this before deciding whether to go with Cython, Numba, or something else.  This may also impact the release process, since we will want to make optimized wheels.
comment
I haven't had time to investigate this, so there may be nothing to do or you may have already looked into it.  This is mostly to make sure it is on your radar.  You should also take a close look at ``sparse/csgraph``: - https://github.com/scipy/scipy/tree/master/scipy/sparse/csgraph  Ideally, we would use the same conventions.  We also don't use any of the functionality of ``sparse/csgraph`` and we should.  It may make sense to move some of the existing NX functionality/code there.  I don't have any specific suggestions (so this is just a meta-comment).
comment
I prefer keeping adjacency_matrix.  It is a standard term in graph theory.  And I think we should hide how we implement it.  So I would rather remove to_scipy_sparse_matrix.  But we still need to go over the linalg package to make sure it makes sense.  I would prefer leaving the package (more or less) as it is until we can refactor the whole linalg package.
comment
I am not sure it makes sense to draw arrows for an undirected graph.  Maybe it should at least raise a warning.  And if we do draw arrows, I agree that we should use "<->".
comment
networkx-2.8-py3-none-any.whl supports Python 3.8, 3.9, and 3.10.
comment
The command ``` pip install networkx ``` should install the most recent version of networkx that your system supports.
comment
> shouldn't `py3` support all versions of Python 3 that are not end of life  I am not aware of any policy that requires that. Do you have a link to some official Python documentation stating this? The Python 3 version EOL dates are when the Python team will stop providing updates to older versions of Python. We are a separate team that decides what versions of Python that NetworkX releases support.  We don't choose the wheel names. They are automatically generated when we execute this command: ``` python -m build --sdist --wheel ```  If you want to change how Python wheels are named, you may want to request the change here: ``` https://github.com/pypa/build ```
comment
> then lead to confusing errors when it says that it can't install it.  The current error states: ``` ERROR: Package 'networkx' requires a different Python: 3.7.9 not in '>=3.8' ```  We could change / replace this error message (this is the default error message from Python due to this `python_requires=">=3.8"` argument to setup), if you have some suggestions.  It seems pretty clear to me, though. Would changing this to something like: ``` ERROR: Package 'networkx' version 2.8 requires a different Python: 3.7.9 not in '>=3.8' ``` make the error message clearer? We could also add something like: ``` If you can't upgrade your Python version, then you will need to use an older version of NetworkX. ```  We would need to avoid setting `python_requires=">=3.8"`, which is not ideal. But if this error is causing you confusion, we can try it. It may be better to try to get Python to provide a more informative error message, though.
comment
It was added in NetworkX 2.7: - https://networkx.org/documentation/stable/release/release_2.7.html  I would recommend upgrading to 2.8, though.
comment
In the step before, you should have done either ``` pip install -r requirements/default.txt -r requirements/test.txt -r requirements/developer.txt ``` or ``` conda install -c conda-forge --file requirements/default.txt --file requirements/test.txt --file requirements/developer.txt ```  So you should have `pre-commit` installed.  Did you get an error message when you tried one of those two commands? If not, can you verify whether you ran one of those commands?
comment
> I think the piece that's missing from the current install instruction is the step to install the `pre-commit` _hooks_.  Neither piece is missing:  ![screenshot](https://user-images.githubusercontent.com/123428/162582419-a33e940f-203f-44a2-a64c-05ea5ac58aff.png)  Both steps are currently in the instructions.  There is nothing missing.  If you follow the instructions you will either do:  ``` # Install main development and runtime dependencies of networkx pip install -r requirements/default.txt -r requirements/test.txt -r requirements/developer.txt ``` or ``` # Install main development and runtime dependencies of networkx conda install -c conda-forge --file requirements/default.txt --file requirements/test.txt --file requirements/developer.txt ```  Those two lines will install `pre-commit` into either an venv or conda environment.  Once you have installed `pre-commit`, then you should follow the next step:  ```    * Finally, we recommend you use a pre-commit hook, which runs black when      you type ``git commit``::         pre-commit install ```
comment
   > >  >  > No sir, I followed the code on the contribution guideline and I used `pre-commit installed` but since I never had it installed on my computer it did not work as expected so I checked how to install pre-commit on my computer.  Did you run:  ``` pip install -r requirements/default.txt -r requirements/test.txt -r requirements/developer.txt ``` or ``` conda install -c conda-forge --file requirements/default.txt --file requirements/test.txt --file requirements/developer.txt ```  Did you get an error message?
comment
https://github.com/jarrodmillman.gpg
comment
Is Prim faster than Kruskal for sparse graphs?  I would test with p = 1/n or something like that.
comment
What version of networkx are you using?
comment
You should work off the main branch.  There is some information about how to contribute to NetworkX here: - https://github.com/networkx/networkx/blob/main/CONTRIBUTING.rst
comment
See #5438.
comment
@rossbar Go ahead and add release notes for this in https://github.com/networkx/networkx/blob/main/doc/release/release_dev.rst.  When I make the release, that will either become: - release_2.7.2.rst - release_2.8.rst
comment
I am merging this in draft status to increase the chances that users will see this potential upcoming change as soon as possible.  We can still update this NXEP and we still need to decide whether to accept or reject it.
comment
The code also appears to have a GPL license: https://github.com/cvanelteren/forceatlas2/blob/master/LICENSE
comment
@MridulS @dschult  I want Stefan to take a look at this b/c it may impact the lazy loading SPEC and I am not sure how he would like to fix this.  I am planning to release 2.7.1 next Monday.  So we should be careful with what we merge over the next week.  Straightforward bug fixes and documentation improvements would be good candidates.
comment
I use Fedora 33, 34, and 35 and I've never run into this problem.  So I am curious whether this is a problem.
comment
See #5371.
comment
We plan to release a fix for this in 2.7.1 on Monday, March 7th.  Thanks for the bug report.
comment
There is more to do, but we do need to do this before we officially support 3.10.  It is likely to be a month or more before that happens.
comment
I am not sure what cases we should exclude.  I suppose if the changes are to GitHub actions or one of our CI systems, it doesn't make sense to build the docs.  Maybe if the code isn't used in doctests or examples and doesn't change any docstrings?  How would you test for that?  What are the other cases?  Ross and I have been talking about speeding up the doc build.  So if that is causing problems, we can push that forward.  The main things I had been planning to do are 1) remove the mayavi example and 2) replace cartopy (which takes time to build) and I was told by one of the geospatial folks that it would be easier and more recommended to just use geopandas instead of cartopy.  I would rather speed up the doc building before figuring out when to and when not to build the docs.
comment
I started writing this before @rossbar commented, so this is redundant.  I am going to leave here just for the record.  @rossbar Would you have time to look at this in the next couple of days?  I have some general concerns about introducing new "convenience-oriented" API, but don't have specific thoughts about this PR yet.  I believe @MridulS mentioned recently that this is a frequently requested from new users.  (I may be misremembering, so please correct me if so.)  I don't know if it is appropriate for this change, but maybe we should consider this for our first (new feature/API) NXEP: - https://networkx.github.io/documentation/latest/developer/nxeps/nxep-0000.html  If it seems like a good idea to create a NXEP for this, maybe you can work with @MridulS to draft it.  Mridul will have much more experience with the code base and working with new users than you, but you may have more experience with NXEPs (since I basically copied the NEP process).  It would be good for us to gain experience with NXEPs.  Hopefully, we will have several as we move closer to NX 3.0 and it would be good for us to see if there is anything we need to improve about the process sooner rather than later.  It will also be helpful to have a couple of examples for future contributors to look at.
comment
@MridulS It looks like @rossbar and I are both wondering whether it would make sense to create a NXEP for this.  Among other things, that would allow us to record use cases and would serve as useful design documentation going forward.  What are your thoughts?
comment
The NXEP process is very similar to the PEP process and should be near identical to the NEP and SKIP process.  Since it looks like you may be the first person to try this out for NX, please don't hesitate to ask questions about the format and process.  If things are too cumbersome or don't make sense, we should use this opportunity to refine the NXEP process.
comment
I like Dan's suggestion about adding a `__str__` method.  The more I think about `G.nodes[4:6]`, the less I like it.  It allows new users who don't know about Python data structures to get a response, but it makes everything more confusing and will require us to carefully explain what is happening.  I also am leaning against adding a `slice` method.  It doesn't save any characters: ``` G.nodes.slice(10) list(G.nodes)[10] ``` And converting an iterable to a list using `list()` is standard Python that users should learn if they are using NetworkX.
comment
@rossbar Is it possible to rebase this on master instead of merging?  When we merged 5dfd57af2a141a0, it included 10 contributors and a messy commit message.  It is hard to review this PR b/c it includes stuff that is already merged.
comment
@rossbar @dschult @stefanv @MridulS  I would like to merge this as soon as possible.  We still need to do this:  - [ ] change `scipy==1.8.0rc2` to `scipy>=1.8.0` (once 1.8 is released) in `requirements/default.txt`  Is there anything else that needs to be done before merging this?  Once this is merged, what are the next steps?  Are there more cases where we should add a `FutureWarning` (e.g., #5219)?
comment
@MridulS @dschult I think we should merge this before scipy 1.8 is released.  Then we can merge #5262.  Before releasing networkx 2.7, we will need to update the requirements file.  Since this is a big change it would be good to have it live in the main branch for a bit (potentially more people we see it and possibly test it for us).
comment
Not sure what is going on yet.  But it looks like circleci is not building our docs currently.
comment
Not sure what is going on yet.  But it looks like circleci is not building our docs currently.
comment
According to the GML format, it looks like periods are not allowed.  Is there a newer specification of the format?  Do you know if other packages that support the GML format allow periods?  See page 2 of this file for more details: - https://web.archive.org/web/20190303094704/http://www.fim.uni-passau.de:80/fileadmin/files/lehrstuhl/brandenburg/projekte/gml/gml-technical-report.pdf
comment
@rossbar Can you rebase and check that this still applies.  If so, we should merge this and get the fixes in.
comment
We should still plan to remove them completely for 3.0.  So maybe we should also mention that in the message.
comment
We may also want to mention the security issue (especially since we are removing a function w/out deprecating it).
comment
Add a note about extra files to: https://github.com/networkx/networkx/blob/main/doc/developer/deprecations.rst
comment
I prefer to do the contribs.py just before I make the release.  I think this is ready to merge.  I will do a final pass before the final 2.6 release.
comment
This makes a big difference for at least `examples/drawing/plot_eigenvalues.py`.  Before it took between 20 to 150 seconds.  Now it takes around 0.80 sec!
comment
How do you see the  doc deploy workflow?  I thought that was only run on main.  Have you tried it on the coverage report workflow?  Just curious.
comment
I am still confused.  This hasn't been merged to `main`, so how could you see the results of the PR for something that is only run after the PR is merged to `main`.  For instance, if I look at https://github.com/networkx/networkx/actions/workflows/deploy-docs.yml I don't see any runs that contain `export OMP_NUM_THREADS=1`.
comment
Ah!  If it doesn't have the problem, it doesn't need the fix.  That is some sound reasoning.
comment
@rossbar Is this ready to merge (or did you want to test anything else first)?  This LGTM.
comment
This LGTM.  I am merging this so it is tested in 2.6rc1.  If there are issues we can fix them before 2.6 or revert.
comment
I was about to make a PR for them, but it looks like they got to it already: https://github.com/aws-cloudformation/cfn-lint/pull/2035
comment
FYI, we should use dollar sign math (i.e., `$G_i$`, etc.).
comment
@dschult Any concerns about merging this before I cut 2.6rc2?
comment
I've attached a tarball of the old wiki.  Please let me know if you need something else. Jarrod  On Tue, Sep 14, 2021 at 8:57 AM Mridul Seth ***@***.***> wrote:  > ***@***.**** commented on this pull request. > ------------------------------ > > In doc/developer/projects.rst > <https://github.com/networkx/networkx/pull/5056#discussion_r708415926>: > > > @@ -119,17 +60,32 @@ Implement the VF2++ Graph Isomorphism Algorithm >  .. _`Graph Isomorphism Problem`: https://en.wikipedia.org/wiki/Graph_isomorphism_problem >  .. _VF2++: https://doi.org/10.1016/j.dam.2018.02.018 > > +Completed Projects > > Also, is there more information we could link to? It might be useful for > future students to see proposals. Are there any final reports? > > I remember my proposal being in the Wiki section. Do you still have the > dump from the GitHub wiki? > > — > You are receiving this because you commented. > Reply to this email directly, view it on GitHub > <https://github.com/networkx/networkx/pull/5056#discussion_r708415926>, > or unsubscribe > <https://github.com/notifications/unsubscribe-auth/AAA6EJHQ35B4L2DKI6KSWSLUB5WIFANCNFSM5DJFGLNQ> > . > Triage notifications on the go with GitHub Mobile for iOS > <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675> > or Android > <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>. > > 
comment
See #5143 (where I added you as a co-author).  Thanks!
comment
I released NetworkX 2.5.1: - https://pypi.org/project/networkx/2.5.1/  I also asked the folks at conda-forge to update as well: - https://github.com/conda-forge/networkx-feedstock/issues/21
comment
Updated to 2.5.1 here: https://github.com/conda-forge/networkx-feedstock
comment
I don't think this is worth worrying about.  People shouldn't be using our GDAL code and we are planning to remove it.  We don't know if it works even if it passes the tests.
comment
It looks like what you are talking about it is not a graph.  And I am not sure which graph algorithms (if any) would make sense on such a structure.  I did some google searching for you and it looks like what you are interested in may be called a higraph (https://en.wikipedia.org/wiki/Higraph) or a statechart (https://www.inf.ed.ac.uk/teaching/courses/seoc/2005_2006/resources/statecharts.pdf).  I did more google searching and there does appear to be some Python packages for statecharts.  Here is a paper about algorithms for higraphs (e.g., they extend some graph algorithms to higraphs): - http://www.wisdom.weizmann.ac.il/~harel/SCANNED.PAPERS/Algorithmics%20of%20Higraphs.pdf  I also found this paper: - https://hal.archives-ouvertes.fr/hal-01366350/document  I didn't read the paper, but from a quick visual scan it appears that they used NetworkX MultiDiGraphs to implement higraphs.  They provide some pseudocode that you may find useful if you need to implement this functionality.  I am not familiar with higraphs or statecharts and I haven't read the above paper.  From my google searching, I believe that statecharts are mostly used for diagramming things and don't have many algorithmic applications yet.  I also couldn't find many articles presenting algorithms for higraphs.  If you find additional algorithms for higraphs in the literature, please link to them here.
comment
See #1090.
comment
I agree with @rossbar.  We just removed a few IO functions that were just minor wrappers.  I started adding a section about readwrite to the tutorial, but maybe that should be put in the reference manual instead #4283.
comment
Like NumPy, SciPy, Pandas, Matplotlib, and many other Python packages in the scientific Python ecosytem, we are following NEP 29:  https://numpy.org/neps/nep-0029-deprecation_policy.html.
comment
The NEP is written in a confusing manner.  However, all the projects I mentioned above have dropped 3.6.  We will not support 3.6 going forward.  So if you need 3.6 support, you will need to use NetworkX 2.5.  ``pip`` should handle this for you, though.  Are you specifically trying to install NetworkX 2.6?
comment
We aren't specifically looking for any features from Python 3.7.  But we are not interested in restricting ourselves to 3.6.  What features of NetworkX 2.6 do you need?  It is possible that we can backport those features and release 2.5.2.  That release may not support Python 3.9, though.  Do you need to run on Python 3.6 through 3.9?  If so, it would be great if you could explain your usecase.
comment
Yes, this was intended.  It is prominently discussed in the release notes and announcement.  That said, it introduced a circular build dependency issue for scipy: scipy/scipy#14335 and serge-sans-paille/pythran#1837.  We are considering undoing this change: https://github.com/networkx/networkx/pull/4967.  Feel free to give that PR a thumbs up.
comment
Out of curiosity, would our current recommendation of using ``pip install --no-deps networkx`` work for you?
comment
I "yanked" 2.6 and 2.6.1 from PyPI: - https://pypi.org/help/#yanked  See https://github.com/networkx/networkx/pull/4967.
comment
Yes, the PyPI site is a static copy of the README when 2.5 was released.  But the badge links to a dynamic page.   We may not run into that problem again, but I will look into pinning the badges to specific commits as part of the release process to ensure the badges don't change after we make a release on PyPI.
comment
Not sure what is going on yet.  But it looks like circleci is not building our docs currently.
comment
Not sure what is going on yet.  But it looks like circleci is not building our docs currently.
comment
Would it be possible to add a test for the `order <= 2` branch?
comment
@dschult I changed this to milestone 2.6, since I believe we want to merge this and release 2.6rc2 soon.  Would you mind adding a note to `doc/release/release_dev.rst` in this or a separate PR.
comment
I slightly prefer going with ValueError, but let's see if someone else has a stronger opinion or argument.
comment
The circleci build error is confusing.  It is using an old setup to run, but it looks like your branch has the new stuff.  For instance, it is installing dependencies for cartopy.  But we don't do that now and you seem to have the new circleci config that doesn't install those dependencies.  Circleci is also installing `Sphinx==3.5.4`, but we now require `Sphinx~=4.0`.  The newer version of Sphinx should fix the problem.
comment
Can we just remove the conda instructions?  I suspect we would have heard from someone before, if anyone is using these instructions.
comment
I don't think we need to remove the `venv` example.  I made a PR to remove the broken conda example.
comment
If we want to leave the instructions in someone needs to figure out how to fix it.
comment
Is sed available on Windows and Mac?  I assume people using conda are more likely to be on Windows or Mac (but that is just a wild guess).  Actually, I bet ``` pip install -r <(cat requirements/{default,developer,test}.txt) ```  doesn't work on Windows (e.g., using cmd or Powershell)?  We should probably just expand this to ``` pip install -r requirements.txt    # this gets default.txt and test.txt pip install -r developer.txt ```
comment
Or ``` pip install -r requirements.txt -r requirements/developer.txt ``` and ``` conda install --file conda_requirements.txt --file requirements/developer.txt ```  I suspect the path separator is an issue, though.  Maybe we should just mention the developer requirements in a comment.  We could move it to the part where we discuss `pre-commit`.
comment
https://github.com/conda/conda/pull/7258
comment
You could try `cd doc ; make linkcheck`.
comment
I am temporarily marking this a draft, so I can keep from merging it for about 30 minutes.  I am going to work on the documentation repo so I want to merge this when I am done.  Just so I can manually confirm everything works after I make my changes.  I am going to remove `from networkx import nx` stuff from the old docs.
comment
@Erotemic Thanks for pushing this.  (I haven't had time to think about making this a subpackage, but if @dschult  agrees I am +1.)  I would like the ``__devnotes__`` removed from this PR **and** I would like to settle on a consistent import pattern for NX (possibly using ``mkinit`` everywhere).  We have a few different styles I suspect (though ``import *`` is probably the main style).  It would be great if you could provide feedback on this PR: - https://github.com/scikit-image/scikit-image/pull/5101  You may also want to quickly scan: - #4401 - #4426  Now that most of the major scientific Python core packages have dropped Python 3.6, we would like to implement lazy importing across the ecosystem (numpy, scipy, scikit-image, networkx, etc.).  @stefanv created the PR on the scikit-image repo, since we were hoping to get more community feedback (but the idea started in #4401).  Stefan is working on a PEP-like proposal to go with this PR, but it isn't ready yet.  I haven't looked at ``mkinit``, but it looks like it may be helpful for moving in the lazy import direction.  So it may make sense for us to use ``mkinit`` for the whole NX project and suggest using it in other projects if they are implementing the lazy import stuff.  Maybe we could even add it to our CI system's style and formatting checker to make sure new contributions are being added to the ``_init__.py`` modules correctly.
comment
Here is a discussion that is worth reviewing:  #1534
comment
LGTM.  We are removing ``networkx/readwrite/nx_yaml.py``, so in a a couple months we won't have to worry about this anymore.
comment
It looks like these failures are due to a change in scipy==1.6.1.  In #4625, I asked @rossbar to look into whether this is a scipy bug or whether we should update our doctests.
comment
I would like the user-facing changes to be part of the 3.0 release.  The deprecation warnings should appear in the 2.6 release.  It may also be worth using this opportunity to revisit the names and unify things a bit.  For example, see Aric's comment in #2029.  I haven't looked at it, but there are some changes to ``convert_matrix.py`` in #2066.  To track deprecated code add a note here: https://github.com/networkx/networkx/blob/master/TODO.txt
comment
We've done everything we can until we sort out the situation upstream.  We are well aware of the problem and will hopefully have time to look into this in the next couple of years.
comment
Yes, we are part of the "Scientific Python ecosystem."  We follow NEP 29 and already dropped 3.5:   https://github.com/networkx/networkx/commit/2df70066ecd661aa6ae0a707d10b597c9939c273 The next release in September 2020 will support Python 3.7-3.9.
comment
I may have spoken too soon.  After looking into it, it turns out dropping 3.6 will mean dropping support for PyPy.  I also checked the main projects that were behind the proposal.  It looks like NumPy, SciPy, scikit-image, scikit-learn, and yt haven't dropped 3.6 yet.  @stefanv As one of the authors of the NEP, can you give us an update on whether the projects that proposed this NEP are planning to follow it.  And what happens to PyPy support?  Is there any interest in the scientific Python ecosystem supporting PyPy with new releases?  If so, the NEP may need to be revisited.
comment
Just to be clear, deciding whether to drop Python 3.6 now is not about deciding whether NetworkX is a part of the scientific Python ecosystem.  It is and has been from the start.  Whether we drop Python 3.6 now or later doesn't impact that.
comment
The doc build error should be fixed by #4794.
comment
We don't support ``pygrapphviz==1.3`` anymore.  Anaconda stopped maintaining Graphviz and PyGraphviz years ago.  I've repeatedly tried to get them to fix the situation over the last several months.  But I haven't had any success.  You can find the requirements in the requirements files.  For example, you can find the current required version of PyGraphviz for the master branch here: - https://github.com/networkx/networkx/blob/master/requirements/extra.txt  Here is the requirements file from the 2.5 tagged release: - https://github.com/networkx/networkx/blob/12f852f6a686ed32f718125c5965586dd6bb82a9/requirements/extras.txt  If you have to use Anaconda for some reason, you may be able to get networkx-2.0 to work with it.  However, networkx-2.0 officially requires pygraphviz 1.3.1 (although it has been so long I can't remember what 1.3.1 fixed compared to 1.3).  So you may need to use NetworkX 1.11 if you need to use Anaconda:  https://pypi.org/project/networkx/1.11/  I know that is old, but Anaconda hasn't updated PyGraphviz since 2015 and the version of Graphviz they support (2.40.1) is broken and there is no release of PyGraphviz that works with that version of Graphviz.  So I would highly recommend against using Anaconda.  Out of curiosity, is there any specific reason why you want to use Anaconda?  Are you on Windows?
comment
This is also a deprecated function that we are planning to remove.  My vote would be to just close this.
comment
The doc build error should be fixed by #4794.
comment
I think the CI isn't complaining b/c `urllib.request` is imported by other examples.  For example, `examples/graph/plot_football.py`.  If I try to run the example manually, I get ``` $ python examples/drawing/plot_custom_node_icons.py Traceback (most recent call last):   File "/home/jarrod/src/nx/networkx/examples/drawing/plot_custom_node_icons.py", line 22, in <module>     images = {   File "/home/jarrod/src/nx/networkx/examples/drawing/plot_custom_node_icons.py", line 23, in <dictcomp>     k: PIL.Image.open(urllib.request.urlopen(url)) for k, url in icon_urls.items() AttributeError: module 'urllib' has no attribute 'request' ```
comment
Also, `examples/graph/plot_football.py` imports it this way: ``` import urllib.request as urllib ```  I prefer that to be ``` import urllib.request ```  We should either clean that up here or in a separate PR.
comment
It also works in IPython for me; but, I am not sure why.
comment
I released NetworkX 2.5.1: - https://pypi.org/project/networkx/2.5.1/  I also asked the folks at conda-forge to update as well: - https://github.com/conda-forge/networkx-feedstock/issues/21
comment
Updated to 2.5.1 here: https://github.com/conda-forge/networkx-feedstock
comment
We no longer support NetworkX 2.2 or Python 2.  And it looks like the problem was handled downstream: - https://github.com/spulec/moto/pull/3834
comment
I am not sure I like ``impl``.  I was initially imagining that we would check whether it was available or not.  But now that scipy is a default dependency, I suppose it is a question whether it makes sense to check.  Maybe it would be better to always use the scipy implementation.  And then if people want to use a slow implementation than can manually access one of the private functions directly.  I like leaving the slow versions in the library for educational purposes, but I don't know if we should make it easy for people to access them.  Maybe we should rename ``pagerank_scipy`` as ``pagerank`` and tell pytest that the tests are known failures on pypy.
comment
It looks like the scipy implementation is always the clear winner.  I think it makes sense to keep the different implementations for education purposes.  We could also test that we get the same output using different implementations, I suppose.  I am not sure why we should advertise the different implementations to users.  Would there be any disadvantage to making pagerank use the scipy implementation and then making the python and numpy implementations private?  That way folks looking at the source code can see the different implementations, but most casual users would never see (or accidentally use) the slow implementations.  If we find users requesting easier access to the slow implementations, we could add the ability to select different implementations in a future release.  I suspect this feature will not be requested.
comment
LGTM, but there are a couple of missing tests:  1. ``_pagerank_python`` needs a test for when ``nstart`` is not None. 2. ``google_matrix`` needs a test for when ``personalization`` is not None and ``p.sum() == 0``.
comment
I forgot to ask you to document the deprecations in the release notes and the deprecation todo list, so I just made a PR: https://github.com/MridulS/networkx/pull/4
comment
I think (assuming the PRs look good to you) that this is ready once you address Ross' comment and review/merge our two PRs. Thanks for doing this, I suspect this will be very helpful for many users.
comment
I am -1 on this as well, so I am closing this PR.
comment
What do you think of: 1. Have the link be relative to the source directory (i.e., just the ``requirements`` directory) in the text file.  So that someone opening the file from the command line doesn't need internet. 2. Have the doc build process (e.g., maybe add a Python script) take the requirements directory and create a page and/or replace the paragraph in the INSTALL doc.  You may want to replace ``requirements/README.md`` with ``requirements/README.rst``, so that it doesn't need to be converted during the doc build process.  It should work for at least ``make html`` and ``make latexpdf``.
comment
A couple of minor comments: 1. I would prefer to see us removing the class based organization of the tests when possible.  Is there any advantage to using the class based structure here? 2. I am pretty sure we should remove scikits.sparse.  It is an abandoned project.  We never test it and I suspect we should use a more modern sparse library.  Dealing with this could be a separate PR (or at least an issue).
comment
We may need more time to review the API and possibly deprecate some of it.  However, I think it is worth merging this now, releasing 2.5, and then revisit the API before 2.6.
comment
@rossbar This is ready to merge once you rebase on master and maybe use ``show`` instead of ``draw``.
comment
@rossbar I just did a force push to your branch.  I am going to remove the stuff I did in travis after checking that everything works w/ my last changes.  Once I finish that I will merge.
comment
@dschult , @rossbar Should we deprecate ``display_graphviz``?  It is supposedly an ``internal function``.  We don't use it anywhere else.  I don't understand why the functionality is divided into two, so I may be missing something.  It was added in https://github.com/networkx/networkx/commit/4b026a2f43d50f9a3fe0a36863e02b5c9423e5fa with the comment: ``` # This would be more useful as part of PyGraphviz. ``` The comment was removed in https://github.com/networkx/networkx/commit/9ac49080ade10672dec871d9eb0bbf424a903795 when it was made to use the ``open_file`` decorator.
comment
@rossbar I added the importorskip back (it was causing the tests to fail when numpy wasn't available on Py3.9 and PyPy).  We should look into removing all the importskip in a separate PR, though.
comment
We should also clean up tests/test_convert_scipy.py in a separate PR.
comment
I don't think there is a need for a tracking issue.  You already added it to our todo list for cleaning up 3.0.
comment
Please update  ``doc/release/release_dev.rst``.
comment
Please update  ``doc/release/release_dev.rst``. 
comment
See https://github.com/rossbar/networkx/pull/1
comment
We should look into: - https://matplotlib.org/3.3.3/devel/testing.html#writing-an-image-comparison-test - https://github.com/matplotlib/pytest-mpl  I also saw this old blog post: - http://www.davidketcheson.info/2015/01/13/using_matplotlib_image_comparison.html  It may be out of date.  I am not sure what the status of pytest-mpl is.  It looks like matplotlib uses the image_comparison and check_figures_equal decorators, but not pytest-mpl.  @tacaswell Do you have any recommendations?
comment
It looks like we have been inconsistent.  I personally prefer just calling them loops (and would say edges and loops).  And I prefer selfloop over self-loop.  Is there a concern that loop (an edge from a node to itself) and loop (e.g., for loop, while loop, etc.) would be confused?  Does loop ever refer to anything other than an edge from a node to itself in network science?
comment
We are also planning to work on numpydoc so it would be good to start using it now.
comment
I haven't looked at this closely yet, but it looks good in general.  Can you rebase this on master and use ``example/graphviz``?  I also added more code to the combined example in master, so you will need to make sure you don't miss anything.
comment
Could you add ```     "pygraphviz": ("https://pygraphviz.github.io/documentation/stable/", None), ``` to ``intersphinx_mapping`` in ``doc/conf.py``.
comment
You may want to rebase on master because of #4510.
comment
Maybe, we should rename  ``doc/developer/faq.rst`` to ``doc/developer/getting_started.rst``; but keep the FAQ format.  I think we should keep this document focused on novice contributors to open source (and I worry that just calling this FAQ will lead to a mix of topics some for novice contributors and some for experienced contributors).  So, for example, a shorted discussion about adding a gallery example should appear in ``CONTRIBUTING.rst``.  But the longer discussion about adding gallery examples could stay in ``doc/developer/getting_started.rst``.  That way we can keep ``CONTRIBUTING.rst`` short and focused on folks familiar with contributing to open source scientific Python project (but not necessarily to NetworkX) who just want the minimal commands to run.   And the ``doc/developer/getting_started.rst`` document can focus on people new to  contributing to open source scientific Python project in general.  I suspect folks new to NetworkX (but not new to open source) will find a very short contributor guide more helpful.  They are also likely to fork, clone the repo, and open ``CONTRIBUTING.rst`` from their terminal.  For folks new to open source, are more likely to appear on the mailing list or on issues.  So we can point them to ``doc/developer/getting_started.rst``, which is a combination FAQ and roadmap for folks new to open source.  Maybe we should also include pointers (I imaging a sentence or just a bullet point) to things like: - learning Git (e.g., https://git-scm.com/doc, https://try.github.io/) - learning GitHub (e.g., https://docs.github.com/en/github/getting-started-with-github/set-up-git)
comment
What do you think of removing ```     warnings.filterwarnings(         "ignore",         category=PendingDeprecationWarning,         message="the matrix subclass is not the recommended way*",     ) ``` from `networkx/conftest.py`.  I put that in b/c we didn't have a plan to clean up the warnings.  But it might be worth seeing them now.
comment
I would rather remove ``pip install networkx[all]`` than add a special case for advanced users (e.g., people who aren't using a default shell).  @BlueDrink9 which optional packages did you need to install?  Did all the optional packages install without problems?  (A couple of our optional packages are often tricky to install.) 
comment
BTW, @BlueDrink9 you didn't miss the source code link in the documentation earlier.  After you made this ticket, @dschult opened #3998 and I closed it with #4044.  So the links are there now thanks to this issue.
comment
@eikNamo I forgot to close this.  zsh is not a standard shell and users selecting it should know it's syntax.  The install guide is aimed more at novice users who are unlikely to have customized their own shell.  We recently add a FAQ for new contributors: - https://networkx.org/documentation/latest/developer/new_contributor_faq.html  It would be great if you could take a look at it.  It is new and we welcome feedback.  Please take a look at some of the other issues to see if there is something that looks interesting to you.  Thanks for your interest and hopefully you can find another area to begin contributing!
comment
Some of the functions in ``nx.utils.misc`` were originally copied from other places.   For example, ``consume`` and ``pairwise`` are recipes from itertools documentation.  It would be worth checking if these recipes have been improved or replaced.  Also, it looks like ``consume`` is just another name for ``deque`` with an option set and is only used once in our codebase.  So we may want to deprecate it as well.  We may want to review other modules in ``nx.utils``.  - For example, now that we depend on NumPy/SciPy, we may want to review ``utils/random_sequence.py``.  I also wonder if any of those distribution are now provided by Python directly. - I also wonder if ``utils/heaps.py`` can be simplified (Python's ``heapq`` has been improved since this module was added 7 years ago).
comment
It looks like MinHeap was just intended as a baseclass for PairingHeap and BinaryHeap.  I don't think it was intended to be used directly.  I am not sure about the BinaryHeap issue you mention.  It looks like PairingHeap and BinaryHeap were implemented b/c heapq didn't have an "efficient implementation of the decrease-key operation:" https://github.com/networkx/networkx/pull/1094  Before working too much on this, you should look at ``algorithms/connectivity/stoerwagner.py`` and see if we still need our own implementation of ``BinaryHeap``.  You would probably need to write some benchmarking code to see if we are still getting performance improvements using our own implementations over ``heapq`` directly.  I also suspect this is not the easiest place to get started contributing to NetworkX unless you have specific usecases for why you need to modify this code.  Adding tests to untested parts of ``utils`` would likely be a more useful way to start contributing to the codebase.  Also identifying utility functions that are no longer needed and can be safely deprecated would be another good way to start contributing.
comment
See #4083.
comment
Would you mind sharing the example where you see the problem?  Thanks!
comment
We test on PyPy without numpy, scipy, etc.
comment
To deal with the PEP8 issues, you should install and run black (https://github.com/psf/black).  There is a lot of overlap with this function and ``harmonic_centrality``.  @dschult Maybe it would be better to make this an option for ``harmonic_centrality``, rather than a new function.
comment
Does ``.github/ISSUE_TEMPLATE/bug_report.md`` replace ``.github/PULL_REQUEST_TEMPLATE.md``.  I thought we decided to keep this short and focused on black.  My experience is that most people (me included) just delete longer forms like ``.github/ISSUE_TEMPLATE/bug_report.md``.  If we do decide to use a longer form, I think we should still include the statement about formatting the code using black.
comment
Is there a way to see what this is like before merging?  For example, if you enable issues on your networkx fork, would we be able to test the new functionality on this page: - https://github.com/MridulS/networkx/tree/issue_template  ?
comment
(Sorry, I was confused about the PR vs issue thing.)  I like https://github.com/MridulS/networkx/issues/new/choose!  I am curious what folks think about the bug report template.  Of course it may be best to just try it and see how often it filled in.  Once we get some experience with how useful it is, we can review the template/form for bug reports.  So I am tentatively +1 on this PR as is.  Before officially "appoving" this, I will wait a few hours to see if you get anymore feedback.
comment
Let's go with #4292.  It looks like this may have added some tests that you didn't.  If so, please make sure to add them to your PR and add @AndrewEckart as a coauthor.
comment
LGTM.  Go ahead and add a note to the release notes and this is ready to merge.
comment
It seems reasonable to just add a comment to the release notes.  I don't think this requires a deprecation.
comment
Thanks for working on this!  If I am correctly understanding you, this would provide a nice path forward for us and allow us to drop the dependency on the GDAL/OGR libraries.  I am going to summarize what I think you are saying to make sure I am not confused.  You are proposing that if NX users want to use geospatial data with NX, they would use Fiona via geopandas to handle file I/O.  Then the only thing about geospatial data that NX needs to be aware of is how to convert geopandas GeoDataFrames to NX graphs and vice-versa, which is what ``from_geopandas_edgelist`` and ``to_geopandas_edgelist`` provide.  If so, this could be how we roll out the change:  1. NX 2.5 (Sept 2020) would add ``from_geopandas_edgelist`` and ``to_geopandas_edgelist`` as well as deprecate everything in ``readwrite/nx_shp.py``.  2. NX 3.0 (Jan 2021) would remove ``readwrite/nx_shp.py`` and at that point we could remove gdal from our dependencies.
comment
@iboates The more I think about this, the more I like it.  I fixed the test failures and added the functions to our documentation.  You will need to use the numpy docstring standard for this to render properly, though.  We recently started autobuilding the documentation for PRs, so I rebased to master and force pushed to your branch.  You can see the documentation here: https://15-890377-gh.circle-artifacts.com/0/doc/build/html/reference/convert.html#geopandas  Git will be confused on your local machine because I changed history when I force pushed to your remote branch.  So you will have to run a few commands.  If you aren't familiar with what to do, please take a look at this: https://stackoverflow.com/questions/9813816/git-pull-after-forced-update  If you aren't sure after looking at that, please don't hesitate to ask.  I also formatted the code using https://github.com/psf/black  You may want to take a look at our contributor guide: https://networkx.github.io/documentation/latest/developer/contribute.html In particular, near the top it shows you how to install a pre-commit hook that will format the code for you.  There is still one error that needs to be fixed.  Do you know how to fix it?  
comment
For the errors, check the CI builds.  At the bottom of the page, you will see red ``x``s by failed tests.  Click on them and investigate.  For some reason, Travis is no longer being run.  But, you will probably still need to fix those errors.  Hopefully, it will come back when you make more commits (so you can see the errors).  Your recent changes broke the tests on Appveyor, so I would start there.  I took a quick look and you probably just need to make an entry for ``geopandas`` similar to the one for ``pandas`` in ``networkx/conftest.py`` so that ``pytest`` doesn't try to run tests that depend on ``geopandas`` when it isn't available.  I am not sure why black isn't being run on your computer.  To confirm that you installed it, try looking at the output of ``pip list``.  If you are having trouble using the pre-commit hook, you can run black manually.  For instance, to run it on ``networkx/convert_matrix.py``: ``` black networkx/convert_matrix.py ``` You will need to run it on all the Python files you edited.  Could you also add a note to the bottom of ``doc/developer/deprecations.rst`` about the deprecations.
comment
This is a fairly big change, since we are dropping ``nx.read_shp()`` and ``nx.write_shp()``.  So it would be good if @dschult and @rossbar could comment on this more.  In particular, do you agree this is the correct way forward?  It would also be great if you could review the code at some point.
comment
@iboates I added ``Add a few gallery examples`` to your checklist.  It may make sense to add a new directory (maybe ``geospatial``) to ``networkx/examples``.  You should be able to just follow the other examples.  We use - https://sphinx-gallery.github.io/stable/index.html  to build the gallery.  So you may find the ``sphinx-gallery`` documentation helpful.  Also feel free to ask if you have any questions.
comment
I am not certain what the way forward is, so I am just thinking out loud.  1. We decided to just release 2.5 now and release a 2.6 in December before 3.0 in early 2021.  That gives us some time to figure out the best way forward.  2. The core developers don't use or know much about geospatial data.  From our perspective, ``nx.read_shp`` is one of the most difficult bits of code to maintain.  I spend more time dealing with ``gdal`` than any other dependency.  So I am motivated to remove our dependency on it somehow.  3. We have no documentation or gallery examples using geospatial data.  Here is a possible way forward that would deprecate ``read_/write_shp`` in 2.6 and remove it in 3.0.  If geopandas gets a ``make_network`` function, we could work with you to develop several geospatial examples in our gallery:    https://networkx.github.io/documentation/latest/auto_examples/index.html  I am imaging a section called ``geospatial`` containing several small examples with data, text, code, and figures.  All the examples would use geopandas and ``from_pandas_edgelist``.  We use sphinx-gallery  https://github.com/sphinx-gallery/sphinx-gallery/  to make the gallery from python scripts  https://github.com/networkx/networkx/tree/master/examples  We are planning to improve our gallery and this could be a first example.  We would also provide you with help developing the examples, but we don't know anything about geospatial data.  So you will need to supply the ideas.  We would also be happy to help you and the geopandas developers with the ``make_network`` function.  We would set up our CI system to install new releases of geopandas so that we would be able to test that nothing breaks.  geopandas could also add an example of using networkx to test things on their end.  We already do this with scikit-image, since they depend on networkx.  Whenever I make a networkx prerelease I watch the scikit-image CI system to make sure we didn't break anything they depend on.  
comment
@iboates Please reference this ticket when you propose adding this functionality to geopandas, so we can comment and offer help and answer questions about working with nx.
comment
@iboates NetworkX is deprecating read/write functionality for shapefiles (#4298) and providing gallery examples for working with geospatial data using the main packages for geospatial data analysis for Python (#4366). We are interested in making sure our gallery examples provide the recommended way to read/write geospatial data and converting them back and forth to NetworkX. We would love feedback and additional gallery examples! One of our main goals is to make it clear to our users how to get started and where to go for questions regarding geospatial data formats since we (the NetworkX developers) don't work with geospatial data and don't know how to provide guidance for users.
comment
See #4298 and #4366.
comment
@IOWq750 NetworkX is deprecating read/write functionality for shapefiles (#4298) and providing gallery examples for working with geospatial data using the main packages for geospatial data analysis for Python (#4366). We are interested in making sure our gallery examples provide the recommended way to read/write geospatial data and converting them back and forth to NetworkX. We would love feedback and additional gallery examples! One of our main goals is to make it clear to our users how to get started and where to go for questions regarding geospatial data formats since we (the NetworkX developers) don't work with geospatial data and don't know how to provide guidance for users.
comment
See #4298 and #4366.
comment
@boothby We are planning to merge this soon (it is draft status so there is plenty of time to change or reject this later).  But I wanted to make sure you had a chance to review this first (if you have time at the moment).  If you are too busy at the moment, no pressure.
comment
I am, in principle, OK with breaking backward compatibility here.  But I don't know whether this NXEP is the best way forward (mostly for a lack of thinking about it on my part than any issue with the proposal).  I trust Dan's and Kelly's opinion about this more than my own (so I am almost certain to support anything the two of you agree on).  Since Dan said he isn't "sure this NXEP approach does that separation effectively," I wonder if a better solution will be found.  I suspect a working implementation/prototype (from @boothby ) may reveal more information.  I hate "to ask" Kelly to create a PR that may not ultimately be accepted, but it may be the best way forward if they are still willing to work on it knowing the NXEP is still a draft (and hasn't been accepted yet).  Of course, this NXEP is based on a longer conversation, so it isn't like this is just coming from nowhere and is likely to be rejected.  (I.e., it seems like Dan and Kelly have mostly agreed this is the right thing to do.)
comment
If we remove ``create_using``, we should have a deprecation.  Make sure to add 1. a DeprecationWarning 2. a line to doc/release/release_dev.rst 3. a line to doc/developer/deprecations.rst 4. a line to  networkx/conftest.py
comment
See https://github.com/dschult/networkx/pull/13.
comment
I think we should avoid changing imports in this PR.  I am not sure how we should do the imports and I think we need to do more research.  The discussion on https://github.com/dschult/networkx/pull/13 is getting long (mostly b/c of me).  The other changes here seem good and should land quickly.  We should have a separate PR (perhaps a brief NXEP even) sorting out how we do imports.  In particular, we need to figure out how to stop our circular imports; currently ``` import networkx ``` gives us ``` networkx networkx.networkx networkx.nx ... networkx.nx.networkx.nx ... ```  And ``` import networkx as nx ``` gives us ``` nx nx.networkx nx.nx ... nx.nx.networkx.nx ... ```   We should do some experiments to see exactly what gets imported in what order, when.  Also, whether that changes when you use absolute vs relative imports.
comment
Thanks!
comment
+1 for option 3 ``` import numpy as np  x = np.min(np.abs(np.max(y))) ```
comment
I started looking at ``linalg/algebraicconnectivity.py`` and it needs a lot of work.  I will refactor this before 2.6 and will take care of the imports at the same time.  I'll submit a draft PR in the next week.
comment
Thanks!  This is a huge help.  To fix the failing test add ``contextily`` to ``requirements/example.txt``.  It might be nice to have at least one example of reading a local file.  However, the online geojson dataset probably suffices (assuming the dataset is not likely to move or disappear).  @dschult @rossbar @MridulS what do you think about whether we need to have the files stored in the directory or not?  It would be nice if you could beef up the docstring to say a little more about the various packages being used in each example and perhaps pointing folks to the project home page, documentation, and/or galleries as appropriate.
comment
@martinfleis We recently deprecated ``nx_shp`` https://github.com/networkx/networkx/pull/4298.  As you probably know, we (nx core developers) don't have much familiarity with geospatial data.  Our CI tests don't even include an example shapefile, so I suspect ``nx_shp`` is rarely (or ever) the recommended way to read/write shapefiles.  A quick search on stackoverflow makes that concern seem reasonable.  We also kept getting PRs fixing and issues mentioning issues with ``nx_shp``, which we were unable to confidently respond to.  Since there are several established geospatial data analysis packages for Python, our goal is to provide simple examples in our gallery for how to use these packages with NetworkX.  Ideally, these examples will provide examples of the "right way" to do things as @ljwolf suggested.  @gboeing also agreed to provide an example of working with OSMnx and NetworkX.  Once we have the geospatial gallery examples in place, I hope that users will end up being steered to the right geospatial libraries.  This will also allow us to make sure we work well with pysal, geopandas, momepy, and osmnx, since we will be running them now as part of our CI system.  Since these examples are meant to guide users to the appropriate libraries and to point users to the recommend way to handle work with geospatial data, it would be great if these examples could include more explanatory text than some of our existing examples.  In particular, it would be great if the examples could provide a brief description of the various packages being used in each example and pointing folks to the project home page, documentation, and/or galleries as appropriate.  We use sphinx-gallery for our example gallery: - https://networkx.org/documentation/latest/auto_examples/index.html  You can read more about the syntax used to provide a more notebook-like structure here: - https://sphinx-gallery.github.io/stable/tutorials/plot_parse.html#sphx-glr-tutorials-plot-parse-py  It would be great if @jorisvandenbossche could also take a look at these examples.  Since we (the NX core developers) don't really know this field, we will have to rely on you folks to provide the examples and to ensure we are leading our users astray.  This is a priority for us, so we are more than happy to quickly review, provide feedback, and answer questions.
comment
Also, if you need any additional packages installed to run the examples, just add them to ``requirements/example.txt``.  If the examples build, you can view the results in the ``Details`` link following ``ci/circleci: build artifact — Link to 0/doc/build/html/index.html `` in the CI checks below.
comment
We use black for formatting.  So you should be able to fix the style and format test failure by installing black ``` pip install black ``` and running it on the files you are changing.  You can automate this using a pre-commit hook ``` pip install -r requirements/developer.txt pre-commit install ```
comment
LGTM!  @dschult , @rossbar, @MridulS  may have additional comments and suggestions.  I am also hoping that @martinfleis and @gboeing will have time to take a quick look and provide feedback.  Let us know if you have any more questions or suggestions.  I started adding a short section on reading and writing graphs to our tutorial (#4283).  I would like to add a few sentences about geospatial data and point users to the main packages for geospatial data analysis in Python.  If you have time and / or interest, feel free to suggest text for that PR.  In particular, would it be reasonable to point people to:  https://geographicdata.science/book/intro.html  We have a few users that have been asking for better support for geospatial data in NetworkX.  I am going to point them (#2254, #3478 , #3479, #3932, #4107, #4205) to this PR.
comment
@brendan-ward in https://github.com/geopandas/geopandas/issues/1592 you suggested it may make sense to provide "a series of examples on how to use GeoPandas + NetworkX" together.  I am not sure if all the examples belong here (or even how many examples are needed) since I don't work with geospatial data.  So I am hoping you could take a look at these examples and provide feedback.  Also, if you have additional examples that you would like to see included please let us know or better yet (since none of the NetworkX developers are in a position to provide additional examples) just create a new PR including those examples.
comment
@brendan-ward Thanks for the comments.  I have two **minor** points:  1.  I like the proposed text / direction for the readme.  However, the ``examples/geospatial/readme.txt`` should be written with reStructuredText (sphinx-gallery doesn't support markdown by default and I can't find an option to change that).  I also may end up moving some of that text to the tutorial (or somewhere else) b/c it doesn't look great on the gallery page.  But that can be in a future cleanup PR that we (the core NX developers) can handle.  So just focus on the text for now.  (For that matter, we can even change the format from markdown to reStructuredText later.) 2.  I prefer having different format files, since it will demonstrate that different file formats can be used.  However, maybe it suffices to just add a comment above every file reading bit stating that many different file formats can be used (and maybe list a few).  In fact, it is probably worth adding the comment about the different file formats above each file read/write line regardless of whether the examples all use the same format or not.
comment
@ljwolf I suspect you plan to do more work on this before marking it as ready to review.  But I wonder if we should merge this now (with https://github.com/ljwolf/networkx/pull/1) and then you can make a new PR to fix things up.  The reason being that others may be making PRs that could benefit from having the data files and updtaed ``requirements/example.txt`` included.  We are already running into the missing data file issue with #4381.  Alternatively, we could make a new PR with just the data files,  ``requirements/example.txt``, and maybe the updated ``README.txt``.  Then you could rebase this PR on master...  Either option is fine with me or we can do something else.  Thoughts?
comment
Thanks!  It would be great to have several examples of working with geospatial data in our gallery.  I'll setup a template and let you know where to add your example later today.
comment
I am running out of steam, so I will get to this later next week.
comment
Yes, you should check whether your use case is covered.  If not, please add a comment to #4366 describing your use case and describing how you handle it.  @ljwolf and others should be able to provide guidance regarding whether another example is needed here or would be better handled in one of their other projects (e.g., pysal, geopandas, momepy, osmnx).
comment
@iboates I don't know anything about geospatial data, so bear with me.  1. How does this relate to #2382? 2. Installing GDAL (https://gdal.org/) is a common problem for NX users.  Is there a solution for helping users with installing GDAL?
comment
@NicolasCadieux We could definitely use help.  Currently, none of the core developers have any experience working with shapefiles.  We don't even understand the landscape for reading shapefiles in Python or whether they are the main format for spatial data.  Further, we would like to remove the GDAL dependency for networkx.  It is the hardest dependency for us to support.  (As a result, we no longer list it as a dependency in our requirements files.)  We also have no idea to what extent people are using nx_shp.  If they do use it, we don't know if that is a good idea.  Our testing only checks that networkx can read shp files that it creates.  Since we aren't familiar with this format, it is difficult for us to review PRs that "improve" nx_shp.  For instance, we aren't able to determine whether these two PRs are correct:  #4107 and #4205.  Since networkx is a pure Python library that is easy to install and is less specialized than geospatial packages, I think it makes more sense for geospatial libraries to depend on networkx rather than us depending on them.  In fact, some of the geospatial packages already have to/from networkx graph functionality.  As a result, @iboates created this issue: https://github.com/geopandas/geopandas/issues/1592  There seemed to be some interest, but it looks like someone would need to push this effort for it to happen.  I recently made a PR to deprecate nx_shp #4298.  My hope is that we geopandas will add a to/from networkx functionality.  However, it isn't clear to me from reading some of the comments to that issue whether it even makes sense to have a function that converts from shapefiles to NetworkX graphs. For instance, @brendan-ward  asked whether this would be "better handled as a series of examples on how to use GeoPandas + NetworkX, rather than adding functionality directly to GeoPandas."  Given the concerns that people familiar with geospatial data have about supporting this, I am even less certain that we should provide this functionality given we don't understand the format or use cases.  We are also trying to improve our gallery.  It would be great if we could have several examples of using different geospatial packages with NetworkX (e.g., fiona, geopandas, libpysal, momepy, OSMnx, etc.)  My tentative plan was to deprecate nx_shp and try to get some voluteers to provide some examples.  It would also be nice if someone would volunteer to write a paragraph or two providing a brief roadmap to what packages to use to read shapefiles.  Another possibility (that I am less interested in) for potentially keeping nx_shp in networkx would be to: 1. port it to PyShp so we can get rid of the GDAL dependency 2. committing to "owning" the module since someone would need to review future bugfixes.  Would you be able/willing to help out with adding to/from nx.graphs to geopandas?  It isn't clear geopandas would accept such a PR.  Would you be able/willing to create some gallery examples showing how to use geospatial packages with networkx (but not using nx_shp)?  If so, that would be awesome!  We would be more than happy to help you create the gallery examples (assuming you handle the shapefile aspects).  We would also be happy to offer help (to the extent we can) with any PRs to geopandas.
comment
I am very happy to hear you are interested in helping us with this!  There are some NX contributors/users (e.g., @iboates) who may also be able/willing to help.  And it seems likely (given the initial response to https://github.com/geopandas/geopandas/issues/1592) that there is some interest in helping out from the larger geospatial community.  The fact that shapely, geopandas, and other libraries depend on GDAL does **not** concern me.  NetworkX wouldn't directly depend on them.  Our gallery of examples would depend on them.  So we would list those dependencies in ``requirements/example.txt``.  Our ``setup.py`` contains the following: ``` install_requires = parse_requirements_file("requirements/default.txt") extras_require = {     dep: parse_requirements_file("requirements/" + dep + ".txt")     for dep in ["developer", "doc", "extra", "test"] } ``` So users installing networkx wouldn't encounter the dependencies listed in ``requirements/example.txt``.  The examples in the gallery would state that the example requires additional libraries to be installed.  If user's have difficulties installing those packages, we would just direct them to the developers of those packages.  The examples would also help us ensure that when we make changes it doesn't break things for upstream geospatial libraries, since we build the examples with every PR.  Ideally, we would be directing users that have questions about geospatial data and libraries to folks in working in with geospatial data.  And they could direct their users interested in generic network analysis code to us.  This would solve my main two concerns: 1. Since we don't use geospatial libraries (like GDAL), we are not in a good position to help users with install questions. 2. Since we don't use geospatial data, we are not in a good position to review bug reports or PRs regarding ``nx_shp``.  I also think it makes more logical sense to have geospatial libraries depend on networkx, rather than have networkx depend on geospatial libraries.  I suspect the reason that ``nx_shp`` exists is mostly b/c NetworkX existed long before many of the current geospatial libraries for Python were created (not b/c it is the best place for that functionality to exist).
comment
See #4366.
comment
@martinfleis I am not sure what the error means, but I am getting the same error on my laptop ``` Traceback (most recent call last):   File "plot_lines.py", line 76, in <module>     add_basemap(facet, crs=streets.crs)   File "/home/jarrod/.venv/nx/lib64/python3.8/site-packages/contextily/plotting.py", line 139, in add_basemap     left, right, bottom, top = _reproj_bb(   File "/home/jarrod/.venv/nx/lib64/python3.8/site-packages/contextily/plotting.py", line 225, in _reproj_bb     n_l, n_b, n_r, n_t = transform_bounds(s_crs, t_crs, left, bottom, right, top)   File "/home/jarrod/.venv/nx/lib64/python3.8/site-packages/rasterio/warp.py", line 176, in transform_bounds     xs, ys = transform(src_crs, dst_crs, in_xs, in_ys)   File "/home/jarrod/.venv/nx/lib64/python3.8/site-packages/rasterio/env.py", line 385, in wrapper     return f(*args, **kwds)   File "/home/jarrod/.venv/nx/lib64/python3.8/site-packages/rasterio/warp.py", line 61, in transform     return _transform(src_crs, dst_crs, xs, ys, zs)   File "rasterio/_base.pyx", line 1302, in rasterio._base._transform   File "rasterio/_base.pyx", line 1366, in rasterio._base._osr_from_crs rasterio.errors.CRSError: Invalid CRS: CRS.from_wkt('PROJCRS["WGS 84 / Pseudo-Mercator",BASEGEOGCRS["WGS 84",DATUM["World Geodetic System 1984",ELLIPSOID["WGS 84",6378137,298.257223563,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]],CONVERSION["Popular Visualisation Pseudo-Mercator",METHOD["Popular Visualisation Pseudo Mercator",ID["EPSG",1024]],PARAMETER["Latitude of natural origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8801]],PARAMETER["Longitude of natural origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8802]],PARAMETER["False easting",0,LENGTHUNIT["metre",1],ID["EPSG",8806]],PARAMETER["False northing",0,LENGTHUNIT["metre",1],ID["EPSG",8807]]],CS["Cartesian",2],AXIS["easting (X)",east,ORDER[1],LENGTHUNIT["metre",1]],AXIS["northing (Y)",north,ORDER[2],LENGTHUNIT["metre",1]],USAGE[SCOPE["Web mapping and visualisation."],AREA["World between 85.06°S and 85.06°N."],BBOX[-85.06,-180,85.06,180]],ID["EPSG",3857]]') ``` as the CI is.
comment
I fixed some typos: https://github.com/martinfleis/networkx/pull/1
comment
It would be great if you could also add an example for our gallery.  It is pretty straightforward.  For example, this page   https://networkx.github.io/documentation/latest/auto_examples/drawing/plot_circular_tree.html is produced from this   https://github.com/networkx/networkx/blob/master/examples/drawing/plot_circular_tree.py  In the ``examples/drawing`` directory, just create a file named ``plot_multipartite_graph.py`` similar to the above example.
comment
Thanks for the gallery example!
comment
It would be nice to have a test for this, if you have the time.
comment
@rossbar I agree with you.  Edges should only be drawn if both endpoints are in the graph.
comment
Even if we get rid of the ``try/except ImportError`` for ``numpy``, ``scipy``, etc.  We still need it for our optional dependencies like ``pygraphviz``, ``pydot``, and any new optional dependencies we have in the future.  Are you planning to add this to other tests in this PR?  Or will that be a separate PR?  Maybe it would be best to start with ``pygraphviz`` and ``pydot``.  I think it would be better to remove the ``try/except ImportError`` for ``numpy``, ``scipy``, etc. instead of using this decorator.  Is there an issue with just removing the ``try/except ImportError`` for ``numpy``, ``scipy``, etc.?  I assumed taking them out wouldn't cause a problem since we only do it sometimes and other times we just have the import statements inside the function.
comment
I thought this was for when you have, e.g., ``numpy`` installed and want to test that if it wasn't installed that the appropriate thing happens.  So if we have ``pygraphviz`` installed, but want to test that it raises an error or what not when it isn't installed we would use this decorator.  I also thought this was mainly to improve test coverage (since we only calculate the test coverage when all packages are installed).  We already run tests without ``numpy``, ``scipy``, etc. installed.  So we are already testing the ``except`` branch in our CI system.  But when we report coverage we do install them.  So this won't increase the tests we run just the coverage report.  Am I missing something?
comment
Hmm.  Without looking carefully at all the specific examples, I would think we should have two ways of dealing with things:  one for default dependencies and on for extra dependencies.  And then we should be consistent for all instances of both types of dependencies.  But that may not make sense, so it would be great if you could look through the examples and see what you think.  Here are the cases I am aware of:  I am not sure what to do about ``convert.py``.  It may make sense to keep it as an exception.  Another option (maybe less desirable) would be to test whether we are on PyPy instead.  However, I think an experienced user may be able to install numpy, scipy, etc. on PyPy.  The main issue, I think, is that there are no wheels.  I haven't taken a close look, but ``utils/misc.py``, ``utils/decorators.py``, ``readwrite/gexf.py``, ``readwrite/graphml.py``, and  also have the ``try/except ImportError`` pattern for numpy.  And maybe they should stay as well.  ``generators/community.py`` and ``generators/geometric.py`` have the ``try/except ImportError`` pattern for scipy.  ``readwrite/graphml.py`` has the ``try/except ImportError`` pattern for lxml.  The last issue is ``conftest.py``, which I have been meaning to fix for sometime (and that should probably be in a separate PR.  I think I added a bunch of ``` try:     import numpy      has_numpy = True except ImportError:     has_numpy = False ``` stuff.  In retrospect, I don't think that is ideal.   That doesn't always work.  For instance, if you don't have scipy installed and try to run ``pytest networkx/linalg/``, it has a bunch of failures complaining about scipy not being installed.  We probably should decorate the individual tests with something like ``` @pytest.mark.skipif(importlib.util.find_spec("xx") is None, reason="xx not installed") ``` and remove the stuff from ``conftest.py``.  That said, for now, maybe we should start by treating ``lxml`` and ``pydot`` the same as ``pygraphviz``, investigate the ``try/except`` code for the default dependencies in the cases listed above, and deal with ``conftest.py`` in a separate PR.  Thoughts?
comment
This isn't specific to this PR, but we keep getting the following error ``` FAILED networkx/classes/tests/test_special.py::TestOrderedGraph::test_memory_leak ``` I keep restarting the tests on different PRs and it disappears.  I haven't kept a close watch, but I think it is always on the ``default / test (macOS, pypy3) (pull_request)`` test.  One of us should look into this at some point.
comment
I marked this as draft after talking to Ross.  We have some other things we want to focus on now, so we will come back to this later (likely after 2.6 is released).
comment
@mrecachinas Sorry for the delay.  Ross or I will take a look very soon!  We are planning to release 2.6 soonish and I want to get this in first.  Thanks for your patience.  Despite our slow response time, we would also like to get Panther++ in soon.  So I hope you are still interested in contributing it!
comment
For the failing style / format test, you just need to install black ``` pip install black ``` and run it on the files you are changing.  You can automate this using a pre-commit hook ``` pip install -r requirements/developer.txt pre-commit install ```  More details about contributing to NX are available here: https://networkx.org/documentation/latest/developer/contribute.html
comment
There seems to be enough change that a deprecation may be warranted.  Also as part of the numpy matrix cleanup (@rossbar), I wonder if we should revisit the API completely for the 3.0 roadmap.  For instance, Aric suggested  > to generalize ``from_numpy_matrix`` to ``from_adjacency_matrix`` and allow either a numpy matrix or a square pandas dataframe  in  https://github.com/networkx/networkx/issues/2029#issuecomment-192766036.  We should start thinking about whether it makes sense to revisit ``networkx/convert_matrix.py `` soon anyway.   For example, #4107 adds ``from_geopandas_edgelist`` and ``from_geopandas_edgelist``.  Maybe we only want ``to_ / from_`` functions for ``adjacency_matrix``, ``edgelist``, and so on.  We should also try to follow our new deprecation policy (if not, we should update it to make sure it reflects our actual policy): - https://networkx.github.io/documentation/latest/developer/deprecations.html  And we should also add any deprecations to the list at the bottom of that page (i.e., ``doc/developer/deprecations.rst``)
comment
Yes, the "2-release deprecation cycle" would be deprecate in 2.5 , 2.6 and remove in 2.7.  Since we are releasing 3.0, we are going to use a 1-release deprecation cycle for some things.  The policy now says "the 2-release deprecation cycle is not a strict rule."  The policy was copied from scikit-image and it hasn't been included in a release yet.  So we can either just agree that 1) the 3.0 release is special or 2) we could change the policy to a "1-release deprecation cycle" now and change back to a "2-release deprecation cycle" after the 3.0 release.  It may be worth going with option 2 so that it is clearer to users.  Thoughts?
comment
See #4112.
comment
Could you add a note to the ``Deprecations`` section of ``doc/release/release_dev.rst``?
comment
LGTM!  Also, Ross is looking into the circleci issue: https://github.com/networkx/networkx/pull/4388  If it isn't easy to fix, he may just disable (or remove) the example later today (so I am just ignoring it until he decides what to do).  It has been a pain to get it working and then it broke somehow (Ross looked and it wasn't obvious what's changed.)
comment
LGTM!  It would be great if @ljwolf, @martinfleis could take a quick look.  @gboeing maybe you could take a quick look at https://github.com/ljwolf/networkx/pull/1.
comment
Thanks!  I'll let @ljwolf @martinfleis provide feedback on the content.  For the failing style / format test, you just need to install black ``` pip install black ``` and run it on the files you are changing.  You can automate this using a pre-commit hook ``` pip install -r requirements/developer.txt pre-commit install ```  Also ``sphinx_gallery`` isn't running it b/c it only runs examples name ``plot_<something>.py``.  So just rename the example ``examples/geospatial/plot_dissolve_polygons.py``.
comment
Adding the edit comment from above (in case I edited the comment after you read it).  Also ``sphinx_gallery`` isn't running it b/c it only runs examples name ``plot_<something>.py``.  So just rename the example ``examples/geospatial/plot_dissolve_polygons.py``.
comment
@brendan-ward I suspect you are aware of this, so this comment is mainly to keep others from trying to investigate the failed test.  ``nuts1.geojson`` is added in #4366.  So when that is merged and this is rebased on master, the test should no longer fail due to the missing file.
comment
Maybe we should deprecate copy before the 2.6 release.  We could then make sure to point out the deprecations in the release announcement and ask folks to let us know if they are using it.
comment
It looks like there is still room for improvement, but I agree w/ Ross that we should merge this and improve in a separate PR.
comment
I noticed that you are working on your master branch.  You should always work on a feature branch.  You may find reading our contributor guide helpful for learning how to set up your development environment and the basic workflow for contributing: https://networkx.org/documentation/latest/developer/contribute.html  If anything is unclear in the contributor guide, please let us know.  Also, I would avoid implementing things in our utility subpackage unless you need it for a specific network analysis algorithm you are implementing.  The utility code is there to provide generic functionality needed by other parts of the library.  We are actively working to remove old utility code that we no longer need.
comment
No worries about difficulties with on the on ramp.  There is a fair bit of technical onboarding necessary to contribute to open source Python projects.  Fortunately, that work will apply to most open source Python projects, so it will get much easier after you've done a few PRs.  In the meantime, hopefully the contributor guide will provide enough guidance to help walk you through the process.  Please let us know if you have any questions.
comment
@dschult Would it make sense to add a short note about this in ``doc/release/release_dev.rst``?
comment
I marked this as a draft and removed WIP, which is easier for us to track the WIP status.  Since WIP isn't hooked into GitHub, we used to merge and forget to remove WIP.
comment
We currently don't use Cython and will need to make a decision whether we will start before merging this.  Historically, our focus has been on simple implementations over performance.  But, now is a good time for us to revisit this.  We have plenty of time before the next release, so let's leave it in the PR until we revisit whether or not to change our Cython policy.  We may need to create a NXEP to decide what we are going to do about optimizing code for performance.  Thanks for your patience.
comment
I am not sure I like having the doctests behave differently than Python.  Is this a widely used package?  What other projects use it?
comment
I am not so concerned with it not behaving like the doctest module, but that it isn't how the Python interpreter works.  These are supposed to be little snippets of how the code behaves at that commandline.  In your example above, the output of the print statements doesn't show up after the command, but after all the print statements.  I am also -1 on using ```>>>``` when Python should have ```...```
comment
I also like the name ``readwrite/text.py``.
comment
I agree that it is better to have this discussion separately.  It isn't essential to this PR, which has a lot of good stuff.  I also appreciate that you split this PR up to make it easier to review.  It is great that you will have time soon to work on finishing this up.  I am looking forward to it.  FYI, I am going to be pretty busy for the rest of the year and I have a bunch of small items I want to make sure get included in the upcoming 2.6 release as well as spending most of my time working on my dissertation.  So, if I am not able to keep up with your work, please don't take it as an indication that I am not interested.  Our goal for the 2.6 and 3.0 releases is to remove technical debt and improve the PR review process.  The goal is to start focusing more on exciting new features and algorithms after 3.0, which will be released in early 2020 (hopefully January).  You've probably noticed that we've been adding things like the mission statement and other development guide stuff.  Our hope is to regrow the core developer community over the next year.  Thanks for bearing with us.
comment
It looks like pip tries to build the mayavi wheel before it installs anything from the requirements file.  It needs vtk and something , so I made ``example-requirements.txt`` with vtk and pyqt5.  It was also complaining about not having Qt, so I installed pyqt5 instead of pyside2. See cda9757  So mayavi is being installed and run now, but we have this error  ``` make: Entering directory '/home/circleci/repo/doc' sphinx-build -b html -d build/doctrees   . build/html Running Sphinx v3.2.1 qt.qpa.xcb: could not connect to display  qt.qpa.plugin: Could not load the Qt platform plugin "xcb" in "" even though it was found. This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.  Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, webgl, xcb.  make: *** [Makefile:46: html] Aborted (core dumped) make: Leaving directory '/home/circleci/repo/doc' ```  I failed to fix this in 5a52c5d, b725200, and bd7dfa4.  After you see what I tried feel free to get rid of those commits.
comment
I am not sure about the terminology here.  But I suspect ``densification`` means something else.  Dedensification is more like a compression method (it reduces the number of edges by increasing the number of nodes). ![dedensification](https://user-images.githubusercontent.com/123428/95292702-d9c0c200-0826-11eb-9d49-ce14df5b0b5b.png)  So sparsification would have been better maybe, but it was already taken.  This has a good discussion of various graph summarization methods and applications: https://dl.acm.org/doi/abs/10.1145/3186727  Core techniques include: - grouping methods:  node and edge based - bit compression methods:  lossy and lossless - sparsification methods - influence based methods  And dedensification is the name an edge-based grouping algorithm.  I suspect densification involves dynamic graphs and involves the evolution of edge density.  I am not sure there should be a densification function.  How would people use it?  The reason for dedensification is to reduce a big graph to run some algorithms on it.  The densification just reconstructs the original graph, I think.  Normally you wouldn't delete the original graph.  The original large graph would be your input data.  Maybe the module should be ``summarization`` and dedensification would be the first function for doing graph summarization.
comment
It would be good to add an example to the gallery.  Could you reproduce the figure?  Something like this: https://github.com/networkx/networkx/blob/master/examples/algorithms/plot_decomposition.py  Except you would create the original graph, call dedesification on it, then plot it using nx and plt.  You might be able to use ``nx.multipartite_layout`` to plot the two graphs.  If you get something started, we will help you make it nice.
comment
Let's see what Dan and Ross think about the name and structure.  You could include the code to un-dedensify in a doc example.  Create original graph, a dedensified graph, and then you could show that un-dedensify the dedensified graph reconstructs the original graph.  For the visualization part, you may find it easiest to just look at the gallery: https://networkx.github.io/documentation/latest/auto_examples/index.html  You can click on any of the examples to see the code that generated the figure.  Some of the examples will have parts of what you want to draw.  I often use the examples to cobble together new plots.
comment
For style and formatting, we use: https://github.com/psf/black/  There are instructions for setting up pre-commit to automatically run black for you: https://networkx.github.io/documentation/latest/developer/contribute.html  Basically, you need to do the following in your virtual environment: ``` pip install -r requirements/developer.txt pre-commit install ```  Then when you type ``git commit``, pre-commit will run black for you.  You can do it manually as well: ``` pip install black==20.8b1 black examples/algorithms/plot_dedensification.py ```  
comment
I am not sure it makes sense to provide the ``expansive=True`` option.  It seems to me the authors focused on the simpler version of the algorithm (which has the **problem** that it doesn't always  produce the desired goal of reducing the number of edges) because simpler algorithms are easier to discuss and analyze.  They justified focusing on the simpler (but wrong) algorithm because the modifications to make the algorithm correct (in the sense that it didn't make the graph larger)  "caused only small differences in query performance."  In practice, I don't see the use case for introducing nodes and not reducing the number of edges.  Could you explain your use cases in more detail?  Do other implementations of this algorithm implement both the nonexpansive version and the simpler one.  By the way, I will have more time later this week to review this more carefully.  But I think Dan is right that this is close to merging.
comment
I think this should work as well, but I would like to look into it more.  @Nao83 it would be great if you could let's us know what you find out.  
comment
Do we need/want to keep ``nx.info``?
comment
Could you a note in both: - doc/release/release_dev.rst - doc/developer/deprecations.rst
comment
@rossbar I merged #4235.  Could you rebase on master when you have a chance?
comment
It looks like you will manually need to redo 0d0ebe0, since it is keeping the reformatted text and black is fine w/ it either way.  I prefer the shorter lines here and the reformatting isn't relevant for this PR.
comment
This LGTM.  Two final minor suggestions:  1)  In ``convert_matrix.py`` in the example for ``from_numpy_matrix`` we can change ```     >>> import numpy as np     >>> A = np.array([[1, 1], [2, 1]])     >>> G = nx.from_numpy_array(A)     >>> G.edges(data=True)     EdgeDataView([(0, 0, {'weight': 1}), (0, 1, {'weight': 2}), \ (1, 1, {'weight': 1})]) ``` to ```     >>> import numpy as np     >>> A = np.array([[1, 1], [2, 1]])     >>> G = nx.from_numpy_array(A)     >>> G.edges(data=True)     EdgeDataView([(0, 0, {'weight': 1}), (0, 1, {'weight': 2}), (1, 1, {'weight': 1})]) ``` now that we allow 88 characters per line.  2. Also in ``from_numpy_matrix``, ```     # This should never fail if you have created a numpy array with numpy...     import numpy as np ``` (This was added years ago.)  Should we remove those two lines, since ``np`` isn't used in the function?  
comment
It looks like the gallery example had a bad random seed this time.  So the cube is mangled.  We should probably add seeds to all the layout examples that use randomness (making sure the seed we choose provides pleasant output).
comment
@rossbar I just noticed that the docstring doesn't make sense. ``` Draw a graph with matplotlib, color by degree. ``` Should be something like ``` Color edges and nodes as well as label nodes using Matplotlib. ```
comment
How about using the Tableau Palette? https://matplotlib.org/3.3.1/gallery/color/named_colors.html
comment
@rossbar I prefer the alternative version.
comment
We also need to wait until there are prebuilt wheels for 3.9 for our dependencies (e.g., scipy).  That is why you see ``python_version<'3.9'`` in ``requirements/default.txt``.  Once prebuilt wheels are available for those dependencies, I will remove those lines.  Are you running into issues installing v2.5 on Python 3.9?  If so, what errors are you seeing.
comment
Please do.  Thanks!
comment
@mehdinemo Thanks for writing the tests.  I pushed them to the ``patch-1`` branch on ``mehdinemo/networkx`` so that they are visible here now.  I also moved them from the top-level tests directory (``networkx/tests/test_kernigan_lin.py``) to the existing tests for this module (``networkx/algorithms/community/tests/test_kernighan_lin.py``).  It looks like your tests check that the code has the previous error.  Please change them to confirm that your change fixed this problem (i.e., these tests should pass).  In order for these tests to show up here, please push your changes to the ``patch-1`` branch on ``mehdinemo/networkx``.  You will need to pull the changes I made first.
comment
I prefer ``DiGraph named "asdf" with 3 nodes and 2 edges`` and ``DiGraph with 3 nodes and 2 edges`` over ``DiGraph(name:"asdf",nodes:3,edges:2)`` as well.
comment
I won't have time to review this for a bit.  But since this is our first NX-specific NXEP, I wasn't sure how to label this.  I added Documentation, Enhancement, and Needs Review.  Maybe we should add a NXEP label?  @rossbar Do you have any suggestions?  We should have a plan for how to do this going forward.
comment
Thanks for this.  Would you mind adding a test so that we don't break this again in the future here: https://github.com/networkx/networkx/blob/master/networkx/readwrite/tests/test_graphml.py
comment
@PureTryOut Can you verify that the fix works?
comment
Just run black and ignore pep8speaks.
comment
Hmm, that works for me with graphviz 2.42 and pygraphviz 1.6.  What version of pygraphviz and graphviz are you using?
comment
I couldn't really see what was happening with the original example. ![old](https://user-images.githubusercontent.com/123428/90317447-8002e200-dede-11ea-81c6-39f002db4830.png) I also thought it would be helpful to see some of the intermediate steps, so I added the moralized graph. ![new](https://user-images.githubusercontent.com/123428/90317794-a88bdb80-dee0-11ea-818e-0eb2369a57ec.png)  The example still needs improvement.  1. It should have some text explaining what it happening.  For example, if the first subplot is supposed to be a bayes net maybe it should describe the factorization (e.g., $p_A \cdot p_{B|A} \dots $) and so on.  It doesn't need much, but just having a couple of lines of code shouldn't be sufficient for a gallery example.  2. The bayes net and the moralized graph nodes aren't in the same locations.  I thought having the same layout would ensure they line up.  What am I missing?  3. As noted in the docstring, the junction tree isn't unique.  But maybe we should (arbitrarily) make it so (possibly w/ a flag).  I am not sure there is an advantage to having it change everytime it is run.  It certainly makes making nice looking examples more difficult.  It also makes testing more difficult.  I suspect all the tests must use graphs with unique decompositions.
comment
@dschult , @rossbar  Should we use graphviz for the layout?  It would be nice to have the node labels automatically make the node size correct.  It is also annoying that it currently sometimes hides the edges.
comment
It would be nice to have plots that look more like the ones on page 3 and 12 of Mark's tutorial: https://ai.stanford.edu/~paskin/gm-short-course/lec3.pdf
comment
@rossbar The reason the junction tree is not deterministic is that ``chordal_graph_cliques`` in ``algorithms/chordal.py`` returns the **set** of maximal cliques.  I think the easiest way to fix it may be to change ``` cliques = [tuple(sorted(i)) for i in chordal_graph_cliques(chordal_graph)] ``` to ``` cliques = [tuple(sorted(i)) for i in chordal_graph_cliques(chordal_graph)] cliques.sort() ``` in ``junction_tree`` in ``algorithms/tree/decomposition.py ``.
comment
@dschult Why don't we change ``chordal_graph_cliques`` from ```     cliques = set()     for C in (G.subgraph(c).copy() for c in connected_components(G)):         cliques |= _connected_chordal_graph_cliques(C)      return cliques ``` to ```     for C in (G.subgraph(c).copy() for c in connected_components(G)):         if C.number_of_nodes() == 1:             yield frozenset(C.nodes())         else:             unnumbered = set(C.nodes())             v = arbitrary_element(C)             unnumbered.remove(v)             numbered = {v}             clique_wanna_be = {v}             while unnumbered:                 v = _max_cardinality_node(C, unnumbered, numbered)                 unnumbered.remove(v)                 numbered.add(v)                 new_clique_wanna_be = set(C.neighbors(v)) & numbered                 sg = C.subgraph(clique_wanna_be)                 if _is_complete_graph(sg):                     new_clique_wanna_be.add(v)                     if not new_clique_wanna_be >= clique_wanna_be:                         yield frozenset(clique_wanna_be)                     clique_wanna_be = new_clique_wanna_be                 else:                     raise nx.NetworkXError("Input graph is not chordal.")             yield frozenset(clique_wanna_be) ``` and delete ``_connected_chordal_graph_cliques``.  This better matches ``find_cliques`` in ``algorithms/clique.py``.  For now, we could put a deprecation warning in saying that in 3.0 ``chordal_graph_cliques``  will return a generator instead of a set.
comment
I updated the [gallery example](https://117-890377-gh.circle-artifacts.com/0/doc/build/html/auto_examples/algorithms/plot_decomposition.html#sphx-glr-auto-examples-algorithms-plot-decomposition-py) to use graphviz for its layout and I made the first two subplots share axes limits.  We can improve it later.  First, I would like to decide what to do about  #4162.  @dschult I think we should squash and merge this PR.  Decide what to do about #4162.  And then figure out why ``draw_networkx`` is clipping the plot.
comment
GDAL is normally a pain to install.  Every OS I have installed it on has required different steps.  I recently moved it to put it in `requirements/extras.txt` to help make it clearer that it would be more difficult to install.  Could you make a new virtual environment and check if ``` $ pip install 'gdal>=1.10.0' ``` works on your system?  If so, what system are you on?  Maybe we should take `gdal` out of `all`.
comment
@dschult @stefanv Search engines have been returning links to old versions of our documentation.  We want them to point to our stable docs first.  PR #3707 should handle things going forward.  I believe we need to add the canonical URL information to documentation from older releases:  https://github.com/networkx/documentation  Here is a short script to do that: https://gist.github.com/jarrodmillman/678d509d53f0326b1fcfb0f8b30b5c1c I would like to update the old docs sometime this weekend, so it would be great if you both could take a  quick look at my script and let me know if you have any suggestions or see any potential issues.  ## Sphinx / html_baseurl / canonical_url  Sphinx has  ``` html_baseurl      The URL which points to the root of the HTML documentation.     It is used to indicate the location of document like canonical_url.      New in version 1.8. ``` from https://www.sphinx-doc.org/en/master/usage/configuration.html.  But that didn't seem to do anything.  May be that was because we use the sphinx_rtd_theme (I haven't checked whether it works with other themes yet).  Adding this ``` html_theme_options = {     "canonical_url": "https://networkx.github.io/documentation/stable/" } ``` to `conf.py` did work as you can see in PR #3707.  ## Sitemaps  We may want to create a sitemap, but I haven't looked into that much.  Here some links that may be helpful: - https://github.com/readthedocs/readthedocs.org/issues/557 - https://github.com/readthedocs/readthedocs.org/pull/5122 - https://github.com/jdillard/sphinx-sitemap  ## Next Steps  I think many of the other projects have similar issues, so if this works I will likely try (by creating a PR) to get other projects to do something similar.
comment
I could check if the new URL exists and handle it if not.  For example, instead of just ``` insert = f'{base}{path}"/>' write_file.write(insert) ``` I could do something like ``` # check if it exists url = url_base + path if requests.get(url) == 200:     insert = f'{base}{path}"/>'     write_file.write(insert) else:     # algorithms.centrality.html -> algorithms/centrality.html     path = path.replace(".", "/", path.count(".") - 1)     url = url_base + path     if requests.get(url) == 200:         insert = f'{base}{path}"/>'         write_file.write(insert) ``` where ``` url_base = "https://networkx.github.io/documentation/stable/" ```  We may not get all of the pages this way, but it may be enough.  I will see if I can find any other missing links and let you know what I find.
comment
I updated the script to handle some of the mapping: https://gist.github.com/jarrodmillman/678d509d53f0326b1fcfb0f8b30b5c1c It doesn't cover everything, but it gets a fair bit.  I may try to improve it over the weekend. 
comment
I added EOL warnings to old documentation: https://github.com/networkx/documentation/commit/faaebf12b506a8c80ca66975140ef7447e5b548e  And ``rel=`` links: https://github.com/networkx/documentation/commit/13195bc8c807932dc9b07fc95790c73d3d4314ac  For example, on - https://networkx.github.io/documentation/networkx-1.10/ - https://networkx.github.io/documentation/networkx-1.9/  you will see a ``Warning`` near the top of the page and you will find `    <link rel="canonical" href="https://networkx.github.io/documentation/stable//index.html"/>  ` near the top of the page source.
comment
@dschult @rossbar @MridulS I think the changes mostly worked.  Before hand when I searched ``networkx add_node`` or ``networkx add_edge``, I would often see 1.9 or 1.10 links on google, bing, yahoo, and others.  It took awhile for all three to update, but they mostly seem correct now.  I am still seeing this PDF pop-up at the top occasionally: https://www.bu.edu/networks/files/2012/08/networkx_tutorial.pdf For example, https://search.yahoo.com/search?p=networkx+add_node  Maybe we should ask them to remove it? 
comment
If we notice more problems, we can try again.
comment
@DNiquette16 This branch has conflicts that need to be resolved.  Also if you haven't already, please run black to format the code: ``` pip install -r requirements/developer.txt  pre-commit install ``` before making your final commit and black will be run automatically for you.  You can also run it manually: ``` black . ```  If you don't have time to take care of this, no worries.  I will do it before merging your PR later tonight or tomorrow.  Thanks!  PS.  If you haven't already, you may want to look over ``CONTRIBUTING.rst`` (also available here:  https://networkx.github.io/documentation/latest/developer/contribute.html) at some point.
comment
How about `_TestGraph`, `_TestGraphEdgeSubgraph`, etc?
comment
That is fixed on master and will be in the next release:  https://github.com/networkx/networkx/milestone/13  If you need the fix now, you will need to install the development version: https://networkx.github.io/documentation/latest/install.html#install-the-development-version
comment
https://github.com/networkx/networkx/commit/4b59ae42d52980852f795811426254dd06d266b3
comment
That fixes a few things, here is the specific fix:  https://github.com/networkx/networkx/commit/4b59ae42d52980852f795811426254dd06d266b3#diff-9bb0b5cc53a72d31dc3ce5ed61281901
comment
We use psf/black to format code now.  So you don't need to manually fix all the pep8 issues.  Instead install and run black and it will fix these issues for you:  https://github.com/psf/black
comment
Is the issue that when you call the alias (e.g., ``binomial_graph``) you get the docstring for the function it is an alias for (e.g., ``gnp_random_graph``)?  If so, maybe we should replace ``` binomial_graph = gnp_random_graph ``` with something like ``` def binomial_graph(n, p, seed=None, directed=False):     """Returns a binomial graph.      Notes     -----     This is an alias for ``gnp_random_graph``.  See the ``gnp_random_graph``     docstring for more details.     """     return gnp_random_graph(n, p, seed, directed) ``` and remove ``` The functions binomial_graph and erdos_renyi_graph are aliases of this function. ``` from ``gnp_random_graph``.  @dschult , @rossbar Do you have any thoughts about this?  We may want a general pattern, since we have aliases elsewhere.  For example, ``` classes/digraph.py:    # alias out_edges to edges classes/multidigraph.py:    # alias out_edges to edges algorithms/bipartite/matching.py:#: This function is simply an alias for :func:`hopcroft_karp_matching`. ``` There could be other examples, which aren't as easily found with grep.
comment
My preference is to leave the code as it was.  There are a mix of how other projects handle this.  Before I suggested the change above, I did a quick search of NumPy, SciPy, and scikit-image.  Sometimes they do what we did.  Sometimes they do what @ibraheem-moosa proposed.  Sometimes they do what I proposed.  Sometimes they deprecate aliases and then remove them.  I didn't keep notes nor did I keep track of what the most common pattern was.  @ibraheem-moosa Could you explain the problem you are trying to fix?  I guessed your concern was that when you use an alias (e.g., ``binomial_graph``) that you get the docstring from ``gnp_random_graph``.  Is that your concern?  My concern with the original proposed change is that it made all three functions the same (i.e., aliases of each other).   However, that doesn't seem correct to me.  In my mind, we have a function ``gnp_random_graph`` and it has two aliases:  ``binomial_graph`` and ``erdos_renyi_graph``.  The original docstring captures this.
comment
Maybe we should follow ``np.conj``   https://github.com/numpy/numpy/pull/13337/files and replace ```     The functions :func:`binomial_graph` and :func:`erdos_renyi_graph` are     aliases of this function. ``` with  ```     Notes     -----    ``binomial_graph`` and ``erdos_renyi_graph`` are aliases for ``gnp_random_graph``:      >>> nx.binomial_graph is nx.gnp_random_graph       True     >>> nx.erdos_renyi_graph is nx.gnp_random_graph     True ``` in the ``gnp_random_graph`` docstring.
comment
The test failure is from my travis-ci change.   So we can ignore the error.
comment
@rossbar I fixed the conflict, which I believe was due to me running black.  I wanted to doublecheck with you, but I believe there is now no need for @fuglede to rebase.
comment
We don't support ``python3 setup.py test``.  If you want to run the tests, please see:   https://networkx.github.io/documentation/latest/install.html#testing
comment
It looks like there is a problem with using ``pytest-xdist``.  Remove ``-n auto`` and your tests should pass.
comment
@rossbar Have you used ``pytest-xdist``?  Do you have any idea what is happening here?  It seems like when using ``pytest-xdist``, ``TestKatzCentralityDirectedNumpy`` is not inheriting the setup.
comment
> Hmm, no I'm not familiar with `pytest-xdist` so at first glance the problem is not obvious to me. I'd have to look at it more closely.  It wasn't obvious to me what the issue was either.  It could be a bug in ``pytest-xdist``.  I am closing this issue, since at worse we have a bug in our test suite that causes an issue when you use a ``pytest-xdist``.
comment
See https://github.com/networkx/grave
comment
What command did you type?  I am surprised that `python setup.py egg_info` would need to download anything.  And I am not sure why it is trying to install gdal.  That is an extra dependency, which is tricky to install.  What version of setup tools are you using?  Do you need to install from source?  If not, you can install networkx via `pip install networkx`.  In the future, it is easier if you could provide text instead of a picture.  It is harder to read (and impossible to cut and paste) text from a picture.
comment
This was changed from v1.x to v2.x with a node=nodes fix temporarily put in place. With the removal of support for Python 2.x, we have taken the opportunity to clean up some of the deprecated code, including this removal of the old G.node. Please update your code to G.nodes as that is the up-to-date attribute to use and has been since v2.0.  I hope this actually turns out to be a simple search and replace operation for you. 
comment
PR #3757 was merged.
comment
I will look into whether this should be added as part of sphinx-gallery or whether we should just add it ourselves.  Either way, I will fix this before nx 2.5.
comment
@dschult  The reason it didn't show up was an oversight on my part (see #3722).  Initially, I didn't test networkx on Python 3.8 with all our optional dependencies (e.g., NumPy) as not all the packages supported Python 3.8 at the time.  It looks like now all our optional dependencies have releases or prereleases supporting 3.8 (according to our tests).  @s-t-e-v-e-n-k a PR would be much appreciated.  You should be able to handle this just like I handled the other tests in #3594.  Also please remove ```   allow_failures:     - python: 3.8 ``` from `.travis.yml` in your PR.
comment
I think the numfocus one is too long and includes stuff that isn't completely relevant.  I was imaging something closer to this: - https://github.com/networkx/grave/pull/23/files
comment
I went ahead and modified the SciPy CoC.  I also volunteered @dschult and @stefanv along with myself to serve on the committee.  We still need to get an email address.  I see that scikit image is using groups.io.  Is that a reasonable choice?  I also added  - Senior `NumFOCUS staff <https://numfocus.org/code-of-conduct#persons-responsible>`__: conduct@numfocus.org.  as an alternate contact.  I suppose we should wait until they agree for us to be an affiliate before merging this. 
comment
I spoke with Stefan about the follow-up guide and decided to leave this as is for now.  We can add the follow-up guide once we have more experience.
comment
We don't use semantic versioning.  Neither does Python, numpy, scipy, matplotlib, pandas, scikit-image, scikit-learn, etc.  (Many non-Python projects also don't use semantic versioning.  For example, ruby, rails, linux, npm, etc.)  The code you are using is from networkx 1.x and was deprecated over two years (and 4 releases) ago when we released 2.0.  The last released version of networkx where it wasn't deprecated was in early 2016.  If you are unable to update your code, please continue using networkx 2.3 or earlier.  When you are ready to migrate to networkx 2.x, please take a look at the migration guide: https://networkx.github.io/documentation/latest/release/migration_guide_from_1.x_to_2.0.html 
comment
The `selfloop` methods were deprecated as graph methods in favor of networkx functions in 2.0.  In 2.4, we removed the deprecated method.  Instead of `g.selfloop_edges()` use `nx.selfloop_edges(g)`. There is more information here:  https://networkx.github.io/documentation/stable/release/migration_guide_from_1.x_to_2.0.html
comment
According to   https://github.com/harisbal/networkx/tree/master your master "branch is 16 commits ahead, 2 commits behind networkx:master. "  I suspect your feature branch is off that.  You should keep your master in synch with networkx:master.  You may find this file [CONTRIBUTING.rst](https://github.com/networkx/networkx/blob/master/CONTRIBUTING.rst) helpful.
comment
Thanks for the suggestion.  Rather than add a flake8 check to travis, we enabled pep8speaks.  You can see what it looks like here: #3669
comment
@pep8speaks Suggest a diff 
comment
@PalAditya I realized we have some issues with pep8speaks, so I created a new PR and cherry-picked your commit so you will be listed as the author.  I also noticed that you are working directly on your master branch.  You should probably work on a non-master branch in the future.  Take a look at the top of the `CONTRIBUTING.rst` file.
comment
Travis and AppVeyor are running pytest now.  For some reason, it is taking much longer (e.g., 27 min vs. 3 min) to run the tests now.  Until we sort things out, I reduced the number of builds.  We may need to reduce it further.  ## Pytest https://travis-ci.org/networkx/networkx/jobs/594894127  ``` $ source tools/travis/script.sh /home/travis/venv/lib/python3.8/site-packages/networkx  collected 3606 items / 2 skipped / 3604 selected 251 failed, 2970 passed, 358 skipped, 3 xfailed, 5744 warnings, 26 error in 1656.92s (0:27:36) ```  ## Nose https://travis-ci.org/networkx/networkx/jobs/594301427  ``` $ source tools/travis/script.sh /home/travis/venv/lib/python3.8/site-packages/networkx  Ran 3764 tests in 201.532s OK (SKIP=94) ```
comment
I am working on getting rid of some of the warnings.  @dschult could you take a look at the 4 remaining failures?
comment
With all optional dependencies installed:  > 3614 passed, 3 xfailed, 9365 warnings in 768.21s (0:12:48)
comment
> 3614 passed, 3 xfailed, 9054 warnings in 808.61s (0:13:28)  @dschult Stefan and I are about to lose power soon, so we won't be online for a day or so: - https://www.sfgate.com/california-wildfires/article/pge-potential-power-outage-map-wind-fire-14501332.php - https://www.sfgate.com/bayarea/article/school-closure-PG-E-power-shutoff-Bay-Area-14502007.php  Hopefully it will just be a day, but it may be longer.  If you have time and interest, it would be great if you could make progress on these tasks while we are offline:  ## Fix warnings  We need to go through the warnings and fix as many as we can.  Pytest is ignoring some of our tests (e.g., tests with an `__init__` constructor and yield tests):  ``` =============================== warnings summary ===============================  algorithms/centrality/tests/test_degree_centrality.py:10    /home/travis/venv/lib/python3.7/site-packages/networkx/algorithms/centrality/tests/test_degree_centrality.py:10: PytestCollectionWarning: cannot collect test class 'TestDegreeCentrality' because it has a __init__ constructor (from: algorithms/centrality/tests/test_degree_centrality.py)      class TestDegreeCentrality:  algorithms/coloring/tests/test_coloring.py:41    algorithms/coloring/tests/test_coloring.py:41: PytestCollectionWarning: yield tests were removed in pytest 4.0 - test_basic_cases will be ignored      def test_basic_cases(self): ```  ## Remove nose imports  I started removing the nose imports, but there are still several remaining.  The main issue here will be dealing with assert_almost_equal, SkipTest, raises, and assert_raises.  For assert_almost_equal, I noticed ``` def almost_equal(x, y, eps=0.5):     if abs(x - y) < eps:         return True     return False ``` in networkx/generators/tests/test_internet_as_graphs.py.  Maybe move that to somewhere like networkx/testing/utils.py.  Then you can replace assert_almost_equal with assert almost_equal.  You may want to implement almost_equal(x, y, places=7,err_msg='') or something similar.  You may want to take a look at: https://github.com/numpy/numpy/blob/master/numpy/testing/_private/utils.py  I don't know if there is anything useful there, but there might be.  These might be worth skimming: - http://doc.pytest.org/en/latest/assert.html - https://docs.pytest.org/en/latest/nose.html - http://doc.pytest.org/en/latest/goodpractices.html  ## Double check coverage  Just to make sure we aren't missing any tests.
comment
And it looks like there is another test failure now that I have reenabled all the test platforms.  I will leave this to you @dschult .  I will take another look on Friday.
comment
Power wasn't down yet, so I made one final documentation commit that also fixes #2574.  I am done for now, so feel free to work on anything.
comment
We probably don't want to depend on `numpy.testing.assert_*` for testing, since numpy is currently an optional dependency and the only thing we may need that it provides is `assert_almost_equal`.    For that, I was imaging that all we need is something like: ``` def almost_equal(x, y, places=7):     return round(abs(x - y), places) == 0 ``` Then just replace the non-NumPy `assert_almost_equal()`, with `assert almost_equal()` or `assert almost_equal(), msg`.  For tests like `networkx/algorithms/shortest_paths/tests/test_dense_numpy.py`, we would continue using `from numpy.testing import assert_equal, assert_almost_equal`.  If we end up needing a bunch of other stuff from `numpy.testing.assert_*`, then we may need to rethink this.
comment
After we get the test count from 3696 back to 4321, I will add doctest to our coverage report.  The number of tests found by the nosetest runner does not include the doctests.  ## Nose  Python: 3.7 OPTIONAL_DEPS=1 MINIMUM_REQUIREMENTS=1 REPORT_COVERAGE=1 https://travis-ci.org/networkx/networkx/jobs/595217966 Ran 4321 tests in 797.599s  ## Pytest  Python: 3.7 OPTIONAL_DEPS=1 MINIMUM_REQUIREMENTS=1 REPORT_COVERAGE=1 https://travis-ci.org/networkx/networkx/jobs/595908324 ========== 3696 passed, 9158 warnings in 770.60s (0:12:50) ==========  Python: 3.7 OPTIONAL_DEPS=1 DOCTEST=1 PIP_FLAGS="--pre" https://travis-ci.org/networkx/networkx/jobs/595908325 ========== 4206 passed, 5 skipped, 7500 warnings in 273.98s (0:04:33) ==========    
comment
@dschult I think it would be reasonable to leave the deprecations from other packages to a subsequent PR (unless you want to quickly take care of them now).  In particular, let's leave the numpy.matrix deprecations to a separate PR.  I managed to get into my office, which has power.  So I am going to work on removing the assert_raises.  Are you working on anything right now?  I just want to make sure we don't step on each others toes.
comment
I am having the following problem with `networkx/generators/spectral_graph_forge.py`:  ``` $ PYTHONPATH=. pytest  --doctest-modules generators/  ===================================================================================================== FAILURES ===================================================================================================== _____________________________________________________________________ [doctest] networkx.generators.spectral_graph_forge.spectral_graph_forge ______________________________________________________________________ 065         Graph Generation Targeting Modularity", IEEE Infocom, '18. 066         https://arxiv.org/abs/1801.01715 067     ..  [2] M. Newman, "Networks: an introduction", Oxford university press, 068         2010 069  070     Examples 071     -------- 072     >>> import networkx as nx 073     >>> G = nx.karate_club_graph() 074     >>> H = nx.spectral_graph_forge(G, 0.3) UNEXPECTED EXCEPTION: ModuleNotFoundError("No module named 'numpy'") Traceback (most recent call last):    File "/usr/lib64/python3.7/doctest.py", line 1329, in __run     compileflags, 1), test.globs)    File "<doctest networkx.generators.spectral_graph_forge.spectral_graph_forge[2]>", line 1, in <module>    File "</home/jarrod/.venv/nxmin/lib64/python3.7/site-packages/decorator.py:decorator-gen-606>", line 2, in spectral_graph_forge    File "/home/jarrod/src/networkx/networkx/utils/decorators.py", line 400, in _random_state     random_state = create_random_state(random_state_arg)    File "/home/jarrod/src/networkx/networkx/utils/misc.py", line 339, in create_random_state     import numpy as np  ModuleNotFoundError: No module named 'numpy'  /home/jarrod/src/networkx/networkx/generators/spectral_graph_forge.py:74: UnexpectedException ===================================================================================== 1 failed, 250 passed, 2 skipped in 7.83s ===================================================================================== ``` but ``` $ PYTHONPATH=. pytest  --doctest-modules generators/spectral_graph_forge.py =============================================================================================== test session starts ================================================================================================ platform linux -- Python 3.7.4, pytest-5.2.1, py-1.8.0, pluggy-0.13.0 rootdir: /home/jarrod/src/networkx plugins: cov-2.8.1 collected 1 item                                                                                                                                                                                                     generators/spectral_graph_forge.py s                                                                                                                                                                         [100%]  ================================================================================================ 1 skipped in 0.18s ================================================================================================ ``` 
comment
Do you have numpy installed?  The problem occurs when NumPy isn't installed.
comment
I am tempted (for now) to just require our doctests to pass if you have all the dependencies installed.  We can look at using something like `pytest-doctestplus` in a future PR.
comment
BTW my power just came back on, so I plan to work on this for the next few hours.  I will try to remove the remaining nose bits.
comment
@cai-lw The first release candidate for 2.4 is now available: https://pypi.org/project/networkx/2.4rc1/  You can install it via pip: ``` pip install networkx==2.4rc1 ``` If all goes well, 2.4 final will be released in about 1 week.
comment
This means that it skipped 8 tests (likely due to you not having all the optional dependencies installed).  All the other tests passed.
comment
This might be better to add here: - https://github.com/networkx/networkx/wiki or here (this would be a new file): - doc/developer/setup.rst  How you setup your environment is fairly developer and OS specific.  (For example, I don't use conda or brew at all.)  I would keep the `CONTRIBUTE.rst` short and generic.  Of my two suggestions, I would slightly prefer putting it in the developer docs.  If you want to include the text about notebooks, you should probably make it clear that the notebook is just for playing around with and that notebooks aren't meant to be added to the source repository.
comment
Yes, I use ``virtualenv``.  It probably make sense to include instructions for both.  If you want to add ``virtualenv`` instructions, I am happy to review them.  I can also provide some text (later today), if you wish (just let me know).  Also, since I use Fedora, I use ``dnf`` instead of brew.  We should have a little table for things like this.  For example, here is a table for installing ``git``:   http://networkx.readthedocs.io/en/latest/developer/gitwash/git_install.html  Another suggestion for the name is ``docs/developer/environment.rst``.  I am not sure which I prefer.  So I will leave it to you.
comment
@harryscholes No problem, I will add the ``virtualenv`` section later tonight or early tomorrow.  In the meantime, would you be able to address my inline comments and squash your commits into one commit?  Thanks.
comment
Thanks!  I am looking into something related to ``gdal`` and will finalize and merge this after that.
comment
I will take a look at this while I am looking into #3030
comment
@dschult I'll take another look and merge it before the 2.4rc1 (after adding venv instructions).
comment
I didn't look at this closely, but the tests should pass before this is committed.  The issue is > Prior to Python 3.8, the serialisation order of the XML attributes of elements was artificially made predictable by sorting the attributes by their name. Based on the now guaranteed ordering of dicts, this arbitrary reordering was removed in Python 3.8 to preserve the order in which attributes were originally parsed or created by user code.  I couldn't figure out a simple way to make the tests work for these two cases, so I just test them separately using `if sys.version_info < (3,8) ... else`.  All that needs to be done is to make sure you are testing for the correct expected version in the else case.  If it isn't obvious what to do, I can take a look at this over the weekend.
comment
It might also be a good idea to replay the necessary commits on top of a new branch off of the current master.  That way we can avoid the merge conflict issue.
comment
@PalAditya Just in case you aren't familiar with using branches for PRs, you may find this helpful: https://github.com/networkx/networkx/blob/master/CONTRIBUTING.rst  A longer discussion may be found here: https://networkx.github.io/documentation/latest/developer/gitwash/index.html
comment
@dschult Should this be merged?
comment
Seems OK to me.
comment
NetworkX 2.2 (recently released) is the last version of NetworkX to support Python 2.  We are not currently planning any additional releases for Python 2. 
comment
Would something like this work for you: ``` We don't use semantic versioning.  The first number indicates that we have made a major API break (e.g., 1.x to 2.x), which has happened once and probably won't happen again for some time.  The point releases are new versions and may contain minor API breakage.  Usually, this happens after a one cycle deprecation period.  API changes are documented here: https://networkx.github.io/documentation/stable/release/index.html ```
comment
I am less convinced on the compatibility matrix.  That information is already in the release notes, the install instructions, and each released package keeps track of its Python version dependency.  That is already three locations that I have to keep updated.  I am not eager to create yet another location with redundant data, which needs to be kept synchronized.  At any rate, I made a PR to keep the discussion going.  I will keep it open for a day or two to see if we can get any more feedback.
comment
I don't think there is a good reason to use ``~=`` for networkx, since we don't currently make bug-fix only releases and we make major releases only occasionally.  However, users will run into the same problem if they use ``>=`` instead of ``~=``.  The main difference being that ``>=`` will also run into problems when we make a 3.x release at some point in the future, while ``~=`` won't.  I wouldn't want to be too prescriptive regarding what folks should include in their ``requirements.txt`` files.  Different people use them for different things.  For instance, we currently have a mix of ``==`` and ``>=`` in our requirements files.  I tend to want to see errors quickly so I default to using ``>=``.  If we have known problems, then I tend to switch to ``==`` until the issue is fixed.  Other people might always use ``==`` and only test new releases of their dependencies by hand.  Maybe we could just say something like: ``` Since we don't normally make bug-fix only releases, it may not make sense for you to use ``~=`` as a pip version specifier. ```
comment
Python 3.4 support was dropped for the 2.2 release last September: https://networkx.github.io/documentation/stable/news.html#networkx-2-2
comment
I will create a PR for this sometime next week.   I'll also update related CI items.
comment
I'll take a look later today (at this and a couple other outstanding items).
comment
Please document the backwards-incompatible change in the ``API Changes`` section of ``doc/release/release_dev.rst`` by adding a new item with the heading: ``` * [`#2498 <https://github.com/networkx/networkx/pull/2498>`_]   <insert text here> ```
comment
You may want to rebase your branch on the upstream master and resolve the file conflicts.  Assuming you named your remotes as follows: ``` $ git remote -v origin  git@github.com:cole-maclean/networkx.git (fetch) origin  git@github.com:cole-maclean/networkx.git (push) upstream        git@github.com:networkx/networkx.git (fetch) upstream        git@github.com:networkx/networkx.git (push) ``` (If you are using different names than ``origin`` and ``upstream``, then you will need to modify the following commands accordingly.)  To rebase on the current master, you will need to do the following: ``` $ git checkout master  Switched to branch 'master' Your branch is up-to-date with 'origin/master'. $ git pull upstream master <some output> $ git checkout update-geometric-networks Switched to branch 'update-geometric-networks' $ git rebase master ``` At this point, you will need to resolve any conflicts and then finish the rebase.  The command ``git status`` should provide helpful tips about how to proceed.  You may find this page helpful:   http://networkx.readthedocs.io/en/latest/developer/gitwash/development_workflow.html#some-other-things-you-might-want-to-do  Feel free to ask me questions, if this isn't clear.  If you are reluctant to change history, let me know and I can cherry-pick your commits in a new PR (that way you will get the correct attribution in the commit history).  Assuming you rebase, then once you are done you will need to force push as you deliberately changed history: ``` git push -f origin update-geometric-networks ```
comment
I'll take a look at this sometime tomorrow.
comment
I am not sure why Travis didn't get triggered, but this should be ready to merge.
comment
I am sorry for jumping into this conversation so late, but I am not sure this is the right thing to do.  Providing notebooks as an **end-product** seems reasonable to me, but they are a bad format for working in (I wouldn't edit them for example).  Now that we are using ``sphinx-gallery`` and ``nb2plots`` we automatically get notebooks as an output format for free, while still being able to work with nice, easy to edit, and easy to version control source files.  I am planning to clean up the examples and tutorial more at some point, but I don't have the patience to pull out fixes from notebooks in a different repository.  I would rather see your time and effort spent on revising the current example scripts directly.  I assume that the original idea for converting things to notebook format was not wanting to maintain the custom gallery scripts.  But now we are using standard sphinx extensions, so I don't think this is an issue anymore.  Is there any other reason for wanting to use notebooks as source files?
comment
I agree that having a separate repo for long-form, narrative tutorials is a good idea. The geometric network tutorial you linked to is a good example (I hadn't noticed it before).  I have two main issues:  **First issue** I don't think storing these tutorials in the notebook format is a good idea. My recommendation for the long-form tutorials is to use Sphinx with the ``nb2plot`` and ``texext`` extensions.  Here are a couple of examples using ``nb2plot``: - http://networkx.readthedocs.io/en/latest/tutorial.html - http://matthew-brett.github.io/teaching/pca_introduction.html  If you scroll to the bottom of either page, you will find links to autogenerated python scripts and notebooks.  There are many advantages to using reStructuredText and Sphinx with the ``nb2plot`` extension compared to working directly in notebooks. For example, - better format for version control - more standard tool chain for testing and continuous integration - more advanced features such as support for indices, search, and cross-referencing - easier to edit using text editors and command-line tools - pretty and easier to read webpages - nice PDF output  In addition, ``nb2plot`` provides extra functionality that the notebook lacks.  For example, you can hide complicated code cells when it distracts from the exposition.  I would also name the repository something like ``tutorials``. Naming the repository after the content instead of the particular format we choose to use will make it clearer what the purpose of the repository is.  I am happy to quickly (i.e., by the end of today) setup a skelton repository using ``notebooks/generators/geometric.ipynb`` (or I could quickly put together a something, e.g., using the Fiedler vector and the karate club dataset). That way we could compare the two options. Alternatively, I could review and provide advice on using the toolstack, if you would prefer to do it.  **Second issue** I think we should have only one canonical location for the main tutorial and small examples. The main tutorial (http://networkx.readthedocs.io/en/latest/tutorial.html) should have links to the long-form tutorial and gallery examples. I don't think we need to populate the tutorial repo with placeholder tutorials. While you may be able to keep the two versions in sync now, I worry that they will diverge over time.  Thoughts?
comment
You've included a bunch of commits that have already been merged.  Would it be possible for you to make a new branch off of master with just the changes to ``doc/reference/drawing.rst``?
comment
This seems reasonable to merge now.  It shouldn't affect the 2.0 release timing.
comment
This is already fixed on master, which will be released as 2.0 soon.  We will not be making another 1.x release.
comment
Thanks!  To the build the docs, you should run ``make html`` in the ``doc`` directory.  Depending on what you've installed, you may need to run ``pip install -r requirements.txt`` from the ``doc`` directory first.  I have a few things I want to change about this process, so I will make a PR with those changes. 
comment
This seems like a good solution for now.
comment
@arodriguezca It would be great if you could add a test in the next few days.  If you have any questions, please let us know.
comment
@arodriguezca I would like to merge this before we make a 2.0beta release later this week.  If you prefer, I can add a test for this.  Thanks!
comment
Great, thanks!
comment
I don't use Pandas, but it also seems to me that there could be a use for both adjacency matrices and edge lists.  So maybe we should provide either (1) four functions or (2) modify the to/from functions to have a flag indicating whether we are using an adjacency matrix or an edge list.  I haven't looked at the code yet, but I am happy to provide an implementation of either solution.   @dschult , @hagberg   If we go with 4 functions, maybe we should delete the two existing functions and provide something like:  ``` def from_pandas_edgelist(df, source='source', target='target', edge_attr=None, create_using=None):  def to_pandas_edgelist(G, nodelist=None, dtype=None, order=None,                                              multigraph_weight=sum, weight='weight', nonedge=0.0):  def from_pandas_adjacency(df, create_using=None, mask_zero=True, mask_nan=True):  def to_pandas_adjacency(G, nodelist=None, dtype=None, order=None,                                                 multigraph_weight=sum, weight='weight', nonedge=0.0): ```  Then in `to_networkx_graph`, we could do something like:  ``` if isinstance(data, pd.DataFrame):     if data.shape[0] == data.shape[1]:         <call from_pandas_adjacency(data)     else          <call  from_pandas_edgelist(data, edge_attr=True, create_using=create_using) ```  Thoughts?  Should I try implementing something for comment?
comment
The current release of ``networkx`` doesn't support Python 3.6.  We will release ``networkx`` 2.0 soon and this will no longer be an issue.  The 2.0 release changes quite a few things, which is why it has taken longer to finalize than previous releases.  Thanks for you patience.  You can follow 2.0 development here: https://github.com/networkx/networkx/milestone/3
comment
It appears 2.0 is near.  This doesn't seem relevant any more.
comment
I could do this.  I will discuss on networkx/networkx-website#9.
comment
This can be closed when networkx/networkx-website#11 is merged. @hagberg 
comment
The website (http://networkx.github.io/) has been updated with the default Sphinx theme.  If this looks reasonable, this issue can be closed.  If there is still an interest in making a more substantial change, I suggest we open a new ticket for discussion.  But I don't think it should be marked as a `networkx-2.0` milestone.  At any rate, it isn't necessary for the landing page to be updated at the same time as a networkx release.
comment
@hagberg , @dschult   This should be closed.  We don't need the matplotlib plot directive, since we are using the sphinx-gallery now.
comment
This issue was fixed in commit ffa3e5deb837 and should be closed. @hagberg   Just noticed a small remaining item. I will submit a pull request to close this momentarily.  Sorry for the noise.
