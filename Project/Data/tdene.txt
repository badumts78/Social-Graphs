issue
Critical NetworkX 2.8.X bug with mutable cached_properties#TITLE_END#### Current Behavior  The `nodes()` method of a Graph is decorated with `@cached_property`.<br> This leads to the assumption that a Graph's `nodes()` method should return a static value.<br> This assumption is incorrect.  Notably, the `@cached_property` decorator completely breaks `Graph.subgraph()`.<br> Trace:  Graph.subgraph -> graphviews.subgraph_view -> [this line](https://github.com/networkx/networkx/blob/ead0e65bda59862e329f2e6f1da47919c6b07ca9/networkx/classes/graphviews.py#L149) prevents [this line](https://github.com/networkx/networkx/blob/ead0e65bda59862e329f2e6f1da47919c6b07ca9/networkx/classes/graphviews.py#L152) from functioning correctly  Subgraphs are shown as containing the wrong nodes as a result, until `del G.nodes` is manually run.<br> This breaks things.  ### Expected Behavior  `@cached_property` decorators should not break functionality.  ### Steps to Reproduce  - Initialize a Graph, `G` - Populate `G` with node objects that are complex enough that the following inequality assertion will pass: `newG = nx.freeze(G.__class__()); newG._graph = G; newG.graph = G.graph; assert(newG.nodes()!=G.nodes)`. - Pick a subset of `G.nodes`, call this `subG_nodes` - `subgraph = G.subgraph(subG_nodes)` - In NetworkX 2.7, the nodes of `subgraph` will be a subset of the nodes of `G`. In NetworkX 2.8, the nodes of `subgraph` and the nodes of `G` will be a fully disjoint set.  ### Environment <!--- Please provide details about your local environment --> Python version: 3.9.10 NetworkX version: 2.8.5 vs 2.7.0 
comment
+1 person here to report on this issue causing problems with my CI. Commenting so that I get auto-notified when the issue closes.  (btw, thanks for your development and continued maintenance of this great library!)
comment
I can provide the following data points:  [GitHub CI failling](https://github.com/tdene/synth_opt_adders/runs/5384343915?check_suite_focus=true) with nearly the same trace as OP, using [this workflow](https://github.com/tdene/synth_opt_adders/blob/main/.github/workflows/config.yml). The workflow `runs-on: ubuntu-latest` and uses CPython 3.10.2  On my personal machine with Python 3.8.10 and Ubuntu 20.04.4, I do not experience this issue, but I can replicate a very similar case:  ```~$ python3 Python 3.8.10 (default, Nov 26 2021, 20:14:08)  [GCC 9.3.0] on linux Type "help", "copyright", "credits" or "license" for more information. >>> import importlib >>> importlib.machinery Traceback (most recent call last):   File "<stdin>", line 1, in <module> AttributeError: module 'importlib' has no attribute 'machinery' >>> importlib.machinery <module 'importlib.machinery' from '/usr/lib/python3.8/importlib/machinery.py'> ```  The same behavior persists with other built-in packages, such as urllib.request. Posts from [2015](https://web.archive.org/web/20160819073115/http://www.gossamer-threads.com/lists/python/python/1215580) and [2011](https://stackoverflow.com/questions/4871369/python-error-attributeerror-module-object-has-no-attribute) can be found discussing this.  So it seems related to choices made in `__init__.py`. I just learned this for the first time while writing this reply, but it looks like this is how Python behaves.
comment
Now, why this causes errors in GitHub's CI, but not in local CI or manual use, I cannot guess.
comment
@rossbar Thanks for the catch!  I do however confirm that after fixing my `python`/`python3` ambiguities in [this branch](https://github.com/tdene/synth_opt_adders/blob/test/.github/workflows/config.yml), NetworkX 2.7.0 continues to lead to CI failing as can be seen [here](https://github.com/tdene/synth_opt_adders/runs/5392276983?check_suite_focus=true).  Not a problem on my end, I've just downgraded to 2.6.3 until 2.7.1 is out. But interesting issue.
