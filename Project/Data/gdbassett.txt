issue
adding attr dict to non-existent edge causes graph inconsistency#TITLE_END#G.edge[node1][node2] = {"test":"test}  where G is of type networkx.classes.graph.Graph  will add an edge from node1 to node2, but node1 will not be in node2's neighbor list (G.neighbors(node2). This can lead to an inconsistent graph with an edge leading to a non-existent node.  (tested on networkx 1.11) 
issue
gexf parser conflict with gephi importer#TITLE_END#I have an issue importing gexf files from networkx into gephi.  The issue seems to be around duplicate attributes.  I don't know all the cases in which gephi ignores attributes, however it at least ignores exact matches as well as case-insensitive matches.  Here's a simple example of a list of attributes and the associated output"  ```     <attributes class="edge" mode="static">       <attribute id="4" title="Relationship_Type" type="string" />     </attributes>     <attributes class="node" mode="static">       <attribute id="0" title="color" type="string" />       <attribute id="1" title="number" type="integer" />       <attribute id="2" title="Color" type="string" />       <attribute id="3" title="Candy" type="integer" />     </attributes> ```  Here's the error:  ``` Default edge type set as UNDIRECTED GEXF version 1.1 (deprecated) Edge attribute found 'Relationship_Type' (STRING) Node attribute found 'color' (STRING) Node attribute found 'number' (INT) Attribute with id '2' already exists, the attribute is ignored Node attribute found 'Candy' (INT) ```  Here's a more complex example:  ```     <attributes class="edge" mode="static">       <attribute id="26" title="Relationship_Type" type="string" />       <attribute id="27" title="totalBytes" type="double" />       <attribute id="28" title="totalFlows" type="double" />     </attributes>     <attributes class="edge" mode="dynamic">       <attribute id="22" title="Relationship_Type" type="string" />       <attribute id="23" title="totalBytes" type="double" />       <attribute id="24" title="start" type="string" />       <attribute id="25" title="totalFlows" type="integer" />     </attributes>     <attributes class="node" mode="dynamic">       <attribute id="12" title="bytesInAsClient" type="integer" />       <attribute id="13" title="bytesOutAsServer" type="integer" />       <attribute id="14" title="bytesOutAsClient" type="integer" />       <attribute id="15" title="start" type="string" />       <attribute id="16" title="DNS" type="string" />       <attribute id="17" title="flowsAsServer" type="integer" />       <attribute id="18" title="model" type="string" />       <attribute id="19" title="flowsAsClient" type="integer" />       <attribute id="20" title="Class" type="string" />       <attribute id="21" title="bytesInAsServer" type="integer" />     </attributes>     <attributes class="node" mode="static">       <attribute id="0" title="coid" type="string" />       <attribute id="1" title="DNS" type="string" />       <attribute id="2" title="ip" type="string" />       <attribute id="3" title="model" type="string" />       <attribute id="4" title="cidr" type="string" />       <attribute id="5" title="Class" type="string" />       <attribute id="6" title="bytesInAsClient" type="integer" />       <attribute id="7" title="bytesOutAsServer" type="integer" />       <attribute id="8" title="bytesOutAsClient" type="integer" />       <attribute id="9" title="flowsAsServer" type="integer" />       <attribute id="10" title="flowsAsClient" type="integer" />       <attribute id="11" title="bytesInAsServer" type="integer" />     </attributes> ```  Here are the gephi errors:  ``` Default edge type set as UNDIRECTED GEXF version 1.1 (deprecated) Edge attribute found 'Relationship_Type' (STRING) Edge attribute found 'totalBytes' (DOUBLE) Edge attribute found 'totalFlows' (DOUBLE) Attribute with id '22' already exists, the attribute is ignored Attribute with id '23' already exists, the attribute is ignored Edge attribute found 'start' (DYNAMIC_STRING) Attribute with id '25' already exists, the attribute is ignored Node attribute found 'bytesInAsClient' (DYNAMIC_INT) Node attribute found 'bytesOutAsServer' (DYNAMIC_INT) Node attribute found 'bytesOutAsClient' (DYNAMIC_INT) Node attribute found 'start' (DYNAMIC_STRING) Node attribute found 'DNS' (DYNAMIC_STRING) Node attribute found 'flowsAsServer' (DYNAMIC_INT) Node attribute found 'model' (DYNAMIC_STRING) Node attribute found 'flowsAsClient' (DYNAMIC_INT) Node attribute found 'Class' (DYNAMIC_STRING) Node attribute found 'bytesInAsServer' (DYNAMIC_INT) Node attribute found 'coid' (STRING) Attribute with id '1' already exists, the attribute is ignored Node attribute found 'ip' (STRING) Attribute with id '3' already exists, the attribute is ignored Node attribute found 'cidr' (STRING) Attribute with id '5' already exists, the attribute is ignored Attribute with id '6' already exists, the attribute is ignored Attribute with id '7' already exists, the attribute is ignored Attribute with id '8' already exists, the attribute is ignored Attribute with id '9' already exists, the attribute is ignored Attribute with id '10' already exists, the attribute is ignored Attribute with id '11' already exists, the attribute is ignored Time Format: DOUBLE ```  I don't know if this a networkx thing, a gephi thing, or a gexf thing however it causes a significant number of issues with importing a graph that has nodes added in different way sat different times.  (Also, ignore the dynamic_int's.  Those are caused by gephi seeing the 'start' time attribute and consequently time phasing a bunch of the attributes.) 
issue
write_graphml does not recast properties with same name but different value types#TITLE_END#``` g = nx.DiGraph() g.add_node('a') g.add_node('b') g.node['a']['count'] = 1 g.node['b']['count'] = float(.5) nx.write_graphml(g, "g.graphml") ```  The above code will result in two separate attribute keys within the XML file, one for the int and one for the float.  Expected operation would be for the 'count' property to be abstracted to the broadest type which could contain all values (in this case, float), and saved as a single attribute. 
issue
GML Parsing issue: Parser misses "]" line consistently.#TITLE_END#I'm not quite sure how to trace this one back.  I have some large GML files (say 60k nodes, 90k edges).  They were written by networkx but fail to parse back in.  The error is always:  ``` Importing Graph   node [   ^ Expected "]" (at char 4477197), (line:229508, col:3)  Traceback (most recent call last):   File "SOMEFILE.py", line 63, in <module>     g = nx.read_gml(GRAPH_FILE)   File "<string>", line 2, in read_gml   File "C:\Python27\lib\site-packages\networkx\utils\decorators.py", line 263, in _open_file     result = func(*new_args, **kwargs)   File "C:\Python27\lib\site-packages\networkx\readwrite\gml.py", line 85, in read_gml     G=parse_gml(lines,relabel=relabel)   File "C:\Python27\lib\site-packages\networkx\readwrite\gml.py", line 136, in parse_gml     tokens =gml.parseString(data)   File "C:\Python27\lib\site-packages\pyparsing.py", line 1041, in parseString     raise exc ParseException: Expected "]" (at char 4477197), (line:229508, col:3) ```  It gets to line "node [" and errors because it expected a "]".  However in both files this happens on, the line before "node [" is the "]" the parser was expecting.  It fails at different locations in both files but always fails consistently at the same location in the file.  (I should note the other file fails much sooner, closer to line 300.) 
issue
"convert_bool" in gexf.py does not handle all bools#TITLE_END#in gexf, line 820-823:  ```                 atype=gexf_keys[key]['type']                 value=a.get('value')                 if atype=='boolean':                     value=self.convert_bool[value] ```  calls line 211:  ```     convert_bool={'true':True,'false':False} ```  However, values such as "True" will also evaluate as boolean (on line 822) but are not in the convert_bool dictionary resulting in the error:  ``` KeyError: 'True' ``` 
issue
GEXF export does not account for python 'long' type#TITLE_END#should an attribute have type 'long', gexf.py will crash with a KeyError at line 374:   ``` python     attr_id = self.get_attr_id(make_str(k), self.xml_type[type(v)],                                        node_or_edge, default, mode) ```  This is due to 'long' not being in the list 'types' at line 183.  Adding:  ``` python     (long, "float") ```  to the types list seems to provide the necessary mapping. 
comment
A few days after making the changes I have had some issues with properties showing up as lists when they were really strings or longs.  I have no clue if this is related to this issue but it would be worth keeping an eye on.  EDIT: I reverted the changes and ran and am still having the issues.  IT may be an issue with gephi's import script. 
comment
I don't think it was networkx.  I think gephi noticed a time in the attributes and started acting weird.  The .gexf it's self looks fine. 
