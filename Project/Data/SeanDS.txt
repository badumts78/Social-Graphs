issue
Exporting graph with empty node name to pygraphviz causes error#TITLE_END#<!-- If you have a general question about NetworkX, please use the discussions tab to create a new discussion -->  <!--- Provide a general summary of the issue in the Title above -->   ### Current Behavior NetworkX allows nodes to have empty names, e.g.  ```python import networkx  g = networkx.DiGraph() g.add_node("") ```  Such a graph can be plotted using NetworkX's own Matplotlib plotting tools. However, when exported to a dot file via `networkx.drawing.nx_agraph.to_agraph`, an error is raised by `pygraphviz`:  ```python networkx.drawing.nx_agraph.to_agraph(g) ```  ``` Traceback (most recent call last):   File "/path/to/script.py", line 4, in <module>     A.add_node("")   File "/path/to/python3.9/site-packages/pygraphviz/agraph.py", line 326, in add_node     node = Node(self, nh=nh)   File "/path/to/python3.9/site-packages/pygraphviz/agraph.py", line 1843, in __new__     n = super().__new__(self, gv.agnameof(nh), graph.encoding) TypeError: decoding to str: need a bytes-like object, NoneType found ```  I think graphviz itself does not allow empty nodes, though I might be wrong. If this is the case then `pygraphviz` appears to be doing what's expected (refusing to create an empty node).  ### Expected Behavior I suggest that NetworkX should issue a warning or exception to tell the user that graphs containing empty nodes cannot be exported to graphviz format.  ### Steps to Reproduce See above.  ### Environment <!--- Please provide details about your local environment --> Python version: 3.9 NetworkX version: 2.5
comment
@hagberg I'd also be interested to know why this issue was closed - import times in NetworkX are in my experience pretty slow and some refactoring/lazy importing could speed things up a lot when only parts of NetworkX are being used.
comment
I'm using NetworkX as part of an application that uses a CLI. The CLI imports only `DiGraph` by doing `from networkx import DiGraph` but this seems to be pulling in loads of algorithms from other modules immediately, which adds a noticeable delay. Naively, to me it seems like NetworkX, as a collection of algorithms and data structures, should really be importing only the essentials at the top level and then importing each submodule as it is needed by a `DiGraph.xyz()` call.  To take a concrete example, is it really necessary to pull in all of this stuff in [`networkx.__init__`](https://github.com/networkx/networkx/blob/master/networkx/__init__.py)? ```python # These are import orderwise from networkx.exception import * import networkx.utils  import networkx.classes.filters import networkx.classes from networkx.classes import *  import networkx.convert from networkx.convert import *  import networkx.convert_matrix from networkx.convert_matrix import *   import networkx.relabel from networkx.relabel import *  import networkx.generators from networkx.generators import *  import networkx.readwrite from networkx.readwrite import *  # Need to test with SciPy, when available import networkx.algorithms from networkx.algorithms import * import networkx.linalg  from networkx.linalg import * from networkx.testing.test import run as test  import networkx.drawing from networkx.drawing import * ```
comment
On some tests we did a few months ago commenting out the stuff we don't need from the top level of networkx and timing the import with `python -X importtime <(echo "import networkx")` it was of the order 0.25 seconds improvement on the machine used for the test. As I said in my last post, for a CLI (which is also pulling in our own application and others, adding another few hundredths of a second or so) this is pretty noticeable for the user.  If it's a large cost, we can probably live with this import time, but I guess my complaint is more philosophical: it doesn't seem like a good approach to pull in everything on import, but leave it up to the user to pull in the stuff they want.
comment
Well, as far as I know the only way to speed up imports is to stop importing so much stuff on the top level. That necessarily means that users will have to instead add manual `from network.algorithms.dag import topological_sort` etc. into their scripts instead of relying on these being automatically available from `import networkx`. This definitely impacts user convenience, breaks backwards compatibility so probably needs a new major version, requires lots of changes to docs, and I guess breaks lots of existing test and example scripts. I don't expect a non-core committer submitting a PR that changes essentially everything about the project would be well received. With respect, this to me sounds like something to be added to milestones for a future release rather than a simple PR. That said, maybe @pb-cdunn had something different in mind to speed up imports?
comment
Thanks @dschult for your work on #4296! Much appreciated.
